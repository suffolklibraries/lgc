var Ht=Object.defineProperty;var Wt=(t,e,r)=>e in t?Ht(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ge=(t,e,r)=>(Wt(t,typeof e!="symbol"?e+"":e,r),r),Gt=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var rt=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)};var We=(t,e,r)=>(Gt(t,e,"access private method"),r);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var shams=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var s=42;e[r]=s;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,r);if(l.value!==s||l.enumerable!==!0)return!1}return!0},origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams,hasSymbols$1=function(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},test={foo:{}},$Object=Object,hasProto$1=function(){return{__proto__:test}.foo===test.foo&&!({__proto__:null}instanceof $Object)},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",toStr$1=Object.prototype.toString,max$1=Math.max,funcType="[object Function]",concatty=function(e,r){for(var n=[],s=0;s<e.length;s+=1)n[s]=e[s];for(var a=0;a<r.length;a+=1)n[a+e.length]=r[a];return n},slicy=function(e,r){for(var n=[],s=r||0,a=0;s<e.length;s+=1,a+=1)n[a]=e[s];return n},joiny=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},implementation$1=function(e){var r=this;if(typeof r!="function"||toStr$1.apply(r)!==funcType)throw new TypeError(ERROR_MESSAGE+r);for(var n=slicy(arguments,1),s,a=function(){if(this instanceof s){var y=r.apply(this,concatty(n,arguments));return Object(y)===y?y:this}return r.apply(e,concatty(n,arguments))},l=max$1(0,r.length-n.length),c=[],u=0;u<l;u++)c[u]="$"+u;if(s=Function("binder","return function ("+joiny(c,",")+"){ return binder.apply(this,arguments); }")(a),r.prototype){var f=function(){};f.prototype=r.prototype,s.prototype=new f,f.prototype=null}return s},implementation=implementation$1,functionBind=Function.prototype.bind||implementation,call=Function.prototype.call,$hasOwn=Object.prototype.hasOwnProperty,bind$1=functionBind,hasown=bind$1.call(call,$hasOwn),undefined$1,$SyntaxError$1=SyntaxError,$Function=Function,$TypeError$3=TypeError,getEvalledConstructor=function(t){try{return $Function('"use strict"; return ('+t+").constructor;")()}catch{}},$gOPD$1=Object.getOwnPropertyDescriptor;if($gOPD$1)try{$gOPD$1({},"")}catch{$gOPD$1=null}var throwTypeError=function(){throw new $TypeError$3},ThrowTypeError=$gOPD$1?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD$1(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=hasSymbols$1(),hasProto=hasProto$1(),getProto=Object.getPrototypeOf||(hasProto?function(t){return t.__proto__}:null),needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto?undefined$1:getProto(Uint8Array),INTRINSICS={"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols&&getProto?getProto([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols&&getProto?getProto(getProto([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols||!getProto?undefined$1:getProto(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols||!getProto?undefined$1:getProto(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols&&getProto?getProto(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError$1,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$3,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet};if(getProto)try{null.error}catch(t){var errorProto=getProto(getProto(t));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function t(e){var r;if(e==="%AsyncFunction%")r=getEvalledConstructor("async function () {}");else if(e==="%GeneratorFunction%")r=getEvalledConstructor("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=getEvalledConstructor("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var s=t("%AsyncGenerator%");s&&getProto&&(r=getProto(s.prototype))}return INTRINSICS[e]=r,r},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=functionBind,hasOwn$1=hasown,$concat$1=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace$1=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),$exec=bind.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(e){var r=$strSlice(e,0,1),n=$strSlice(e,-1);if(r==="%"&&n!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected opening `%`");var s=[];return $replace$1(e,rePropName,function(a,l,c,u){s[s.length]=c?$replace$1(u,reEscapeChar,"$1"):l||a}),s},getBaseIntrinsic=function(e,r){var n=e,s;if(hasOwn$1(LEGACY_ALIASES,n)&&(s=LEGACY_ALIASES[n],n="%"+s[0]+"%"),hasOwn$1(INTRINSICS,n)){var a=INTRINSICS[n];if(a===needsEval&&(a=doEval(n)),typeof a>"u"&&!r)throw new $TypeError$3("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:s,name:n,value:a}}throw new $SyntaxError$1("intrinsic "+e+" does not exist!")},getIntrinsic=function(e,r){if(typeof e!="string"||e.length===0)throw new $TypeError$3("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new $TypeError$3('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,e)===null)throw new $SyntaxError$1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=stringToPath(e),s=n.length>0?n[0]:"",a=getBaseIntrinsic("%"+s+"%",r),l=a.name,c=a.value,u=!1,f=a.alias;f&&(s=f[0],$spliceApply(n,$concat$1([0,1],f)));for(var y=1,b=!0;y<n.length;y+=1){var g=n[y],v=$strSlice(g,0,1),S=$strSlice(g,-1);if((v==='"'||v==="'"||v==="`"||S==='"'||S==="'"||S==="`")&&v!==S)throw new $SyntaxError$1("property names with quotes must have matching quotes");if((g==="constructor"||!b)&&(u=!0),s+="."+g,l="%"+s+"%",hasOwn$1(INTRINSICS,l))c=INTRINSICS[l];else if(c!=null){if(!(g in c)){if(!r)throw new $TypeError$3("base intrinsic for "+e+" exists, but the property is not available.");return}if($gOPD$1&&y+1>=n.length){var T=$gOPD$1(c,g);b=!!T,b&&"get"in T&&!("originalValue"in T.get)?c=T.get:c=c[g]}else b=hasOwn$1(c,g),c=c[g];b&&!u&&(INTRINSICS[l]=c)}}return c},callBind$1={exports:{}},GetIntrinsic$5=getIntrinsic,$defineProperty$1=GetIntrinsic$5("%Object.defineProperty%",!0),hasPropertyDescriptors$1=function(){if($defineProperty$1)try{return $defineProperty$1({},"a",{value:1}),!0}catch{return!1}return!1};hasPropertyDescriptors$1.hasArrayLengthDefineBug=function(){if(!hasPropertyDescriptors$1())return null;try{return $defineProperty$1([],"length",{value:1}).length!==1}catch{return!0}};var hasPropertyDescriptors_1=hasPropertyDescriptors$1,GetIntrinsic$4=getIntrinsic,$gOPD=GetIntrinsic$4("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch{$gOPD=null}var gopd$1=$gOPD,hasPropertyDescriptors=hasPropertyDescriptors_1(),GetIntrinsic$3=getIntrinsic,$defineProperty=hasPropertyDescriptors&&GetIntrinsic$3("%Object.defineProperty%",!0);if($defineProperty)try{$defineProperty({},"a",{value:1})}catch{$defineProperty=!1}var $SyntaxError=GetIntrinsic$3("%SyntaxError%"),$TypeError$2=GetIntrinsic$3("%TypeError%"),gopd=gopd$1,defineDataProperty=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new $TypeError$2("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new $TypeError$2("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new $TypeError$2("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new $TypeError$2("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new $TypeError$2("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new $TypeError$2("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,a=arguments.length>4?arguments[4]:null,l=arguments.length>5?arguments[5]:null,c=arguments.length>6?arguments[6]:!1,u=!!gopd&&gopd(e,r);if($defineProperty)$defineProperty(e,r,{configurable:l===null&&u?u.configurable:!l,enumerable:s===null&&u?u.enumerable:!s,value:n,writable:a===null&&u?u.writable:!a});else if(c||!s&&!a&&!l)e[r]=n;else throw new $SyntaxError("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},GetIntrinsic$2=getIntrinsic,define=defineDataProperty,hasDescriptors=hasPropertyDescriptors_1(),gOPD=gopd$1,$TypeError$1=GetIntrinsic$2("%TypeError%"),$floor$1=GetIntrinsic$2("%Math.floor%"),setFunctionLength=function(e,r){if(typeof e!="function")throw new $TypeError$1("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||$floor$1(r)!==r)throw new $TypeError$1("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],s=!0,a=!0;if("length"in e&&gOPD){var l=gOPD(e,"length");l&&!l.configurable&&(s=!1),l&&!l.writable&&(a=!1)}return(s||a||!n)&&(hasDescriptors?define(e,"length",r,!0,!0):define(e,"length",r)),e};(function(t){var e=functionBind,r=getIntrinsic,n=setFunctionLength,s=r("%TypeError%"),a=r("%Function.prototype.apply%"),l=r("%Function.prototype.call%"),c=r("%Reflect.apply%",!0)||e.call(l,a),u=r("%Object.defineProperty%",!0),f=r("%Math.max%");if(u)try{u({},"a",{value:1})}catch{u=null}t.exports=function(g){if(typeof g!="function")throw new s("a function is required");var v=c(e,l,arguments);return n(v,1+f(0,g.length-(arguments.length-1)),!0)};var y=function(){return c(e,a,arguments)};u?u(t.exports,"apply",{value:y}):t.exports.apply=y})(callBind$1);var callBindExports=callBind$1.exports,GetIntrinsic$1=getIntrinsic,callBind=callBindExports,$indexOf=callBind(GetIntrinsic$1("String.prototype.indexOf")),callBound$1=function(e,r){var n=GetIntrinsic$1(e,!!r);return typeof n=="function"&&$indexOf(e,".prototype.")>-1?callBind(n):n};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var hasMap=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice=String.prototype.slice,$replace=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols||"symbol")?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function addNumericSeparator(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||$test.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-$floor(-t):$floor(t);if(n!==t){var s=String(n),a=$slice.call(e,s.length+1);return $replace.call(s,r,"$&_")+"."+$replace.call($replace.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace.call(e,r,"$&_")}var utilInspect=require$$0,inspectCustom=utilInspect.custom,inspectSymbol=isSymbol(inspectCustom)?inspectCustom:null,objectInspect=function t(e,r,n,s){var a=r||{};if(has$4(a,"quoteStyle")&&a.quoteStyle!=="single"&&a.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$4(a,"maxStringLength")&&(typeof a.maxStringLength=="number"?a.maxStringLength<0&&a.maxStringLength!==1/0:a.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var l=has$4(a,"customInspect")?a.customInspect:!0;if(typeof l!="boolean"&&l!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$4(a,"indent")&&a.indent!==null&&a.indent!=="	"&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$4(a,"numericSeparator")&&typeof a.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var c=a.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return inspectString(e,a);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var u=String(e);return c?addNumericSeparator(e,u):u}if(typeof e=="bigint"){var f=String(e)+"n";return c?addNumericSeparator(e,f):f}var y=typeof a.depth>"u"?5:a.depth;if(typeof n>"u"&&(n=0),n>=y&&y>0&&typeof e=="object")return isArray$5(e)?"[Array]":"[Object]";var b=getIndent(a,n);if(typeof s>"u")s=[];else if(indexOf$1(s,e)>=0)return"[Circular]";function g(ue,oe,pe){if(oe&&(s=$arrSlice.call(s),s.push(oe)),pe){var le={depth:a.depth};return has$4(a,"quoteStyle")&&(le.quoteStyle=a.quoteStyle),t(ue,le,n+1,s)}return t(ue,a,n+1,s)}if(typeof e=="function"&&!isRegExp$1(e)){var v=nameOf(e),S=arrObjKeys(e,g);return"[Function"+(v?": "+v:" (anonymous)")+"]"+(S.length>0?" { "+$join.call(S,", ")+" }":"")}if(isSymbol(e)){var T=hasShammedSymbols?$replace.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(e);return typeof e=="object"&&!hasShammedSymbols?markBoxed(T):T}if(isElement$2(e)){for(var N="<"+$toLowerCase.call(String(e.nodeName)),w=e.attributes||[],A=0;A<w.length;A++)N+=" "+w[A].name+"="+wrapQuotes(quote(w[A].value),"double",a);return N+=">",e.childNodes&&e.childNodes.length&&(N+="..."),N+="</"+$toLowerCase.call(String(e.nodeName))+">",N}if(isArray$5(e)){if(e.length===0)return"[]";var I=arrObjKeys(e,g);return b&&!singleLineValues(I)?"["+indentedJoin(I,b)+"]":"[ "+$join.call(I,", ")+" ]"}if(isError(e)){var q=arrObjKeys(e,g);return!("cause"in Error.prototype)&&"cause"in e&&!isEnumerable.call(e,"cause")?"{ ["+String(e)+"] "+$join.call($concat.call("[cause]: "+g(e.cause),q),", ")+" }":q.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+$join.call(q,", ")+" }"}if(typeof e=="object"&&l){if(inspectSymbol&&typeof e[inspectSymbol]=="function"&&utilInspect)return utilInspect(e,{depth:y-n});if(l!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(isMap(e)){var V=[];return mapForEach&&mapForEach.call(e,function(ue,oe){V.push(g(oe,e,!0)+" => "+g(ue,e))}),collectionOf("Map",mapSize.call(e),V,b)}if(isSet(e)){var K=[];return setForEach&&setForEach.call(e,function(ue){K.push(g(ue,e))}),collectionOf("Set",setSize.call(e),K,b)}if(isWeakMap(e))return weakCollectionOf("WeakMap");if(isWeakSet(e))return weakCollectionOf("WeakSet");if(isWeakRef(e))return weakCollectionOf("WeakRef");if(isNumber$1(e))return markBoxed(g(Number(e)));if(isBigInt(e))return markBoxed(g(bigIntValueOf.call(e)));if(isBoolean(e))return markBoxed(booleanValueOf.call(e));if(isString$1(e))return markBoxed(g(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===commonjsGlobal)return"{ [object globalThis] }";if(!isDate(e)&&!isRegExp$1(e)){var J=arrObjKeys(e,g),Q=gPO?gPO(e)===Object.prototype:e instanceof Object||e.constructor===Object,se=e instanceof Object?"":"null prototype",ie=!Q&&toStringTag&&Object(e)===e&&toStringTag in e?$slice.call(toStr(e),8,-1):se?"Object":"",me=Q||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",re=me+(ie||se?"["+$join.call($concat.call([],ie||[],se||[]),": ")+"] ":"");return J.length===0?re+"{}":b?re+"{"+indentedJoin(J,b)+"}":re+"{ "+$join.call(J,", ")+" }"}return String(e)};function wrapQuotes(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function quote(t){return $replace.call(String(t),/"/g,"&quot;")}function isArray$5(t){return toStr(t)==="[object Array]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isDate(t){return toStr(t)==="[object Date]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isRegExp$1(t){return toStr(t)==="[object RegExp]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isError(t){return toStr(t)==="[object Error]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isString$1(t){return toStr(t)==="[object String]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isNumber$1(t){return toStr(t)==="[object Number]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isBoolean(t){return toStr(t)==="[object Boolean]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isSymbol(t){if(hasShammedSymbols)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!symToString)return!1;try{return symToString.call(t),!0}catch{}return!1}function isBigInt(t){if(!t||typeof t!="object"||!bigIntValueOf)return!1;try{return bigIntValueOf.call(t),!0}catch{}return!1}var hasOwn=Object.prototype.hasOwnProperty||function(t){return t in this};function has$4(t,e){return hasOwn.call(t,e)}function toStr(t){return objectToString.call(t)}function nameOf(t){if(t.name)return t.name;var e=$match.call(functionToString.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function indexOf$1(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function isMap(t){if(!mapSize||!t||typeof t!="object")return!1;try{mapSize.call(t);try{setSize.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function isWeakMap(t){if(!weakMapHas||!t||typeof t!="object")return!1;try{weakMapHas.call(t,weakMapHas);try{weakSetHas.call(t,weakSetHas)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function isWeakRef(t){if(!weakRefDeref||!t||typeof t!="object")return!1;try{return weakRefDeref.call(t),!0}catch{}return!1}function isSet(t){if(!setSize||!t||typeof t!="object")return!1;try{setSize.call(t);try{mapSize.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function isWeakSet(t){if(!weakSetHas||!t||typeof t!="object")return!1;try{weakSetHas.call(t,weakSetHas);try{weakMapHas.call(t,weakMapHas)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function isElement$2(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function inspectString(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return inspectString($slice.call(t,0,e.maxStringLength),e)+n}var s=$replace.call($replace.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(s,"single",e)}function lowbyte(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+$toUpperCase.call(e.toString(16))}function markBoxed(t){return"Object("+t+")"}function weakCollectionOf(t){return t+" { ? }"}function collectionOf(t,e,r,n){var s=n?indentedJoin(r,n):$join.call(r,", ");return t+" ("+e+") {"+s+"}"}function singleLineValues(t){for(var e=0;e<t.length;e++)if(indexOf$1(t[e],`
`)>=0)return!1;return!0}function getIndent(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=$join.call(Array(t.indent+1)," ");else return null;return{base:r,prev:$join.call(Array(e+1),r)}}function indentedJoin(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+$join.call(t,","+r)+`
`+e.prev}function arrObjKeys(t,e){var r=isArray$5(t),n=[];if(r){n.length=t.length;for(var s=0;s<t.length;s++)n[s]=has$4(t,s)?e(t[s],t):""}var a=typeof gOPS=="function"?gOPS(t):[],l;if(hasShammedSymbols){l={};for(var c=0;c<a.length;c++)l["$"+a[c]]=a[c]}for(var u in t)has$4(t,u)&&(r&&String(Number(u))===u&&u<t.length||hasShammedSymbols&&l["$"+u]instanceof Symbol||($test.call(/[^\w$]/,u)?n.push(e(u,t)+": "+e(t[u],t)):n.push(u+": "+e(t[u],t))));if(typeof gOPS=="function")for(var f=0;f<a.length;f++)isEnumerable.call(t,a[f])&&n.push("["+e(a[f])+"]: "+e(t[a[f]],t));return n}var GetIntrinsic=getIntrinsic,callBound=callBound$1,inspect=objectInspect,$TypeError=GetIntrinsic("%TypeError%"),$WeakMap=GetIntrinsic("%WeakMap%",!0),$Map=GetIntrinsic("%Map%",!0),$weakMapGet=callBound("WeakMap.prototype.get",!0),$weakMapSet=callBound("WeakMap.prototype.set",!0),$weakMapHas=callBound("WeakMap.prototype.has",!0),$mapGet=callBound("Map.prototype.get",!0),$mapSet=callBound("Map.prototype.set",!0),$mapHas=callBound("Map.prototype.has",!0),listGetNode=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},listGet=function(t,e){var r=listGetNode(t,e);return r&&r.value},listSet=function(t,e,r){var n=listGetNode(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},listHas=function(t,e){return!!listGetNode(t,e)},sideChannel=function(){var e,r,n,s={assert:function(a){if(!s.has(a))throw new $TypeError("Side channel does not contain "+inspect(a))},get:function(a){if($WeakMap&&a&&(typeof a=="object"||typeof a=="function")){if(e)return $weakMapGet(e,a)}else if($Map){if(r)return $mapGet(r,a)}else if(n)return listGet(n,a)},has:function(a){if($WeakMap&&a&&(typeof a=="object"||typeof a=="function")){if(e)return $weakMapHas(e,a)}else if($Map){if(r)return $mapHas(r,a)}else if(n)return listHas(n,a);return!1},set:function(a,l){$WeakMap&&a&&(typeof a=="object"||typeof a=="function")?(e||(e=new $WeakMap),$weakMapSet(e,a,l)):$Map?(r||(r=new $Map),$mapSet(r,a,l)):(n||(n={key:{},next:null}),listSet(n,a,l))}};return s},replace=String.prototype.replace,percentTwenties=/%20/g,Format={RFC1738:"RFC1738",RFC3986:"RFC3986"},formats$3={default:Format.RFC3986,formatters:{RFC1738:function(t){return replace.call(t,percentTwenties,"+")},RFC3986:function(t){return String(t)}},RFC1738:Format.RFC1738,RFC3986:Format.RFC3986},formats$2=formats$3,has$3=Object.prototype.hasOwnProperty,isArray$4=Array.isArray,hexTable=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),compactQueue=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(isArray$4(n)){for(var s=[],a=0;a<n.length;++a)typeof n[a]<"u"&&s.push(n[a]);r.obj[r.prop]=s}}},arrayToObject=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},s=0;s<e.length;++s)typeof e[s]<"u"&&(n[s]=e[s]);return n},merge=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if(isArray$4(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!has$3.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var s=e;return isArray$4(e)&&!isArray$4(r)&&(s=arrayToObject(e,n)),isArray$4(e)&&isArray$4(r)?(r.forEach(function(a,l){if(has$3.call(e,l)){var c=e[l];c&&typeof c=="object"&&a&&typeof a=="object"?e[l]=t(c,a,n):e.push(a)}else e[l]=a}),e):Object.keys(r).reduce(function(a,l){var c=r[l];return has$3.call(a,l)?a[l]=t(a[l],c,n):a[l]=c,a},s)},assign=function(e,r){return Object.keys(r).reduce(function(n,s){return n[s]=r[s],n},e)},decode=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},encode=function(e,r,n,s,a){if(e.length===0)return e;var l=e;if(typeof e=="symbol"?l=Symbol.prototype.toString.call(e):typeof e!="string"&&(l=String(e)),n==="iso-8859-1")return escape(l).replace(/%u[0-9a-f]{4}/gi,function(y){return"%26%23"+parseInt(y.slice(2),16)+"%3B"});for(var c="",u=0;u<l.length;++u){var f=l.charCodeAt(u);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||a===formats$2.RFC1738&&(f===40||f===41)){c+=l.charAt(u);continue}if(f<128){c=c+hexTable[f];continue}if(f<2048){c=c+(hexTable[192|f>>6]+hexTable[128|f&63]);continue}if(f<55296||f>=57344){c=c+(hexTable[224|f>>12]+hexTable[128|f>>6&63]+hexTable[128|f&63]);continue}u+=1,f=65536+((f&1023)<<10|l.charCodeAt(u)&1023),c+=hexTable[240|f>>18]+hexTable[128|f>>12&63]+hexTable[128|f>>6&63]+hexTable[128|f&63]}return c},compact=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],s=0;s<r.length;++s)for(var a=r[s],l=a.obj[a.prop],c=Object.keys(l),u=0;u<c.length;++u){var f=c[u],y=l[f];typeof y=="object"&&y!==null&&n.indexOf(y)===-1&&(r.push({obj:l,prop:f}),n.push(y))}return compactQueue(r),e},isRegExp=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},isBuffer=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},combine=function(e,r){return[].concat(e,r)},maybeMap=function(e,r){if(isArray$4(e)){for(var n=[],s=0;s<e.length;s+=1)n.push(r(e[s]));return n}return r(e)},utils$2={arrayToObject,assign,combine,compact,decode,encode,isBuffer,isRegExp,maybeMap,merge},getSideChannel=sideChannel,utils$1=utils$2,formats$1=formats$3,has$2=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},isArray$3=Array.isArray,push$1=Array.prototype.push,pushToArray=function(t,e){push$1.apply(t,isArray$3(e)?e:[e])},toISO=Date.prototype.toISOString,defaultFormat=formats$1.default,defaults$2={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:utils$1.encode,encodeValuesOnly:!1,format:defaultFormat,formatter:formats$1.formatters[defaultFormat],indices:!1,serializeDate:function(e){return toISO.call(e)},skipNulls:!1,strictNullHandling:!1},isNonNullishPrimitive=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},sentinel={},stringify$1=function t(e,r,n,s,a,l,c,u,f,y,b,g,v,S,T,N){for(var w=e,A=N,I=0,q=!1;(A=A.get(sentinel))!==void 0&&!q;){var V=A.get(e);if(I+=1,typeof V<"u"){if(V===I)throw new RangeError("Cyclic object value");q=!0}typeof A.get(sentinel)>"u"&&(I=0)}if(typeof u=="function"?w=u(r,w):w instanceof Date?w=b(w):n==="comma"&&isArray$3(w)&&(w=utils$1.maybeMap(w,function(le){return le instanceof Date?b(le):le})),w===null){if(a)return c&&!S?c(r,defaults$2.encoder,T,"key",g):r;w=""}if(isNonNullishPrimitive(w)||utils$1.isBuffer(w)){if(c){var K=S?r:c(r,defaults$2.encoder,T,"key",g);return[v(K)+"="+v(c(w,defaults$2.encoder,T,"value",g))]}return[v(r)+"="+v(String(w))]}var J=[];if(typeof w>"u")return J;var Q;if(n==="comma"&&isArray$3(w))S&&c&&(w=utils$1.maybeMap(w,c)),Q=[{value:w.length>0?w.join(",")||null:void 0}];else if(isArray$3(u))Q=u;else{var se=Object.keys(w);Q=f?se.sort(f):se}for(var ie=s&&isArray$3(w)&&w.length===1?r+"[]":r,me=0;me<Q.length;++me){var re=Q[me],ue=typeof re=="object"&&typeof re.value<"u"?re.value:w[re];if(!(l&&ue===null)){var oe=isArray$3(w)?typeof n=="function"?n(ie,re):ie:ie+(y?"."+re:"["+re+"]");N.set(e,I);var pe=getSideChannel();pe.set(sentinel,N),pushToArray(J,t(ue,oe,n,s,a,l,n==="comma"&&S&&isArray$3(w)?null:c,u,f,y,b,g,v,S,T,pe))}}return J},normalizeStringifyOptions=function(e){if(!e)return defaults$2;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||defaults$2.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=formats$1.default;if(typeof e.format<"u"){if(!has$2.call(formats$1.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var s=formats$1.formatters[n],a=defaults$2.filter;return(typeof e.filter=="function"||isArray$3(e.filter))&&(a=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:defaults$2.addQueryPrefix,allowDots:typeof e.allowDots>"u"?defaults$2.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:defaults$2.charsetSentinel,delimiter:typeof e.delimiter>"u"?defaults$2.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:defaults$2.encode,encoder:typeof e.encoder=="function"?e.encoder:defaults$2.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:defaults$2.encodeValuesOnly,filter:a,format:n,formatter:s,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:defaults$2.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:defaults$2.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:defaults$2.strictNullHandling}},stringify_1=function(t,e){var r=t,n=normalizeStringifyOptions(e),s,a;typeof n.filter=="function"?(a=n.filter,r=a("",r)):isArray$3(n.filter)&&(a=n.filter,s=a);var l=[];if(typeof r!="object"||r===null)return"";var c;e&&e.arrayFormat in arrayPrefixGenerators?c=e.arrayFormat:e&&"indices"in e?c=e.indices?"indices":"repeat":c="indices";var u=arrayPrefixGenerators[c];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var f=u==="comma"&&e&&e.commaRoundTrip;s||(s=Object.keys(r)),n.sort&&s.sort(n.sort);for(var y=getSideChannel(),b=0;b<s.length;++b){var g=s[b];n.skipNulls&&r[g]===null||pushToArray(l,stringify$1(r[g],g,u,f,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,y))}var v=l.join(n.delimiter),S=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?S+="utf8=%26%2310003%3B&":S+="utf8=%E2%9C%93&"),v.length>0?S+v:""},utils=utils$2,has$1=Object.prototype.hasOwnProperty,isArray$2=Array.isArray,defaults$1={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:utils.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},parseArrayValue=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},isoSentinel="utf8=%26%2310003%3B",charsetSentinel="utf8=%E2%9C%93",parseValues=function(e,r){var n={__proto__:null},s=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,a=r.parameterLimit===1/0?void 0:r.parameterLimit,l=s.split(r.delimiter,a),c=-1,u,f=r.charset;if(r.charsetSentinel)for(u=0;u<l.length;++u)l[u].indexOf("utf8=")===0&&(l[u]===charsetSentinel?f="utf-8":l[u]===isoSentinel&&(f="iso-8859-1"),c=u,u=l.length);for(u=0;u<l.length;++u)if(u!==c){var y=l[u],b=y.indexOf("]="),g=b===-1?y.indexOf("="):b+1,v,S;g===-1?(v=r.decoder(y,defaults$1.decoder,f,"key"),S=r.strictNullHandling?null:""):(v=r.decoder(y.slice(0,g),defaults$1.decoder,f,"key"),S=utils.maybeMap(parseArrayValue(y.slice(g+1),r),function(T){return r.decoder(T,defaults$1.decoder,f,"value")})),S&&r.interpretNumericEntities&&f==="iso-8859-1"&&(S=interpretNumericEntities(S)),y.indexOf("[]=")>-1&&(S=isArray$2(S)?[S]:S),has$1.call(n,v)?n[v]=utils.combine(n[v],S):n[v]=S}return n},parseObject=function(t,e,r,n){for(var s=n?e:parseArrayValue(e,r),a=t.length-1;a>=0;--a){var l,c=t[a];if(c==="[]"&&r.parseArrays)l=[].concat(s);else{l=r.plainObjects?Object.create(null):{};var u=c.charAt(0)==="["&&c.charAt(c.length-1)==="]"?c.slice(1,-1):c,f=parseInt(u,10);!r.parseArrays&&u===""?l={0:s}:!isNaN(f)&&c!==u&&String(f)===u&&f>=0&&r.parseArrays&&f<=r.arrayLimit?(l=[],l[f]=s):u!=="__proto__"&&(l[u]=s)}s=l}return s},parseKeys=function(e,r,n,s){if(e){var a=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,l=/(\[[^[\]]*])/,c=/(\[[^[\]]*])/g,u=n.depth>0&&l.exec(a),f=u?a.slice(0,u.index):a,y=[];if(f){if(!n.plainObjects&&has$1.call(Object.prototype,f)&&!n.allowPrototypes)return;y.push(f)}for(var b=0;n.depth>0&&(u=c.exec(a))!==null&&b<n.depth;){if(b+=1,!n.plainObjects&&has$1.call(Object.prototype,u[1].slice(1,-1))&&!n.allowPrototypes)return;y.push(u[1])}return u&&y.push("["+a.slice(u.index)+"]"),parseObject(y,r,n,s)}},normalizeParseOptions=function(e){if(!e)return defaults$1;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?defaults$1.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?defaults$1.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:defaults$1.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:defaults$1.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:defaults$1.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:defaults$1.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:defaults$1.comma,decoder:typeof e.decoder=="function"?e.decoder:defaults$1.decoder,delimiter:typeof e.delimiter=="string"||utils.isRegExp(e.delimiter)?e.delimiter:defaults$1.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:defaults$1.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:defaults$1.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:defaults$1.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:defaults$1.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:defaults$1.strictNullHandling}},parse$1=function(t,e){var r=normalizeParseOptions(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?parseValues(t,r):t,s=r.plainObjects?Object.create(null):{},a=Object.keys(n),l=0;l<a.length;++l){var c=a[l],u=parseKeys(c,n[c],r,typeof t=="string");s=utils.merge(s,u,r)}return r.allowSparse===!0?s:utils.compact(s)},stringify=stringify_1,parse=parse$1,formats=formats$3,lib={formats,parse,stringify};const qs=getDefaultExportFromCjs(lib);function normalizeComponent(t,e,r,n,s,a,l,c){var u=typeof t=="function"?t.options:t;e&&(u.render=e,u.staticRenderFns=r,u._compiled=!0),n&&(u.functional=!0),a&&(u._scopeId="data-v-"+a);var f;if(l?(f=function(g){g=g||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!g&&typeof __VUE_SSR_CONTEXT__<"u"&&(g=__VUE_SSR_CONTEXT__),s&&s.call(this,g),g&&g._registeredComponents&&g._registeredComponents.add(l)},u._ssrRegister=f):s&&(f=c?function(){s.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:s),f)if(u.functional){u._injectStyles=f;var y=u.render;u.render=function(v,S){return f.call(S),y(v,S)}}else{var b=u.beforeCreate;u.beforeCreate=b?[].concat(b,f):[f]}return{exports:t,options:u}}const _sfc_main$n={mixins:[Fieldtype],data(){return{}},inject:{storeName:{default:null}},computed:{componentName(){return this.config.mode==="table"?"relationship-table-mode":"relationship-input"},maxItems(){return this.config.max_items||1/0},columns(){return this.meta.columns},itemComponent(){return this.meta.itemComponent},itemDataUrl(){return this.meta.itemDataUrl+"?"+qs.stringify({config:this.configParameter})},filtersUrl(){return this.meta.filtersUrl+"?"+qs.stringify({config:this.configParameter})},selectionsUrl(){return this.baseSelectionsUrl+"?"+qs.stringify({config:this.configParameter,...this.meta.getBaseSelectionsUrlParameters})},baseSelectionsUrl(){return this.meta.baseSelectionsUrl},configParameter(){return utf8btoa(JSON.stringify(this.config))},site(){return this.storeName?this.$store.state.publish[this.storeName].site:this.$config.get("selectedSite")},canEdit(){return this.meta.canEdit},canCreate(){return this.meta.canCreate},canSearch(){return this.meta.canSearch},canReorder(){return this.maxItems>1&&this.config.reorderable===!0&&this.config.order_column!==void 0},statusIcons(){return this.meta.statusIcons},creatables(){return this.meta.creatables},formComponent(){return this.meta.formComponent},formComponentProps(){return this.meta.formComponentProps},taggable(){return this.meta.taggable},replicatorPreview(){return this.value.map(t=>{const e=_.findWhere(this.meta.data,{id:t});return e?e.title:t})}},methods:{itemDataUpdated(t){const e=clone(this.meta);e.data=t,this.updateMeta(e)},linkExistingItem(){this.$refs.input.$refs.existing.click()}}};var _sfc_render$n=function(){var e=this,r=e._self._c;return r(e.componentName,{ref:"input",tag:"component",attrs:{name:e.name,value:e.value,mode:e.config.mode,"can-edit":e.canEdit,config:e.config,"can-create":e.canCreate,"can-reorder":e.canReorder,site:e.site,data:e.meta?e.meta.data:[],"max-items":e.maxItems,"item-component":e.itemComponent,"item-data-url":e.itemDataUrl,"filters-url":e.filtersUrl,"selections-url":e.selectionsUrl,creatables:e.creatables,"form-component":e.formComponent,"form-component-props":e.formComponentProps,"status-icons":e.statusIcons,columns:e.columns,search:e.canSearch,"read-only":e.isReadOnly,taggable:e.taggable,"action-url":e.meta.actionUrl},on:{focus:function(n){return e.$emit("focus")},blur:function(n){return e.$emit("blur")},input:e.update,"item-data-updated":e.itemDataUpdated}})},_sfc_staticRenderFns$n=[],__component__$n=normalizeComponent(_sfc_main$n,_sfc_render$n,_sfc_staticRenderFns$n,!1,null,null,null,null);const RelationshipFieldtype=__component__$n.exports,_sfc_main$m={props:{component:String,componentProps:Object},data(){return{loading:!0,readOnly:!1,componentPropValues:{}}},computed:{publishContainer(){return`relate-fieldtype-inline-${this._uid}`}},created(){this.getItem()},methods:{getItem(){this.$axios.get(this.itemUrl).then(t=>{for(const e in this.componentProps){const r=data_get(t.data,this.componentProps[e]);this.$set(this.componentPropValues,e,r)}this.loading=!1}).catch(t=>{t.response.status===500&&(this.$toast.error(t.response.data.message),this.close()),t.response.status===403&&(this.$toast.error(__("This action is unauthorized.")),this.close())})},close(){this.$emit("closed")},confirmClose(){this.shouldClose()&&this.close()},shouldClose(){return!(this.$dirty.has(this.publishContainer)&&!confirm(__("Are you sure? Unsaved changes will be lost.")))}}};var _sfc_render$m=function(){var e=this,r=e._self._c;return r("div",[r("stack",{attrs:{name:"inline-editor","before-close":e.shouldClose},on:{closed:e.close}},[r("div",{staticClass:"h-full overflow-auto p-6 bg-gray-300"},[e.loading?r("div",{staticClass:"absolute inset-0 z-200 flex items-center justify-center text-center"},[r("loading-graphic")],1):e._e(),e.loading?e._e():r(e.component,e._b({tag:"component",staticClass:"max-w-3xl mx-auto",attrs:{method:e.method,"is-creating":e.creating,"is-inline":!0,"publish-container":e.publishContainer},on:{saved:e.saved}},"component",e.componentPropValues,!1),[r("template",{slot:"action-buttons-right"},[e._t("action-buttons-right"),r("button",{staticClass:"btn-close",attrs:{type:"button"},domProps:{innerHTML:e._s("&times")},on:{click:e.confirmClose}})],2)],2)],1)])],1)},_sfc_staticRenderFns$m=[],__component__$m=normalizeComponent(_sfc_main$m,_sfc_render$m,_sfc_staticRenderFns$m,!1,null,null,null,null);const InlinePublishForm=__component__$m.exports,_sfc_main$l={mixins:[InlinePublishForm],props:{item:Object},data(){return{creating:!1,method:"patch",action:"update",title:this.item.title,itemUrl:this.item.edit_url}},methods:{saved(t){this.$emit("updated",t.data.data)}}},_sfc_render$l=null,_sfc_staticRenderFns$l=null;var __component__$l=normalizeComponent(_sfc_main$l,_sfc_render$l,_sfc_staticRenderFns$l,!1,null,null,null,null);const InlineEditForm=__component__$l.exports,_sfc_main$k={components:{InlineEditForm},inject:["storeName"],props:{item:Object,config:Object,statusIcon:Boolean,editable:Boolean,sortable:Boolean,readOnly:Boolean,formComponent:String,formComponentProps:Object},data(){return{isEditing:!1}},methods:{edit(){this.editable&&(this.item.invalid||(this.isEditing=!0))},itemUpdated(t){this.item.title=t.title,this.item.published=t.published,this.item.private=t.private,this.item.status=t.status,this.$events.$emit(`live-preview.${this.storeName}.refresh`)}}};var _sfc_render$k=function(){var e=this,r=e._self._c;return r("div",{staticClass:"item select-none",class:{invalid:e.item.invalid}},[e.sortable?r("div",{staticClass:"item-move"},[e._v("Â ")]):e._e(),r("div",{staticClass:"item-inner"},[e.statusIcon?r("div",{staticClass:"little-dot mr-2 hidden@sm:block",class:e.item.status}):e._e(),e.item.invalid?r("div",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:e.__("An item with this ID could not be found"),expression:"__('An item with this ID could not be found')",modifiers:{top:!0}}],domProps:{textContent:e._s(e.item.title)}}):e._e(),!e.item.invalid&&e.editable?r("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.item.title,expression:"item.title"}],staticClass:"truncate",attrs:{href:e.item.edit_url},domProps:{textContent:e._s(e.item.title)},on:{click:function(n){return n.preventDefault(),e.edit.apply(null,arguments)}}}):e._e(),!e.item.invalid&&!e.editable?r("div",{domProps:{textContent:e._s(e.item.title)}}):e._e(),e.isEditing?r("inline-edit-form",{attrs:{item:e.item,component:e.formComponent,"component-props":e.formComponentProps},on:{updated:e.itemUpdated,closed:function(n){e.isEditing=!1}}}):e._e(),r("div",{staticClass:"flex items-center flex-1 justify-end"},[e.item.collection?r("div",{staticClass:"text-4xs text-gray-600 uppercase whitespace-nowrap mr-2 hidden @sm:block",domProps:{textContent:e._s(e.__(e.item.collection.title))}}):e._e(),e.readOnly?e._e():r("div",{staticClass:"flex items-center"},[r("dropdown-list",[e.editable?r("dropdown-item",{attrs:{text:e.__("Edit")},on:{click:e.edit}}):e._e(),r("dropdown-item",{staticClass:"warning",attrs:{text:e.__("Unlink")},on:{click:function(n){return e.$emit("removed")}}})],1)],1)])],1)])},_sfc_staticRenderFns$k=[],__component__$k=normalizeComponent(_sfc_main$k,_sfc_render$k,_sfc_staticRenderFns$k,!1,null,null,null,null);const RelatedItem=__component__$k.exports,HasFilters={data(){return{activeFilterBadges:{},activeFilters:{},activePreset:null,activePresetPayload:{},searchQuery:""}},computed:{activeFilterCount(){let t=Object.keys(this.activeFilters).length;return this.activeFilters.hasOwnProperty("fields")&&(t=t+Object.keys(this.activeFilters.fields).filter(e=>e!="badge").length-1),t},canSave(){return this.isDirty&&this.preferencesPrefix},isDirty(){return this.isFiltering?this.activePreset?this.activePresetPayload.query!=this.searchQuery||!_.isEqual(this.activePresetPayload.filters||{},this.activeFilters):!0:!1},isFiltering(){return!_.isEmpty(this.activeFilters)||this.searchQuery||this.activePreset},hasActiveFilters(){return this.activeFilterCount>0},searchPlaceholder(){return this.activePreset?__("Searching in: ")+this.activePresetPayload.display:__("Search")}},created(){this.$keys.bind("f",t=>{t.preventDefault(),this.handleShowFilters()})},methods:{searchChanged(t){this.searchQuery=t},hasFields(t){for(const e in t)if(t[e])return!0;return!1},filterChanged({handle:t,values:e},r=!0){e&&this.hasFields(e)?Vue.set(this.activeFilters,t,e):Vue.delete(this.activeFilters,t),r&&this.unselectAllItems()},filtersChanged(t){this.activeFilters={};for(const e in t){const r=t[e];this.filterChanged({handle:e,values:r},!1)}this.unselectAllItems()},filtersReset(){this.activePreset=null,this.activePresetPayload={},this.searchQuery="",this.activeFilters={},this.activeFilterBadges={}},unselectAllItems(){this.$refs.dataList&&this.$refs.dataList.clearSelections()},selectPreset(t,e){this.activePreset=t,this.activePresetPayload=e,this.searchQuery=e.query,this.filtersChanged(e.filters)},autoApplyFilters(t){if(!t)return;let e={};t.filter(r=>!_.isEmpty(r.auto_apply)).forEach(r=>{e[r.handle]=r.auto_apply}),this.activeFilters=e}}};var regeneratorRuntime$1={exports:{}},_typeof$1={exports:{}};(function(t){function e(r){"@babel/helpers - typeof";return t.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(_typeof$1);var _typeofExports=_typeof$1.exports;(function(t){var e=_typeofExports.default;function r(){t.exports=r=function(){return s},t.exports.__esModule=!0,t.exports.default=t.exports;var n,s={},a=Object.prototype,l=a.hasOwnProperty,c=Object.defineProperty||function(D,$,k){D[$]=k.value},u=typeof Symbol=="function"?Symbol:{},f=u.iterator||"@@iterator",y=u.asyncIterator||"@@asyncIterator",b=u.toStringTag||"@@toStringTag";function g(D,$,k){return Object.defineProperty(D,$,{value:k,enumerable:!0,configurable:!0,writable:!0}),D[$]}try{g({},"")}catch{g=function(k,B,W){return k[B]=W}}function v(D,$,k,B){var W=$&&$.prototype instanceof q?$:q,H=Object.create(W.prototype),ne=new _e(B||[]);return c(H,"_invoke",{value:ue(D,k,ne)}),H}function S(D,$,k){try{return{type:"normal",arg:D.call($,k)}}catch(B){return{type:"throw",arg:B}}}s.wrap=v;var T="suspendedStart",N="suspendedYield",w="executing",A="completed",I={};function q(){}function V(){}function K(){}var J={};g(J,f,function(){return this});var Q=Object.getPrototypeOf,se=Q&&Q(Q(we([])));se&&se!==a&&l.call(se,f)&&(J=se);var ie=K.prototype=q.prototype=Object.create(J);function me(D){["next","throw","return"].forEach(function($){g(D,$,function(k){return this._invoke($,k)})})}function re(D,$){function k(W,H,ne,de){var fe=S(D[W],D,H);if(fe.type!=="throw"){var $e=fe.arg,xe=$e.value;return xe&&e(xe)=="object"&&l.call(xe,"__await")?$.resolve(xe.__await).then(function(Ce){k("next",Ce,ne,de)},function(Ce){k("throw",Ce,ne,de)}):$.resolve(xe).then(function(Ce){$e.value=Ce,ne($e)},function(Ce){return k("throw",Ce,ne,de)})}de(fe.arg)}var B;c(this,"_invoke",{value:function(H,ne){function de(){return new $(function(fe,$e){k(H,ne,fe,$e)})}return B=B?B.then(de,de):de()}})}function ue(D,$,k){var B=T;return function(W,H){if(B===w)throw new Error("Generator is already running");if(B===A){if(W==="throw")throw H;return{value:n,done:!0}}for(k.method=W,k.arg=H;;){var ne=k.delegate;if(ne){var de=oe(ne,k);if(de){if(de===I)continue;return de}}if(k.method==="next")k.sent=k._sent=k.arg;else if(k.method==="throw"){if(B===T)throw B=A,k.arg;k.dispatchException(k.arg)}else k.method==="return"&&k.abrupt("return",k.arg);B=w;var fe=S(D,$,k);if(fe.type==="normal"){if(B=k.done?A:N,fe.arg===I)continue;return{value:fe.arg,done:k.done}}fe.type==="throw"&&(B=A,k.method="throw",k.arg=fe.arg)}}}function oe(D,$){var k=$.method,B=D.iterator[k];if(B===n)return $.delegate=null,k==="throw"&&D.iterator.return&&($.method="return",$.arg=n,oe(D,$),$.method==="throw")||k!=="return"&&($.method="throw",$.arg=new TypeError("The iterator does not provide a '"+k+"' method")),I;var W=S(B,D.iterator,$.arg);if(W.type==="throw")return $.method="throw",$.arg=W.arg,$.delegate=null,I;var H=W.arg;return H?H.done?($[D.resultName]=H.value,$.next=D.nextLoc,$.method!=="return"&&($.method="next",$.arg=n),$.delegate=null,I):H:($.method="throw",$.arg=new TypeError("iterator result is not an object"),$.delegate=null,I)}function pe(D){var $={tryLoc:D[0]};1 in D&&($.catchLoc=D[1]),2 in D&&($.finallyLoc=D[2],$.afterLoc=D[3]),this.tryEntries.push($)}function le(D){var $=D.completion||{};$.type="normal",delete $.arg,D.completion=$}function _e(D){this.tryEntries=[{tryLoc:"root"}],D.forEach(pe,this),this.reset(!0)}function we(D){if(D||D===""){var $=D[f];if($)return $.call(D);if(typeof D.next=="function")return D;if(!isNaN(D.length)){var k=-1,B=function W(){for(;++k<D.length;)if(l.call(D,k))return W.value=D[k],W.done=!1,W;return W.value=n,W.done=!0,W};return B.next=B}}throw new TypeError(e(D)+" is not iterable")}return V.prototype=K,c(ie,"constructor",{value:K,configurable:!0}),c(K,"constructor",{value:V,configurable:!0}),V.displayName=g(K,b,"GeneratorFunction"),s.isGeneratorFunction=function(D){var $=typeof D=="function"&&D.constructor;return!!$&&($===V||($.displayName||$.name)==="GeneratorFunction")},s.mark=function(D){return Object.setPrototypeOf?Object.setPrototypeOf(D,K):(D.__proto__=K,g(D,b,"GeneratorFunction")),D.prototype=Object.create(ie),D},s.awrap=function(D){return{__await:D}},me(re.prototype),g(re.prototype,y,function(){return this}),s.AsyncIterator=re,s.async=function(D,$,k,B,W){W===void 0&&(W=Promise);var H=new re(v(D,$,k,B),W);return s.isGeneratorFunction($)?H:H.next().then(function(ne){return ne.done?ne.value:H.next()})},me(ie),g(ie,b,"Generator"),g(ie,f,function(){return this}),g(ie,"toString",function(){return"[object Generator]"}),s.keys=function(D){var $=Object(D),k=[];for(var B in $)k.push(B);return k.reverse(),function W(){for(;k.length;){var H=k.pop();if(H in $)return W.value=H,W.done=!1,W}return W.done=!0,W}},s.values=we,_e.prototype={constructor:_e,reset:function($){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(le),!$)for(var k in this)k.charAt(0)==="t"&&l.call(this,k)&&!isNaN(+k.slice(1))&&(this[k]=n)},stop:function(){this.done=!0;var $=this.tryEntries[0].completion;if($.type==="throw")throw $.arg;return this.rval},dispatchException:function($){if(this.done)throw $;var k=this;function B($e,xe){return ne.type="throw",ne.arg=$,k.next=$e,xe&&(k.method="next",k.arg=n),!!xe}for(var W=this.tryEntries.length-1;W>=0;--W){var H=this.tryEntries[W],ne=H.completion;if(H.tryLoc==="root")return B("end");if(H.tryLoc<=this.prev){var de=l.call(H,"catchLoc"),fe=l.call(H,"finallyLoc");if(de&&fe){if(this.prev<H.catchLoc)return B(H.catchLoc,!0);if(this.prev<H.finallyLoc)return B(H.finallyLoc)}else if(de){if(this.prev<H.catchLoc)return B(H.catchLoc,!0)}else{if(!fe)throw new Error("try statement without catch or finally");if(this.prev<H.finallyLoc)return B(H.finallyLoc)}}}},abrupt:function($,k){for(var B=this.tryEntries.length-1;B>=0;--B){var W=this.tryEntries[B];if(W.tryLoc<=this.prev&&l.call(W,"finallyLoc")&&this.prev<W.finallyLoc){var H=W;break}}H&&($==="break"||$==="continue")&&H.tryLoc<=k&&k<=H.finallyLoc&&(H=null);var ne=H?H.completion:{};return ne.type=$,ne.arg=k,H?(this.method="next",this.next=H.finallyLoc,I):this.complete(ne)},complete:function($,k){if($.type==="throw")throw $.arg;return $.type==="break"||$.type==="continue"?this.next=$.arg:$.type==="return"?(this.rval=this.arg=$.arg,this.method="return",this.next="end"):$.type==="normal"&&k&&(this.next=k),I},finish:function($){for(var k=this.tryEntries.length-1;k>=0;--k){var B=this.tryEntries[k];if(B.finallyLoc===$)return this.complete(B.completion,B.afterLoc),le(B),I}},catch:function($){for(var k=this.tryEntries.length-1;k>=0;--k){var B=this.tryEntries[k];if(B.tryLoc===$){var W=B.completion;if(W.type==="throw"){var H=W.arg;le(B)}return H}}throw new Error("illegal catch attempt")},delegateYield:function($,k,B){return this.delegate={iterator:we($),resultName:k,nextLoc:B},this.method==="next"&&(this.arg=n),I}},s}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(regeneratorRuntime$1);var regeneratorRuntimeExports=regeneratorRuntime$1.exports,runtime=regeneratorRuntimeExports();try{regeneratorRuntime=runtime}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=runtime:Function("r","regeneratorRuntime = r")(runtime)}/*!
 * helper-js v1.4.38
 * (c) phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: undefined
 * Released under the MIT License.
 */function isArray$1(t){return Object.prototype.toString.call(t)==="[object Array]"}function arrayRemove(t,e){for(var r,n=0;(r=t.indexOf(e))>-1;)t.splice(r,1),n++;return n}/*!
* tree-helper v1.4.14
* (c) phphe <phphe@outlook.com> (https://github.com/phphe)
* Released under the MIT License.
*/function _typeof(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(e){return typeof e}:_typeof=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function _iterableToArray(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function breadthFirstSearch(t,e){var r=arguments.length>3?arguments[3]:void 0,n=isArray$1(t)?t:[t],s=n.map(function(c,u){return{item:c,index:u}});r&&s.reverse();for(var a=function(){var u=s.shift(),f=u.item,y=u.index,b=u.parent,g=e(f,y,b);if(g===!1)return{v:void 0};if(g==="skip children")return"continue";if(g==="skip siblings"&&(s=s.filter(function(N){return N.parent!==b})),f.children){var v,S=f.children;r&&(S=S.slice(),S.reverse());var T=S.map(function(N,w){return{item:N,index:w,parent:f}});(v=s).push.apply(v,_toConsumableArray(T))}};s.length;){var l=a();switch(l){case"continue":continue;default:if(_typeof(l)==="object")return l.v}}}function _changeParent(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"children",n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"parent";t[n]&&arrayRemove(t[n][r],t),t[n]=e}function insertBefore(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"children",n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"parent";if(t!==e){var s=e[n][r],a=s.indexOf(e);s[a-1]!==t&&(t[n]===e[n]?(arrayRemove(s,t),a=s.indexOf(e)):_changeParent(t,e[n]),s.splice(a,0,t))}}var vueDraggableNestedTree={exports:{}};/*!
 * vue-draggable-nested-tree v3.0.0-beta
 * (c) phphe <phphe@outlook.com> (https://github.com/phphe)
 * Released under the MIT License.
 */(function(t,e){(function(r,n){n(e)})(commonjsGlobal,function(r){function n(d,o){return o={exports:{}},d(o,o.exports),o.exports}var s=n(function(d){function o(p){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?d.exports=o=function(x){return typeof x}:d.exports=o=function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},o(p)}d.exports=o}),a=n(function(d){function o(p){return d.exports=o=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)},o(p)}d.exports=o});function l(d,o){for(;!Object.prototype.hasOwnProperty.call(d,o)&&(d=a(d),d!==null););return d}var c=l;n(function(d){function o(p,m,x){return typeof Reflect<"u"&&Reflect.get?d.exports=o=Reflect.get:d.exports=o=function(C,P,R){var z=c(C,P);if(z){var M=Object.getOwnPropertyDescriptor(z,P);return M.get?M.get.call(R):M.value}},o(p,m,x||p)}d.exports=o}),n(function(d){function o(p,m){return d.exports=o=Object.setPrototypeOf||function(h,C){return h.__proto__=C,h},o(p,m)}d.exports=o});function u(d,o){for(var p=0;p<o.length;p++){var m=o[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}function f(d,o,p){return o&&u(d.prototype,o),p&&u(d,p),d}var y=f;function b(d,o){if(!(d instanceof o))throw new TypeError("Cannot call a class as a function")}var g=b;n(function(d){var o=function(p){var m=Object.prototype,x=m.hasOwnProperty,h,C=typeof Symbol=="function"?Symbol:{},P=C.iterator||"@@iterator",R=C.asyncIterator||"@@asyncIterator",z=C.toStringTag||"@@toStringTag";function M(O,E,F,X){var U=E&&E.prototype instanceof ae?E:ae,ce=Object.create(U.prototype),he=new et(X||[]);return ce._invoke=jt(O,F,he),ce}p.wrap=M;function L(O,E,F){try{return{type:"normal",arg:O.call(E,F)}}catch(X){return{type:"throw",arg:X}}}var j="suspendedStart",Y="suspendedYield",Z="executing",te="completed",ee={};function ae(){}function ve(){}function Pe(){}var Ee={};Ee[P]=function(){return this};var Je=Object.getPrototypeOf,qe=Je&&Je(Je(tt([])));qe&&qe!==m&&x.call(qe,P)&&(Ee=qe);var Te=Pe.prototype=ae.prototype=Object.create(Ee);ve.prototype=Te.constructor=Pe,Pe.constructor=ve,Pe[z]=ve.displayName="GeneratorFunction";function ct(O){["next","throw","return"].forEach(function(E){O[E]=function(F){return this._invoke(E,F)}})}p.isGeneratorFunction=function(O){var E=typeof O=="function"&&O.constructor;return E?E===ve||(E.displayName||E.name)==="GeneratorFunction":!1},p.mark=function(O){return Object.setPrototypeOf?Object.setPrototypeOf(O,Pe):(O.__proto__=Pe,z in O||(O[z]="GeneratorFunction")),O.prototype=Object.create(Te),O},p.awrap=function(O){return{__await:O}};function He(O){function E(U,ce,he,ye){var Se=L(O[U],O,ce);if(Se.type==="throw")ye(Se.arg);else{var be=Se.arg,Ie=be.value;return Ie&&typeof Ie=="object"&&x.call(Ie,"__await")?Promise.resolve(Ie.__await).then(function(Oe){E("next",Oe,he,ye)},function(Oe){E("throw",Oe,he,ye)}):Promise.resolve(Ie).then(function(Oe){be.value=Oe,he(be)},function(Oe){return E("throw",Oe,he,ye)})}}var F;function X(U,ce){function he(){return new Promise(function(ye,Se){E(U,ce,ye,Se)})}return F=F?F.then(he,he):he()}this._invoke=X}ct(He.prototype),He.prototype[R]=function(){return this},p.AsyncIterator=He,p.async=function(O,E,F,X){var U=new He(M(O,E,F,X));return p.isGeneratorFunction(E)?U:U.next().then(function(ce){return ce.done?ce.value:U.next()})};function jt(O,E,F){var X=j;return function(ce,he){if(X===Z)throw new Error("Generator is already running");if(X===te){if(ce==="throw")throw he;return dt()}for(F.method=ce,F.arg=he;;){var ye=F.delegate;if(ye){var Se=ut(ye,F);if(Se){if(Se===ee)continue;return Se}}if(F.method==="next")F.sent=F._sent=F.arg;else if(F.method==="throw"){if(X===j)throw X=te,F.arg;F.dispatchException(F.arg)}else F.method==="return"&&F.abrupt("return",F.arg);X=Z;var be=L(O,E,F);if(be.type==="normal"){if(X=F.done?te:Y,be.arg===ee)continue;return{value:be.arg,done:F.done}}else be.type==="throw"&&(X=te,F.method="throw",F.arg=be.arg)}}}function ut(O,E){var F=O.iterator[E.method];if(F===h){if(E.delegate=null,E.method==="throw"){if(O.iterator.return&&(E.method="return",E.arg=h,ut(O,E),E.method==="throw"))return ee;E.method="throw",E.arg=new TypeError("The iterator does not provide a 'throw' method")}return ee}var X=L(F,O.iterator,E.arg);if(X.type==="throw")return E.method="throw",E.arg=X.arg,E.delegate=null,ee;var U=X.arg;if(!U)return E.method="throw",E.arg=new TypeError("iterator result is not an object"),E.delegate=null,ee;if(U.done)E[O.resultName]=U.value,E.next=O.nextLoc,E.method!=="return"&&(E.method="next",E.arg=h);else return U;return E.delegate=null,ee}ct(Te),Te[z]="Generator",Te[P]=function(){return this},Te.toString=function(){return"[object Generator]"};function qt(O){var E={tryLoc:O[0]};1 in O&&(E.catchLoc=O[1]),2 in O&&(E.finallyLoc=O[2],E.afterLoc=O[3]),this.tryEntries.push(E)}function Ze(O){var E=O.completion||{};E.type="normal",delete E.arg,O.completion=E}function et(O){this.tryEntries=[{tryLoc:"root"}],O.forEach(qt,this),this.reset(!0)}p.keys=function(O){var E=[];for(var F in O)E.push(F);return E.reverse(),function X(){for(;E.length;){var U=E.pop();if(U in O)return X.value=U,X.done=!1,X}return X.done=!0,X}};function tt(O){if(O){var E=O[P];if(E)return E.call(O);if(typeof O.next=="function")return O;if(!isNaN(O.length)){var F=-1,X=function U(){for(;++F<O.length;)if(x.call(O,F))return U.value=O[F],U.done=!1,U;return U.value=h,U.done=!0,U};return X.next=X}}return{next:dt}}p.values=tt;function dt(){return{value:h,done:!0}}return et.prototype={constructor:et,reset:function(O){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(Ze),!O)for(var E in this)E.charAt(0)==="t"&&x.call(this,E)&&!isNaN(+E.slice(1))&&(this[E]=h)},stop:function(){this.done=!0;var O=this.tryEntries[0],E=O.completion;if(E.type==="throw")throw E.arg;return this.rval},dispatchException:function(O){if(this.done)throw O;var E=this;function F(Se,be){return ce.type="throw",ce.arg=O,E.next=Se,be&&(E.method="next",E.arg=h),!!be}for(var X=this.tryEntries.length-1;X>=0;--X){var U=this.tryEntries[X],ce=U.completion;if(U.tryLoc==="root")return F("end");if(U.tryLoc<=this.prev){var he=x.call(U,"catchLoc"),ye=x.call(U,"finallyLoc");if(he&&ye){if(this.prev<U.catchLoc)return F(U.catchLoc,!0);if(this.prev<U.finallyLoc)return F(U.finallyLoc)}else if(he){if(this.prev<U.catchLoc)return F(U.catchLoc,!0)}else if(ye){if(this.prev<U.finallyLoc)return F(U.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(O,E){for(var F=this.tryEntries.length-1;F>=0;--F){var X=this.tryEntries[F];if(X.tryLoc<=this.prev&&x.call(X,"finallyLoc")&&this.prev<X.finallyLoc){var U=X;break}}U&&(O==="break"||O==="continue")&&U.tryLoc<=E&&E<=U.finallyLoc&&(U=null);var ce=U?U.completion:{};return ce.type=O,ce.arg=E,U?(this.method="next",this.next=U.finallyLoc,ee):this.complete(ce)},complete:function(O,E){if(O.type==="throw")throw O.arg;return O.type==="break"||O.type==="continue"?this.next=O.arg:O.type==="return"?(this.rval=this.arg=O.arg,this.method="return",this.next="end"):O.type==="normal"&&E&&(this.next=E),ee},finish:function(O){for(var E=this.tryEntries.length-1;E>=0;--E){var F=this.tryEntries[E];if(F.finallyLoc===O)return this.complete(F.completion,F.afterLoc),Ze(F),ee}},catch:function(O){for(var E=this.tryEntries.length-1;E>=0;--E){var F=this.tryEntries[E];if(F.tryLoc===O){var X=F.completion;if(X.type==="throw"){var U=X.arg;Ze(F)}return U}}throw new Error("illegal catch attempt")},delegateYield:function(O,E,F){return this.delegate={iterator:tt(O),resultName:E,nextLoc:F},this.method==="next"&&(this.arg=h),ee}},p}(d.exports);try{regeneratorRuntime=o}catch{Function("r","regeneratorRuntime = r")(o)}});function v(d,o,p){return o in d?Object.defineProperty(d,o,{value:p,enumerable:!0,configurable:!0,writable:!0}):d[o]=p,d}var S=v;function T(d){return Object.prototype.toString.call(d)==="[object Array]"}function N(d,o){return arguments.length===1&&(o=d,d=0),Math.floor(Math.random()*(o-d+1)+d)}function w(){for(var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:8,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",p="",m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",x=0;x<d;x++)p+=m[N(m.length-1)];return o+p}function A(d,o){for(var p,m=0;(p=d.indexOf(o))>-1;)d.splice(p,1),m++;return m}function I(){if(typeof pageYOffset<"u")return{top:pageYOffset,left:pageXOffset};var d=document.body,o=document.documentElement;return o=o.clientHeight?o:d,{top:o.scrollTop,left:o.scrollLeft}}function q(d){var o=J(d),p=I();return{x:o.left+p.left,y:o.top+p.top}}function V(d){var o=d.offsetParent;return(!o||o===document.body&&getComputedStyle(document.body).position==="static")&&(o=document.body.parentElement),o}function K(d){for(var o=V(d),p={x:d.offsetLeft,y:d.offsetTop},m=d;m=m.parentElement,!(m===o||!m);)p.x-=m.scrollLeft,p.y-=m.scrollTop;return p}function J(d){var o=d.getBoundingClientRect(),p=o.top-document.documentElement.clientTop,m=o.bottom,x=o.left-document.documentElement.clientLeft,h=o.right,C=o.width||h-x,P=o.height||m-p,R=x,z=p;return{top:p,right:h,bottom:m,left:x,width:C,height:P,x:R,y:z}}function Q(d,o){var p="original_".concat(o);d[p]=d.getAttribute(o)}function se(d,o){var p="original_".concat(o);d.setAttribute(o,d[p])}function ie(d,o){return d.classList?d.classList.contains(o):new RegExp("(^| )"+o+"( |$)","gi").test(d.className)}function me(d,o){ie(d,o)||(d.classList?d.classList.add(o):d.className+=" "+o)}function re(d){Q(d,"style"),d.style.display="block";var o=J(d),p={width:o.width,height:o.height};return se(d,"style"),p}function ue(d,o,p){for(var m=arguments.length,x=new Array(m>3?m-3:0),h=3;h<m;h++)x[h-3]=arguments[h];d.addEventListener?d.addEventListener.apply(d,[o,p].concat(x)):d.attachEvent&&d.attachEvent.apply(d,["on".concat(o),p].concat(x))}function oe(d,o,p){for(var m=arguments.length,x=new Array(m>3?m-3:0),h=3;h<m;h++)x[h-3]=arguments[h];d.removeEventListener?d.removeEventListener.apply(d,[o,p].concat(x)):d.detachEvent&&d.detachEvent.apply(d,["on".concat(o),p].concat(x))}function pe(d,o,p,m,x){var h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1e3,C,P;p==null&&(p=0,m=d.length-1);for(var R=0,z;p>=0&&p<=m;){if(R>=h)throw Error("binarySearch: loop times is over ".concat(h,", you can increase the limit."));if(C=Math.floor((m-p)/2+p),P=d[C],z=o(P,R),z>0)m=C-1;else if(z<0)p=C+1;else return{index:C,value:P,count:R+1,hit:!0};R++}return x?{index:C,value:P,count:R+1,hit:!1,bigger:z>0}:null}var le=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(d){return s(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":s(d)};function _e(d){if(Array.isArray(d)){for(var o=0,p=Array(d.length);o<d.length;o++)p[o]=d[o];return p}else return Array.from(d)}function we(d,o){var p=arguments[3],m=T(d)?d:[d],x=m.map(function(P,R){return{item:P,index:R}});p&&x.reverse();for(var h=function(){var R=x.shift(),z=R.item,M=R.index,L=R.parent,j=o(z,M,L);if(j===!1)return{v:void 0};if(j==="skip children")return"continue";if(j==="skip siblings"&&(x=x.filter(function(ee){return ee.parent!==L})),z.children){var Y,Z=z.children;p&&(Z=Z.slice(),Z.reverse());var te=Z.map(function(ee,ae){return{item:ee,index:ae,parent:z}});(Y=x).push.apply(Y,_e(te))}};x.length;){var C=h();switch(C){case"continue":continue;default:if((typeof C>"u"?"undefined":le(C))==="object")return C.v}}}function D(d,o){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"children",m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"parent";d[m]&&A(d[m][p],d),d[m]=o}function $(d,o){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"children",m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"parent";if(d!==o){var x=o[m][p],h=x.indexOf(o);x[h-1]!==d&&(d[m]===o[m]?(A(x,d),h=x.indexOf(o)):D(d,o[m]),x.splice(h,0,d))}}function k(d,o){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"children",m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"parent";if(d!==o){var x=o[m],h=x[p],C=h.indexOf(o);h[C+1]!==d&&(d[m]===o[m]?(A(h,d),C=h.indexOf(o)):D(d,o[m]),h.splice(C+1,0,d))}}function B(d,o){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"children";if(d===o)throw"can't prepend to self";var m=o[p];m[0]!==d&&(D(d,o),m.splice(0,0,d))}function W(d,o){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"children";if(d===o)throw"can't append to self";var m=o[p],x=m[m.length-1];x!==d&&(D(d,o),m.push(d))}var H={name:"TreeNode",props:{data:{},store:{},level:{default:0}},data:function(){return{vm:this}},computed:{childrenLevel:function(){return this.level+1},isRoot:function(){return this.data&&this.data.isRoot},childrenVisible:function(){var o=this.data;return this.isRoot||o&&o.children&&o.children.length&&o.open},innerBackStyle:function(){var o={marginBottom:this.store.space+"px"};return!this.isRoot&&this.level>1&&(o.paddingLeft=(this.level-1)*this.store.indent+"px"),o}},watch:{data:{immediate:!0,handler:function(o){o&&(o._vm=this,!o._treeNodePropertiesCompleted&&!o.isRoot&&this.store.compeleteNode(o,this.$parent.data))}}}};function ne(d,o,p,m,x,h,C,P,R,z){typeof C!="boolean"&&(R=P,P=C,C=!1);var M=typeof p=="function"?p.options:p;d&&d.render&&(M.render=d.render,M.staticRenderFns=d.staticRenderFns,M._compiled=!0,x&&(M.functional=!0)),m&&(M._scopeId=m);var L;if(h?(L=function(te){te=te||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!te&&typeof __VUE_SSR_CONTEXT__<"u"&&(te=__VUE_SSR_CONTEXT__),o&&o.call(this,R(te)),te&&te._registeredComponents&&te._registeredComponents.add(h)},M._ssrRegister=L):o&&(L=C?function(Z){o.call(this,z(Z,this.$root.$options.shadowRoot))}:function(Z){o.call(this,P(Z))}),L)if(M.functional){var j=M.render;M.render=function(te,ee){return L.call(ee),j(te,ee)}}else{var Y=M.beforeCreate;M.beforeCreate=Y?[].concat(Y,L):[L]}return p}var de=H,fe=function(){var o=this,p=o.$createElement,m=o._self._c||p;return m("div",{staticClass:"tree-node",class:[o.data.active?o.store.activatedClass:"",o.data.open?o.store.openedClass:"",o.data.class],style:o.data.style,attrs:{id:o.data._id}},[o.isRoot?o._e():o._t("node-inner-back",[m("div",{staticClass:"tree-node-inner-back",class:[o.data.innerBackClass],style:[o.innerBackStyle,o.data.innerBackStyle]},[m("div",{staticClass:"tree-node-inner",class:[o.data.innerClass],style:[o.data.innerStyle]},[o._t("default",null,{data:o.data,store:o.store,vm:o.vm})],2)])],{styleObj:o.innerBackStyle,data:o.data,store:o.store,vm:o.vm}),m("transition",{attrs:{name:o.store.childrenTransitionName}},[o.childrenVisible?m("div",{staticClass:"tree-node-children"},o._l(o.data.children,function(x){return m("TreeNode",{key:x._id,attrs:{data:x,store:o.store,level:o.childrenLevel},scopedSlots:o._u([{key:"default",fn:function(C){return[o._t("default",null,{data:C.data,store:C.store,vm:C.vm})]}},{key:"node-inner-back",fn:function(C){return o.store.customInnerBack?[o._t("node-inner-back",null,{styleObj:C.styleObj,data:C.data,store:C.store,vm:C.vm})]:void 0}}],null,!0)})}),1):o._e()])],2)},$e=[];fe._withStripped=!0;var xe=void 0,Ce=void 0,ht=void 0,pt=!1,Ye=ne({render:fe,staticRenderFns:$e},xe,de,Ce,pt,ht,!1,void 0,void 0,void 0),gt={props:{data:{},idLength:{type:Number,default:5},indent:{type:Number,default:16},activatedClass:{default:"active"},openedClass:{default:"open"},space:{type:Number,default:10},childrenTransitionName:{},customInnerBack:{}},components:{TreeNode:Ye},data:function(){return{store:this,rootData:null}},watch:{data:{immediate:!0,handler:function(o,p){var m=this;o!==p&&(this.rootData=this.rootData||{isRoot:!0,_id:"tree_".concat(this._uid,"_node_root"),children:[]},we(o,function(x,h,C){m.compeleteNode(x,C)}),this.rootData.children=o)}}},methods:{compeleteNode:function(o,p){var m={open:!0,children:[],active:!1,style:{},class:"",innerStyle:{},innerClass:"",innerBackStyle:{},innerBackClass:{}};for(var x in m)o.hasOwnProperty(x)||this.$set(o,x,m[x]);this.$set(o,"parent",p||this.rootData),o.hasOwnProperty("_id")||(o._id="tree_".concat(this._uid,"_node_").concat(w(this.idLength))),o._treeNodePropertiesCompleted=!0},pure:function(o,p,m){var x=this,h=Object.assign({},o);delete h._id,delete h.parent,delete h.children,delete h.open,delete h.active,delete h.style,delete h.class,delete h.innerStyle,delete h.innerClass,delete h.innerBackStyle,delete h.innerBackClass;for(var C=0,P=Object.keys(h);C<P.length;C++){var R=P[C];R[0]==="_"&&delete h[R]}return p&&o.children&&(h.children=o.children.slice(),h.children.forEach(function(z,M){h.children[M]=x.pure(z,p)})),m&&m(h,o)||h},getNodeById:function(o){var p;return we(this.rootData.children,function(m){if(m._id===o)return p=m,!1}),p},getActivated:function(){var o=[];return we(this.rootData.children,function(p){p.active&&o.push(p)}),o},getOpened:function(){var o=[];return we(this.rootData.children,function(p){p.open&&o.push(p)}),o},activeNode:function(o,p){this.activated,p&&this.getActivated().forEach(function(m){m.active=!1}),o.active=!0},toggleActive:function(o,p){o.active?o.active=!1:this.activeNode(o,p)},openNode:function(o,p){var m=this;this.opened,p&&this.getOpened().forEach(function(x){x.open=!1,m.$emit("nodeOpenChanged",x)}),o.open=!0,this.$emit("nodeOpenChanged",o)},toggleOpen:function(o,p){o.open?(o.open=!1,this.$emit("nodeOpenChanged",o)):this.openNode(o,p)},getPureData:function(o){return this.pure(this.rootData,!0,o).children},deleteNode:function(o){return A(o.parent.children,o)}}},mt=gt,it=function(){var o=this,p=o.$createElement,m=o._self._c||p;return m("div",{staticClass:"he-tree tree"},[m("TreeNode",{attrs:{data:o.rootData,store:o.store},scopedSlots:o._u([{key:"default",fn:function(h){return[o._t("default",null,{data:h.data,store:o.store,vm:h.vm})]}},{key:"node-inner-back",fn:function(h){return o.customInnerBack?[o._t("node-inner-back",null,{styleObj:h.styleObj,data:h.data,store:h.store,vm:h.vm})]:void 0}}],null,!0)})],1)},vt=[];it._withStripped=!0;var yt=void 0,bt=void 0,_t=void 0,St=!1,st=ne({render:it,staticRenderFns:vt},yt,mt,bt,St,_t,!1,void 0,void 0,void 0);/*!
 * drag-event-service v0.0.6
 * (c) 2018-present phphe <phphe@outlook.com> (https://github.com/phphe)
 * Released under the MIT License.
 */var Le={start:["mousedown","touchstart"],move:["mousemove","touchmove"],end:["mouseup","touchend"]},Ae={isTouch:function(o){return o.type&&o.type.startsWith("touch")},_getStore:function(o){return o._wrapperStore||(o._wrapperStore=[]),o._wrapperStore},on:function(o,p,m){var x,h,C=this._getStore(o),P=this,R=function(Y){var Z,te=P.isTouch(Y);if(te)Z={x:Y.changedTouches[0].pageX,y:Y.changedTouches[0].pageY};else if(Z={x:Y.pageX,y:Y.pageY},p==="start"&&Y.which!==1)return;return m.call(this,Y,Z)};C.push({handler:m,wrapper:R});for(var z=arguments.length,M=new Array(z>3?z-3:0),L=3;L<z;L++)M[L-3]=arguments[L];(x=ue).call.apply(x,[null,o,Le[p][0],R].concat(M)),(h=ue).call.apply(h,[null,o,Le[p][1],R].concat(M))},off:function(o,p,m){for(var x=this._getStore(o),h=arguments.length,C=new Array(h>3?h-3:0),P=3;P<h;P++)C[P-3]=arguments[P];for(var R=x.length-1;R>=0;R--){var z=x[R],M=z.handler,L=z.wrapper;if(m===M){var j,Y;(j=oe).call.apply(j,[null,o,Le[p][0],L].concat(C)),(Y=oe).call.apply(Y,[null,o,Le[p][1],L].concat(C)),x.splice(R,1)}}}};/*!
 * draggable-helper v1.0.20
 * (c) 2018-present phphe <phphe@outlook.com> (https://github.com/phphe)
 * Released under the MIT License.
 */function wt(d){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.minTranslate==null&&(o.minTranslate=10);var p=z(),m=function(){Ae.off(d,"end",d._draggbleEventHandler),oe(d,"selectstart",M),delete d._draggbleEventHandler};return d._draggbleEventHandler&&m(),d._draggbleEventHandler=x,Ae.on(d,"start",d._draggbleEventHandler),ue(d,"selectstart",M),m;function x(L,j){p.mouse={x:j.x,y:j.y},p.initialMouse=Object.assign({},p.mouse),Ae.on(document,"move",C,{passive:!1}),Ae.on(window,"end",P)}function h(L){var j=R(),Y=j.el,Z=j.position;p.el=Y,p.initialPosition=Object.assign({},Z);var te=o.drag&&o.drag(L,o,p);if(te===!1)return!1;var ee=re(Y),ae=Object.assign({width:"".concat(ee.width,"px"),height:"".concat(ee.height,"px"),zIndex:9999,opacity:.6,position:"absolute",left:Z.x+"px",top:Z.y+"px"},o.style||o.getStyle&&o.getStyle(o)||{});Q(Y,"style");for(var ve in ae)Y.style[ve]=ae[ve];Q(Y,"class"),me(Y,o.draggingClass)}function C(L,j){p.mouse={x:j.x,y:j.y};var Y=p.move={x:p.mouse.x-p.initialMouse.x,y:p.mouse.y-p.initialMouse.y};if(p.movedCount===0&&o.minTranslate){var Z=Math.pow(p.move.x,2),te=Math.pow(p.move.y,2),ee=Math.pow(Z+te,.5);if(ee<o.minTranslate)return}var ae=!0;if(p.movedCount===0&&h(L)===!1&&(ae=!1),L.preventDefault(),ae&&o.moving&&o.moving(L,o,p)===!1&&(ae=!1),ae){if(!p||!p.el)return;Object.assign(p.el.style,{left:p.initialPosition.x+Y.x+"px",top:p.initialPosition.y+Y.y+"px"}),p.movedCount++}}function P(L){if(Ae.off(document,"move",C,{passive:!1}),Ae.off(window,"end",P),p.movedCount>0){p.movedCount=0;var j=p,Y=j.el;o.clone?Y.parentElement.removeChild(Y):(se(Y,"style"),se(Y,"class")),o.drop&&o.drop(L,o,p)}p=z()}function R(){var L=o.getEl?o.getEl(d,o):d,j=L;return o.clone&&(p.triggerEl=L,j=L.cloneNode(!0),L.parentElement.appendChild(j)),{position:K(j),el:j}}function z(){return{movedCount:0}}function M(L){L.preventDefault()}}var xt=function(){function d(){g(this,d),S(this,"store",{})}return y(d,[{key:"has",value:function(p){return this.store.hasOwnProperty(p)}},{key:"remember",value:function(p,m){return this.has(p)||(this.store[p]={value:m()}),this.store[p].value}},{key:"forget",value:function(p){p?this.has(p)&&delete this.store[p]:this.store={}}}]),d}();function $t(d,o,p){var m=function(C){Object.defineProperty(d,C,{get:function(){var R=this;return o.remember(C,function(){return p[C].call(R)})}})};for(var x in p)m(x)}function Re(d){return d===""||d}document.elementsFromPoint||(document.elementsFromPoint=Ct);function Ct(d,o){var p=[],m=void 0;do m!==document.elementFromPoint(d,o)?(m=document.elementFromPoint(d,o),p.push(m),m.style.pointerEvents="none"):m=!1;while(m);return p.forEach(function(x){return x.style.pointerEvents="all"}),p}function Et(d,o,p){var m=document.elementsFromPoint(d,o),x,h,C=[],P=!0,R=!1,z=void 0;try{for(var M=m[Symbol.iterator](),L;!(P=(L=M.next()).done);P=!0){var j=L.value;if(!h)ie(j,"tree-node")&&(h=j);else{if(ie(j,"tree")){x=j;break}C.push(j)}}}catch(Ee){R=!0,z=Ee}finally{try{!P&&M.return!=null&&M.return()}finally{if(R)throw z}}if(x){var Y=!1;if(!at(h,x)){var Z=!0,te=!1,ee=void 0;try{for(var ae=C[Symbol.iterator](),ve;!(Z=(ve=ae.next()).done);Z=!0){var Pe=ve.value;if(!at(Pe,x)){Y=!0;break}}}catch(Ee){te=!0,ee=Ee}finally{try{!Z&&ae.return!=null&&ae.return()}finally{if(te)throw ee}}}if(!Y)return p.find(function(Ee){return Ee.$el===x})}}function at(d,o){for(var p=d;p;)if(p=p.parentNode,p===o)return!0}var G={nothing:function(o){},after:function(o){De(o.dplh,o.targetNode)},before:function(o){ke(o.targetNode.parent)?$(o.dplh,o.targetNode):De(o.dplh,o.targetNode.parent)},append:function(o){ke(o.targetNode)?(W(o.dplh,o.targetNode),o.targetNode.open||o.store.toggleOpen(o.targetNode)):De(o.dplh,o.targetNode)},prepend:function(o){ke(o.targetNode)?(B(o.dplh,o.targetNode),o.targetNode.open||o.store.toggleOpen(o.targetNode)):De(o.dplh,o.targetNode)},"after target parent":function(o){De(o.dplh,o.targetNode.parent)},"append prev":function(o){ke(o.targetPrev)?(W(o.dplh,o.targetPrev),o.targetPrev.open||o.store.toggleOpen(o.targetPrev)):De(o.dplh,o.targetPrev)},"append current tree":function(o){ke(o.currentTree.rootData)&&W(o.dplh,o.currentTree.rootData)}};function De(d,o,p){if(o){var m=kt(o,function(x){return x.parent&&ke(x.parent)});if(m)k(d,m);else return!1}else return!1;return!0}function Xe(d){if(!Ve.hasOwnProperty(d._id)){var o;d.hasOwnProperty("draggable")?o=d.draggable:d.parent?o=Xe(d.parent):o=!0,Ve[d._id]=o}return Ve[d._id]}function ke(d){if(!Ue.hasOwnProperty(d._id)){var o;d.hasOwnProperty("droppable")?o=d.droppable:d.parent?o=ke(d.parent):o=!0,Ue[d._id]=o}return Ue[d._id]}function Be(d,o,p,m){var x=o.length;if(m)for(var h=x-1;h>=0;h--){var C=o[h];if(C!==d.node&&p(C,h))return C}else for(var P=0;P<x;P++){var R=o[P];if(R!==d.node&&p(R,P))return R}}function kt(d,o){for(var p=d;p;){if(o(p))return p;p=p.parent}}for(var ze={"targetNode existed":function(o){return o.targetNode},"targetNode is placeholder":function(o){return o.targetNode.isDragPlaceHolder},"targetNode at top":function(o){return o.targetAtTop},"targetNode at bottom":function(o){return o.targetAtBottom},"targetNode is the second child of root":function(o){return o.currentTreeRootSecondChildExcludingDragging===o.targetNode},"currentTree existed":function(o){return o.currentTree},"currentTree empty":function(o){return!Be(o,o.currentTree.rootData.children,function(p){return p})},"placeholder existed":function(o){return o.dplhEl},"placeholder in currentTree":function(o){return o.dplhElInCurrentTree},"placeholder at top":function(o){return o.dplhAtTop},"targetNode is open":function(o){return o.targetNode.open},"targetNode has children excluding placeholder":function(o){return Be(o,o.targetNode.children,function(p){return p!==o.dplh})},"targetNode is 1st child":function(o){return Be(o,o.targetNode.parent.children,function(p){return p})===o.targetNode},"targetNode is last child":function(o){return Be(o,o.targetNode.parent.children,function(p){return p},!0)===o.targetNode},"on targetNode middle":function(o){return o.offset.y<=o.tiMiddleY},"at left":function(o){return o.offset.x<o.tiOffset.x},"at indent right":function(o){return o.offset.x>o.tiOffset.x+o.currentTree.indent}},Pt=function(){var o=ot[Ke],p=ze[o];ze[o]=function(){return!!p.apply(void 0,arguments)}},Ke=0,ot=Object.keys(ze);Ke<ot.length;Ke++)Pt();var Fe,Ue={},Ve={};function Ne(d){var o=this.store.trees,p=d.store,m={event:d.event,el:p.el,vm:this,node:this.data,store:this.store,dplh:this.store.dplh,draggableHelperData:{opt:d.options,store:p}};$t(m,new xt,{nodeInnerEl:function(){return this.el.querySelector(".tree-node-inner")},offset:function(){return q(this.nodeInnerEl)},offset2:function(){return{x:this.offset.x+this.nodeInnerEl.offsetWidth,y:this.offset.y+this.nodeInnerEl.offsetHeight}},offsetToViewPort:function(){var P=this.nodeInnerEl.getBoundingClientRect();return P.x=P.left,P.y=P.top,P},currentTree:function(){var P=Et(this.offsetToViewPort.x,this.offsetToViewPort.y,o);if(P){var R=this.store;if(Fe==null&&(Fe=R),Fe!==P){if(!Re(R.crossTree)||!Re(P.crossTree))return;Fe=P}return Re(P.droppable)?P:void 0}},currentTreeRootEl:function(){return document.getElementById(this.currentTree.rootData._id)},currentTreeRootOf4:function(){return je(this.currentTreeRootEl,this.currentTree.space)},currentTreeRootSecondChildExcludingDragging:function(){var P=this;return this.currentTree.rootData.children.slice(0,3).filter(function(R){return R!==P.node})[1]},dplhEl:function(){return document.getElementById(this.dplh._id)},dplhElInCurrentTree:function(){return!!this.currentTree.$el.querySelector("#".concat(this.dplh._id))},dplhOf4:function(){return je(this.dplhEl,this.currentTree.space)},dplhAtTop:function(){return Math.abs(this.dplhOf4.y-this.currentTreeRootOf4.y)<5},targetAtTop:function(){return Math.abs(this.tiOf4.y-this.currentTreeRootOf4.y)<5},targetAtBottom:function(){return Math.abs(this.tiOf4.y2-this.currentTreeRootOf4.y2)<5},targetNode:function(){var P=this.currentTree;if(!P)throw"no currentTree";var R=this.offset;R.x;for(var z=R.y,M=P.rootData;;){var L=M.children;if(!L||(this.node.parent===M&&(L=L.slice(),L.splice(L.indexOf(this.node),1)),L.length===0))break;var j=pe(L,function(te){var ee=document.getElementById(te._id),ae=q(ee).y,ve=ae+ee.offsetHeight+P.space;return ve<z?-1:ae<=z?0:1},null,null,!0);if(j.hit?M=j.value:j.bigger?M=L[j.index-1]:M=j.value,!M){M=L[0];break}if(!M)break;var Y=document.getElementById(M._id).querySelector(".tree-node-inner"),Z=je(Y,P.space);if(Z.y<=z&&z<=Z.y2)break}return M},targetNodeEl:function(){return document.getElementById(this.targetNode._id)},tiInnerEl:function(){return this.targetNodeEl.querySelector(".tree-node-inner")},tiOffset:function(){return q(this.tiInnerEl)},tiOf4:function(){return je(this.tiInnerEl,this.currentTree.space)},tiMiddleY:function(){return this.tiOffset.y+this.tiInnerEl.offsetHeight/2},targetPrevEl:function(){var P=this.targetNodeEl.previousSibling;return ie(P,"dragging")&&(P=P.previousSibling),P},targetPrev:function(){var P=this.targetPrevEl.getAttribute("id");return this.currentTree.getNodeById(P)}});var x={},h=function(P){if(!x.hasOwnProperty(P)){var R;try{R=ze[P](m)}catch(z){R=z;try{({}).DEVELOPE_SELF&&console.warn("failed to execute rule '".concat(P,"'"),z)}catch{}}x[P]=R}return x[P]};h("currentTree existed")===!0?h("targetNode is placeholder")===!1?h("targetNode is the second child of root")===!0?h("targetNode has children excluding placeholder")===!1?h("on targetNode middle")===!0?G.before(m):h("on targetNode middle")===!1&&(h("at indent right")===!0?G.append(m):h("at indent right")===!1&&G.after(m)):h("targetNode has children excluding placeholder")===!0&&G.prepend(m):h("targetNode is the second child of root")===!1&&(h("currentTree empty")===!1?h("targetNode at top")===!0?h("placeholder in currentTree")===!0?h("targetNode has children excluding placeholder")===!1?h("on targetNode middle")===!1?h("at indent right")===!1?G.after(m):h("at indent right")===!0&&G.append(m):h("on targetNode middle")===!0&&G.before(m):h("targetNode has children excluding placeholder")===!0&&(h("on targetNode middle")===!1?G.prepend(m):h("on targetNode middle")===!0&&G.before(m)):h("placeholder in currentTree")===!1&&G.before(m):h("targetNode at top")===!1&&(h("targetNode at bottom")===!1?h("placeholder at top")===!0?G.prepend(m):h("placeholder at top")===!1&&(h("targetNode has children excluding placeholder")===!0?G.prepend(m):h("targetNode has children excluding placeholder")===!1&&(h("targetNode is 1st child")===!1?h("targetNode is last child")===!1?(h("on targetNode middle")===!0||h("on targetNode middle")===!1)&&(h("at indent right")===!0?G.append(m):h("at indent right")===!1&&G.after(m)):h("targetNode is last child")===!0&&(h("at indent right")===!0?G.append(m):h("at indent right")===!1&&G.after(m)):h("targetNode is 1st child")===!0&&(h("targetNode is last child")===!0?G.append(m):h("targetNode is last child")===!1&&(h("on targetNode middle")===!1||h("on targetNode middle")===!0)&&(h("at indent right")===!1?G.after(m):h("at indent right")===!0&&G.append(m))))):h("targetNode at bottom")===!0&&(h("placeholder in currentTree")===!0?h("on targetNode middle")===!1?h("at indent right")===!0?G.append(m):h("at indent right")===!1&&G.after(m):h("on targetNode middle")===!0&&G.append(m):h("placeholder in currentTree")===!1&&G.append(m))):h("currentTree empty")===!0&&G["append current tree"](m)):h("targetNode is placeholder")===!0&&(h("targetNode at bottom")===!1?h("targetNode is the second child of root")===!1?h("targetNode is 1st child")===!0?h("targetNode is last child")===!1||h("targetNode is last child")===!0&&(h("on targetNode middle")===!1||h("on targetNode middle")===!0)&&(h("at left")===!0?G["after target parent"](m):h("at left")):h("targetNode is 1st child")===!1&&(h("targetNode is last child")===!0?(h("on targetNode middle")===!0||h("on targetNode middle")===!1)&&(h("at left")===!0?G["after target parent"](m):h("at left")===!1&&(h("at indent right")===!0?G["append prev"](m):h("at indent right"))):h("targetNode is last child")===!1&&(h("on targetNode middle")===!0||h("on targetNode middle")===!1)&&(h("at left")===!0||h("at left")===!1&&(h("at indent right")===!0?G["append prev"](m):h("at indent right")))):h("targetNode is the second child of root")===!0&&(h("on targetNode middle")===!0||h("on targetNode middle")===!1)&&(h("at indent right")===!0?G["append prev"](m):h("at indent right")):h("targetNode at bottom")===!0&&(h("targetNode is 1st child")===!0?h("on targetNode middle")===!1?h("at left")===!0?G["after target parent"](m):h("at left"):h("on targetNode middle")===!0&&(h("at left")===!1||h("at left")===!0&&G["after target parent"](m)):h("targetNode is 1st child")===!1&&(h("on targetNode middle")===!1||h("on targetNode middle")===!0)&&(h("at left")===!0?G["after target parent"](m):h("at left")===!1&&(h("at indent right")===!0?G["append prev"](m):h("at indent right"))))):h("currentTree existed")}function je(d,o){var p=q(d);return p.x2=p.x+d.offsetWidth,p.y2=p.y+d.offsetHeight+o,p}Ne.dragStart=function(){},Ne.dragEnd=function(){Fe=null,Ue={},Ve={}};var Ot={extends:Ye,name:"TreeNode",mounted:function(){var o=this;if(this.store.isNodeDraggable=Xe,this.store.isNodeDroppable=ke,!(this.isRoot||this.data.isDragPlaceHolder)){var p=this.store.dplh;this.$watch("store.draggable",function(m){if(Re(m)){var x=o.store.getTriggerEl?o.store.getTriggerEl(o):o.$el.querySelector(".tree-node-inner");o._draggableDestroy=wt(x,{preventSelect:Re(o.store.preventSelect),getEl:function(){return o.$el},minTranslate:10,drag:function(C,P,R){Ne.dragStart();var z={event:C,options:P,store:R};if(o.store.ondragstart&&o.store.ondragstart(o.data,z)===!1||!Xe(o.data))return!1;o.store.$emit("drag",o.data);var M=o.data.parent.children;o.startPosition={siblings:M,index:M.indexOf(o.data)},p.innerStyle.height=R.el.offsetHeight+"px",k(p,o.data),o.data.class+=" dragging"},moving:function(C,P,R){if(R.movedCount!==0){var z={event:C,options:P,store:R};return Ne.call(o,z)}},drop:function(C,P,R){Ne.dragEnd();var z={event:C,options:P,store:R};if(o.store.ondragend&&o.store.ondragend(o.data,z)===!1)A(p.parent.children,p);else{var M=p._vm.store,L=M!==o.store,j=L?o.store:null;k(o.data,p),A(p.parent.children,p),o.data.class=o.data.class.replace(/(^| )dragging( |$)/g," "),M.$emit("drop",o.data,M,j),j&&j.$emit("drop",o.data,M,j);var Y=o.data.parent.children;Y===o.startPosition.siblings&&Y.indexOf(o.data)===o.startPosition.index||(o.store.$emit("change",o.data,M,j),j&&j.$emit("change",o.data,M,j)),o.startPosition=null}}})}else o._draggableDestroy&&(o._draggableDestroy(),o._draggableDestroy=null)},{immediate:!0})}}},At=Ot,Dt=void 0,Tt=void 0,Rt=void 0,Ft=void 0,lt=ne({},Dt,At,Tt,Ft,Rt,!1,void 0,void 0,void 0),Qe=[],Nt={_id:"draggable_tree_drag_placeHolder",level:null,droppable:!1,isDragPlaceHolder:!0,class:"draggable-placeholder",style:{},innerStyle:{},innerClass:"draggable-placeholder-inner",innerBackStyle:{},innerBackClass:"draggable-placeholder-inner-back"},It={extends:st,props:{getTriggerEl:{type:Function},draggable:{},droppable:{default:!0},crossTree:{},ondragstart:{type:Function},ondragend:{type:Function},preventSelect:{default:!0}},components:{TreeNode:lt},data:function(){return{dplh:Nt,trees:Qe}},created:function(){Qe.push(this)},mounted:function(){},beforeDestroy:function(){A(Qe,this)}},Mt=It,Lt=void 0,Bt=void 0,zt=void 0,Ut=void 0,Vt=ne({},Lt,Mt,Bt,Ut,zt,!1,void 0,void 0,void 0);r.DraggableTree=Vt,r.DraggableTreeNode=lt,r.Tree=st,r.TreeNode=Ye,Object.defineProperty(r,"__esModule",{value:!0})})})(vueDraggableNestedTree,vueDraggableNestedTree.exports);var vueDraggableNestedTreeExports=vueDraggableNestedTree.exports;const _sfc_main$j={props:{page:Object,depth:Number,root:Boolean,vm:Object,firstPageIsRoot:Boolean,isOpen:Boolean,hasChildren:Boolean,showSlugs:Boolean,editable:Boolean},data(){return{editing:!1}},computed:{isTopLevel(){return this.depth===1},isRoot(){if(!this.firstPageIsRoot||!this.isTopLevel)return!1;const t=this.vm.data.parent.children[0].id;return this.page.id===t},isEntry(){return!!this.page.id},isLink(){return!this.page.id&&this.page.title&&this.page.url},isText(){return this.page.title&&!this.page.url},title(){return this.page.title||this.page.entry_title||this.page.url}},methods:{getStatusClass(){switch(this.page.status){case"published":return"bg-green-600";case"draft":return"bg-gray-400";default:return"bg-transparent border border-gray-600"}},getStatusTooltip(){let t=__(this.page.status)||__("Text item");return t[0].toUpperCase()+t.slice(1)},remove(){const t=this.page._vm.store;t.deleteNode(this.page),this.$emit("removed",t)},orphanChildren(){const t=this.page._vm.store;this.vm.data.children.slice().forEach(e=>insertBefore(e,this.vm.data)),this.$emit("children-orphaned",t)}}};var _sfc_render$j=function(){var e=this,r=e._self._c;return r("div",{staticClass:"flex"},[e._t("branch-action",function(){return[e.editable?r("div",{staticClass:"page-move w-6"}):e._e()]},{branch:e.page}),r("div",{staticClass:"flex items-center flex-1 p-2 ml-2 text-xs leading-normal"},[r("div",{staticClass:"flex items-center flex-1",on:{click:function(n){return e.$emit("branch-clicked",e.page)}}},[r("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.getStatusTooltip(),expression:"getStatusTooltip()"}],staticClass:"little-dot mr-2",class:e.getStatusClass()}),e.isRoot?r("svg-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.__("This is the root page"),expression:"__('This is the root page')"}],staticClass:"mr-2 h-4 w-4 text-gray-800",attrs:{name:"home-page"}}):e._e(),r("a",{class:{"text-sm font-medium":e.isTopLevel},domProps:{textContent:e._s(e.title)},on:{click:function(n){return e.$emit("edit",n)}}}),e.showSlugs?r("span",{staticClass:"ml-2 font-mono text-gray-700 text-2xs pt-px"},[e._v(" "+e._s(e.isRoot?"/":e.page.slug)+" ")]):e._e(),e.hasChildren?r("button",{staticClass:"p-2 text-gray-600 hover:text-gray-700 transition duration-100 outline-none flex",class:{"-rotate-90":!e.isOpen},on:{click:function(n){return e.$emit("toggle-open")}}},[r("svg-icon",{staticClass:"h-1.5",attrs:{name:"micro/chevron-down-xs"}})],1):e._e(),e.page.collection&&e.editable?r("div",{staticClass:"ml-4 flex items-center"},[r("svg-icon",{staticClass:"w-4 h-4",attrs:{name:"light/content-writing"}}),r("div",{staticClass:"ml-1"},[r("a",{attrs:{href:e.page.collection.create_url},domProps:{textContent:e._s(e.__("Add"))}}),r("span",{staticClass:"text-gray"},[e._v("/")]),r("a",{attrs:{href:e.page.collection.edit_url},domProps:{textContent:e._s(e.__("Edit"))}})])],1):e._e()],1),r("div",{staticClass:"pr-2 flex items-center"},[e._t("branch-icon",null,{branch:e.page}),!e.isRoot&&e.editable?r("dropdown-list",{staticClass:"ml-4"},[e._t("branch-options",null,{branch:e.page,depth:e.depth,removeBranch:e.remove,orphanChildren:e.orphanChildren})],2):e._e()],2)])],2)},_sfc_staticRenderFns$j=[],__component__$j=normalizeComponent(_sfc_main$j,_sfc_render$j,_sfc_staticRenderFns$j,!1,null,null,null,null);const TreeBranch=__component__$j.exports,_sfc_main$i={components:{DraggableTree:vueDraggableNestedTreeExports.DraggableTree,TreeBranch},props:{pagesUrl:{type:String,required:!0},submitUrl:{type:String},submitParameters:{type:Object,default:()=>({})},createUrl:{type:String},site:{type:String,required:!0},localizations:{type:Array},maxDepth:{type:Number,default:1/0},expectsRoot:{type:Boolean,required:!0},showSlugs:{type:Boolean,default:!1},preferencesPrefix:{type:String},editable:{type:Boolean,default:!0}},data(){return{loading:!1,saving:!1,pages:[],treeData:[]}},computed:{activeLocalization(){return _.findWhere(this.localizations,{active:!0})},preferencesKey(){return this.preferencesPrefix?`${this.preferencesPrefix}.${this.site}.pagetree`:null}},watch:{site(t){this.getPages()}},created(){this.getPages().then(()=>{this.initialPages=this.pages}),this.$keys.bindGlobal(["mod+s"],t=>{t.preventDefault(),this.save()})},methods:{getPages(){this.loading=!0;const t=`${this.pagesUrl}?site=${this.site}`;return this.$axios.get(t).then(e=>{this.pages=e.data.pages,this.loadTreeState(this.pages),this.updateTreeData(),this.loading=!1})},treeChanged(t,e){if(!this.validate()){this.updateTreeData();return}this.treeUpdated(e)},treeUpdated(t){t=t||this.$refs.tree,this.pages=t.getPureData(),this.$emit("changed")},validate(){let t=!0;return this.traverseTree(this.treeData,(e,{isRoot:r})=>{if(r&&e.children.length)return t=!1,!1}),t},cleanPagesForSubmission(t){return _.map(t,e=>({id:e.id,children:this.cleanPagesForSubmission(e.children)}))},save(){if(!this.editable)return;this.saving=!0;const t={pages:this.cleanPagesForSubmission(this.pages),site:this.site,expectsRoot:this.expectsRoot,...this.submitParameters};return this.$axios.patch(this.submitUrl,t).then(e=>(this.$emit("saved",e),this.$toast.success(__("Saved")),this.initialPages=this.pages,this.saveTreeState(),e)).catch(e=>{let r=e.response?e.response.data.message:__("Something went wrong");if(e.response&&e.response.status===422){const{errors:n}=e.response.data;r=n[Object.keys(n)[0]][0]}return this.$toast.error(r),Promise.reject(e)}).finally(()=>this.saving=!1)},addPages(t,e){const r=e?e.data.children:this.treeData;t.forEach(n=>{r.push({id:n.id,entry:n.entry,title:n.title,entry_title:n.entry_title,slug:n.slug,url:n.url,edit_url:n.edit_url,status:n.status,children:[]})}),this.treeUpdated()},updateTreeData(){this.treeData=clone(this.pages)},pageRemoved(t){this.pages=t.getPureData(),this.$emit("changed")},childrenOrphaned(t){this.pages=t.getPureData(),this.$emit("changed")},localizationSelected(t){t.active||(t.exists?this.editLocalization(t):this.createLocalization(t))},editLocalization(t){window.location=t.url},createLocalization(t){console.log("todo.")},cancel(){confirm(__("Are you sure?"))&&(this.pages=this.initialPages,this.updateTreeData(),this.$emit("canceled"))},treeDragstart(t){let e=1;this.traverseTree(t,(n,{depth:s})=>{e=Math.max(e,s)});const r=this.maxDepth-e;this.traverseTree(this.treeData,(n,{depth:s,isRoot:a})=>{n!==t&&this.$set(n,"droppable",!a&&s<=r)})},pageUpdated(t){this.pages=t.getPureData(),this.$emit("changed")},expandAll(){this.traverseTree(this.treeData,t=>{t.open=!0}),this.saveTreeState()},collapseAll(){this.traverseTree(this.treeData,t=>{t.open=!1}),this.saveTreeState()},loadTreeState(t){if(!this.preferencesKey)return;const e=JSON.parse(localStorage.getItem(this.preferencesKey)||"[]");this.applyTreeState(e,t)},saveTreeState(){if(!this.preferencesKey)return;const t=this.getTreeState(this.treeData);return localStorage.setItem(this.preferencesKey,JSON.stringify(t))},getTreeState(t){const e=[];return this.traverseTree(t,(r,{path:n})=>{r.children.length&&!r.open&&e.push(n)}),e},applyTreeState(t,e){this.traverseTree(e,(r,{path:n})=>{r.children.length&&(r.open=!t.includes(n))})},traverseTree(t,e,r=[]){(Array.isArray(t)?t:[t]).every((s,a)=>{const l=[...r,a],c=l.join("."),u=l.length,f=this.expectsRoot&&u===1&&a===0;return e(s,{path:c,depth:u,index:a,isRoot:f})===!1?!1:(s.children.length&&this.traverseTree(s.children,e,l),!0)})},getNodeByBranchId(t){let e;return breadthFirstSearch(this.treeData,r=>{if(r.id===t)return e=r,!1}),e}}};var _sfc_render$i=function(){var e=this,r=e._self._c;return r("div",[r("div",{staticClass:"mb-2 flex justify-end"},[r("a",{staticClass:"text-2xs text-blue mr-4 underline",domProps:{textContent:e._s(e.__("Expand All"))},on:{click:e.expandAll}}),r("a",{staticClass:"text-2xs text-blue mr-2 underline",domProps:{textContent:e._s(e.__("Collapse All"))},on:{click:e.collapseAll}})]),e.loading?r("div",{staticClass:"loading card"},[r("loading-graphic")],1):e._e(),!e.loading&&e.pages.length==0?r("div",{staticClass:"no-results w-full flex items-center"},[e._t("empty")],2):e._e(),e.loading?e._e():r("div",{staticClass:"page-tree w-full"},[r("draggable-tree",{ref:"tree",attrs:{draggable:e.editable,data:e.treeData,space:1,indent:24},on:{change:e.treeChanged,drag:e.treeDragstart,nodeOpenChanged:e.saveTreeState},scopedSlots:e._u([{key:"default",fn:function({data:n,store:s,vm:a}){return r("tree-branch",{attrs:{page:n,depth:a.level,vm:a,"first-page-is-root":e.expectsRoot,"is-open":n.open,"has-children":n.children.length>0,"show-slugs":e.showSlugs,editable:e.editable},on:{edit:function(l){return e.$emit("edit-page",n,a,s,l)},"toggle-open":function(l){return s.toggleOpen(n)},removed:e.pageRemoved,"children-orphaned":e.childrenOrphaned,"branch-clicked":function(l){return e.$emit("branch-clicked",n)}},scopedSlots:e._u([{key:"branch-action",fn:function(l){return[e._t("branch-action",null,null,{...l,vm:a})]}},{key:"branch-icon",fn:function(l){return[e._t("branch-icon",null,null,{...l,vm:a})]}},{key:"branch-options",fn:function(l){return[e._t("branch-options",null,null,{...l,vm:a})]}}],null,!0)})}}],null,!1,1431326290)})],1)])},_sfc_staticRenderFns$i=[],__component__$i=normalizeComponent(_sfc_main$i,_sfc_render$i,_sfc_staticRenderFns$i,!1,null,null,null,null);const PageTree=__component__$i.exports,_sfc_main$h={mixins:[HasFilters],components:{PageTree},props:{filtersUrl:String,selectionsUrl:String,initialSelections:Array,initialSortColumn:String,initialSortDirection:String,maxSelections:Number,site:String,search:Boolean,type:String,name:String,exclusions:{type:Array,default:()=>[]},initialColumns:{type:Array,default:()=>[]},tree:Object},data(){return{source:null,initializing:!0,loading:!0,items:[],meta:{},filters:[],sortColumn:this.initialSortColumn,sortDirection:this.initialSortDirection,page:1,selections:_.clone(this.initialSelections),columns:this.initialColumns,visibleColumns:this.initialColumns.filter(t=>t.visible),view:"list",lastItemClicked:null}},computed:{parameters(){return{sort:this.sortColumn,order:this.sortDirection,page:this.page,site:this.site,exclusions:this.exclusions,filters:utf8btoa(JSON.stringify(this.activeFilters)),columns:this.visibleColumns.map(t=>t.field).join(",")}},hasMaxSelections(){return this.maxSelections===1/0?!1:!!this.maxSelections},reachedSelectionLimit(){return this.selections.length===this.maxSelections},singleSelect(){return this.maxSelections===1},canUseTree(){return!!this.tree},initialView(){if(!this.canUseTree)return"list";const t=this.canUseTree?"tree":"list";return localStorage.getItem(this.viewLocalStorageKey)||t},viewLocalStorageKey(){return`statamic.selector.field.${this.name}`}},mounted(){this.view=this.initialView,this.getFilters().then(()=>{this.autoApplyFilters(this.filters),this.initialRequest()})},watch:{parameters:{deep:!0,handler(t,e){this.initializing||JSON.stringify(e)!==JSON.stringify(t)&&this.request()}},loading:{immediate:!0,handler(t){this.$progress.loading("relationship-selector-listing",t)}},searchQuery(t){this.sortColumn=null,this.sortDirection=null,this.page=1,this.request()},selections(){this.maxSelections===1&&this.selections.length===1&&this.select()},view(t){localStorage.setItem(this.viewLocalStorageKey,t)}},methods:{getFilters(){return this.filtersUrl?this.$axios.get(this.filtersUrl).then(t=>{this.filters=t.data}):Promise.resolve()},initialRequest(){return this.request().then(()=>{this.search&&this.view==="list"&&this.$refs.search.focus()})},request(){this.loading=!0,this.source&&this.source.cancel(),this.source=this.$axios.CancelToken.source();const t={...this.parameters,search:this.searchQuery};return this.$axios.get(this.selectionsUrl,{params:t,cancelToken:this.source.token}).then(e=>{this.columns=e.data.meta.columns,this.items=e.data.data,this.meta=e.data.meta,this.activeFilterBadges={...e.data.meta.activeFilterBadges},this.loading=!1,this.initializing=!1}).catch(e=>{this.$axios.isCancel(e)||(this.loading=!1,this.initializing=!1,this.$toast.error(e.response?e.response.data.message:__("Something went wrong"),{duration:null}))})},sorted(t,e){this.sortColumn=t,this.sortDirection=e},setPage(t){this.page=t},select(){this.$emit("selected",this.selections),this.close()},close(){this.$emit("closed")},selectionsUpdated(t){this.selections=t},getStatusClass(t){return t.published&&t.private?"bg-transparent border border-gray-600":t.published?"bg-green-600":"bg-gray-400"},getStatusLabel(t){if(t.status==="published")return __("Published");if(t.status==="scheduled")return __("Scheduled");if(t.status==="expired")return __("Expired");if(t.status==="draft")return __("Draft")},getStatusTooltip(t){if(t.status==="published")return t.collection.dated?__("messages.status_published_with_date",{date:t.date}):null;if(t.status==="scheduled")return __("messages.status_scheduled_with_date",{date:t.date});if(t.status==="expired")return __("messages.status_expired_with_date",{date:t.date});if(t.status==="draft")return null},columnShowing(t){return this.visibleColumns.find(e=>e.field===t)},isRedirectBranch(t){return t.redirect!=null},isSelected(t){return this.selections.includes(t)},toggleSelection(t){const e=this.selections.indexOf(t);if(e>-1){this.selections.splice(e,1);return}this.singleSelect&&this.selections.pop(),this.reachedSelectionLimit||this.selections.push(t)},checkboxClicked(t,e,r){r.shiftKey&&this.lastItemClicked!==null?this.selectRange(Math.min(this.lastItemClicked,e),Math.max(this.lastItemClicked,e)):this.toggleSelection(t.id,e),r.target.checked&&(this.lastItemClicked=e)}}};var _sfc_render$h=function(){var e=this,r=e._self._c;return r("div",{staticClass:"h-full bg-white"},[e.initializing?r("div",{staticClass:"absolute inset-0 z-200 flex items-center justify-center text-center"},[r("loading-graphic")],1):e._e(),!e.initializing&&e.view==="list"?r("data-list",{ref:"dataList",attrs:{rows:e.items,columns:e.columns,sort:!1,"sort-column":e.sortColumn,"sort-direction":e.sortDirection,selections:e.selections,"max-selections":e.maxSelections},on:{"selections-updated":e.selectionsUpdated},scopedSlots:e._u([{key:"default",fn:function({}){return r("div",{staticClass:"flex flex-col h-full"},[r("div",{staticClass:"bg-white z-1"},[r("div",{staticClass:"py-2 px-4 flex items-center justify-between"},[r("data-list-search",{ref:"search",staticClass:"h-8 min-w-[240px] w-full",attrs:{placeholder:e.searchPlaceholder},model:{value:e.searchQuery,callback:function(n){e.searchQuery=n},expression:"searchQuery"}}),e.canUseTree?r("div",{staticClass:"btn-group ml-4"},[r("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.__("Tree"),expression:"__('Tree')"}],staticClass:"btn flex items-center px-4",class:{active:e.view==="tree"},on:{click:function(n){e.view="tree"}}},[r("svg-icon",{staticClass:"h-4 w-4",attrs:{name:"light/structures"}})],1),r("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.__("List"),expression:"__('List')"}],staticClass:"btn flex items-center px-4",class:{active:e.view==="list"},on:{click:function(n){e.view="list"}}},[r("svg-icon",{staticClass:"h-4 w-4",attrs:{name:"assets-mode-table"}})],1)]):e._e()],1),r("div",[r("data-list-filters",{ref:"filters",attrs:{filters:e.filters,"active-filters":e.activeFilters,"active-filter-badges":e.activeFilterBadges,"active-count":e.activeFilterCount,"search-query":e.searchQuery},on:{changed:function(n){return e.filterChanged(n,!1)}}})],1)]),r("div",{staticClass:"flex-1 flex flex-col min-h-0"},[r("div",{staticClass:"flex flex-col h-full justify-start"},[r("div",{staticClass:"flex-1 overflow-scroll"},[r("data-list-table",{staticClass:"cursor-pointer",attrs:{loading:e.loading,"allow-bulk-actions":!0,"toggle-selection-on-row-click":!0,type:e.type},on:{sorted:e.sorted},scopedSlots:e._u([{key:"cell-title",fn:function({row:n}){return[r("div",{staticClass:"flex items-center"},[n.status&&!e.columnShowing("status")?r("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.getStatusLabel(n),expression:"getStatusLabel(entry)"}],staticClass:"little-dot mr-2",class:e.getStatusClass(n)}):e._e(),e._v(" "+e._s(n.title)+" ")])]}},{key:"cell-status",fn:function({row:n}){return[r("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.getStatusTooltip(n),expression:"getStatusTooltip(entry)"}],staticClass:"status-index-field select-none",class:`status-${n.status}`,domProps:{textContent:e._s(e.getStatusLabel(n))}})]}},{key:"cell-url",fn:function({row:n}){return[r("span",{staticClass:"text-2xs"},[e._v(e._s(n.url))])]}}],null,!0)})],1),e.meta.last_page>1?r("data-list-pagination",{staticClass:"border-t shadow-lg",attrs:{"resource-meta":e.meta,inline:!0,"scroll-to-top":!1},on:{"page-selected":e.setPage}}):e._e(),r("div",{staticClass:"p-4 border-t flex items-center justify-between bg-gray-200"},[r("div",{staticClass:"text-sm text-gray-700",domProps:{textContent:e._s(e.hasMaxSelections?e.__n(":count/:max selected",e.selections,{max:e.maxSelections}):e.__n(":count item selected|:count items selected",e.selections))}}),r("div",[r("button",{staticClass:"btn",attrs:{type:"button"},on:{click:e.close}},[e._v(" "+e._s(e.__("Cancel"))+" ")]),!e.hasMaxSelections||e.maxSelections>1?r("button",{staticClass:"btn-primary ml-2",attrs:{type:"button"},on:{click:e.select}},[e._v(" "+e._s(e.__("Select"))+" ")]):e._e()])])],1)])])}}],null,!1,2317746411)}):e._e(),!e.initializing&&e.canUseTree&&e.view==="tree"?[r("div",{staticClass:"flex flex-col h-full"},[r("div",{staticClass:"bg-white bg-gray-200 shadow px-4 py-2 z-1 h-13 flex items-center justify-end"},[r("h1",{staticClass:"flex-1 flex items-center text-xl"},[e._v(e._s(e.tree.title))]),r("div",{staticClass:"btn-group ml-4"},[r("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.__("Tree"),expression:"__('Tree')"}],staticClass:"btn flex items-center px-4",class:{active:e.view==="tree"},on:{click:function(n){e.view="tree"}}},[r("svg-icon",{staticClass:"h-4 w-4",attrs:{name:"light/structures"}})],1),r("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.__("List"),expression:"__('List')"}],staticClass:"btn flex items-center px-4",class:{active:e.view==="list"},on:{click:function(n){e.view="list"}}},[r("svg-icon",{staticClass:"h-4 w-4",attrs:{name:"assets-mode-table"}})],1)])]),r("div",{staticClass:"flex-1 flex flex-col min-h-0"},[r("div",{staticClass:"flex flex-col h-full justify-start"},[r("div",{staticClass:"flex-1 overflow-scroll bg-gray-200 p-4"},[r("page-tree",{ref:"tree",attrs:{"pages-url":e.tree.url,"show-slugs":e.tree.showSlugs,"expects-root":e.tree.expectsRoot,site:e.site,"preferences-prefix":`selector-field.${e.name}`,editable:!1},on:{"branch-clicked":function(n){e.$refs[`tree-branch-${n.id}`].click()}},scopedSlots:e._u([{key:"branch-action",fn:function({branch:n,index:s}){return[r("div",[r("input",{ref:`tree-branch-${n.id}`,staticClass:"mt-3 ml-3",attrs:{type:"checkbox",disabled:e.reachedSelectionLimit&&!e.singleSelect&&!e.isSelected(n.id),id:`checkbox-${n.id}`},domProps:{value:n.id,checked:e.isSelected(n.id)},on:{click:function(a){return e.checkboxClicked(n,s,a)}}})])]}},{key:"branch-icon",fn:function({branch:n}){return[e.isRedirectBranch(n)?r("svg-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.__("Redirect"),expression:"__('Redirect')"}],staticClass:"inline-block w-4 h-4 text-gray-500",attrs:{name:"light/external-link"}}):e._e()]}}],null,!1,1361176970)})],1),r("div",{staticClass:"p-4 border-t flex items-center justify-between bg-gray-200"},[r("div",{staticClass:"text-sm text-gray-700",domProps:{textContent:e._s(e.hasMaxSelections?e.__n(":count/:max selected",e.selections,{max:e.maxSelections}):e.__n(":count item selected|:count items selected",e.selections))}}),r("div",[r("button",{staticClass:"btn",attrs:{type:"button"},on:{click:e.close}},[e._v(" "+e._s(e.__("Cancel"))+" ")]),!e.hasMaxSelections||e.maxSelections>1?r("button",{staticClass:"btn-primary ml-2",attrs:{type:"button"},on:{click:e.select}},[e._v(" "+e._s(e.__("Select"))+" ")]):e._e()])])])])])]:e._e()],2)},_sfc_staticRenderFns$h=[],__component__$h=normalizeComponent(_sfc_main$h,_sfc_render$h,_sfc_staticRenderFns$h,!1,null,null,null,null);const ItemSelector=__component__$h.exports,_sfc_main$g={mixins:[InlinePublishForm],props:{site:String,itemUrl:String},data(){return{creating:!0,method:"post",action:"store",title:__("Create")}},inject:["storeName"],methods:{saved(t){this.$emit("created",t.data.data),this.$nextTick(()=>this.close())}}},_sfc_render$g=null,_sfc_staticRenderFns$g=null;var __component__$g=normalizeComponent(_sfc_main$g,_sfc_render$g,_sfc_staticRenderFns$g,!1,null,null,null,null);const InlineCreateForm=__component__$g.exports,_sfc_main$f={components:{InlineCreateForm},props:{site:String,creatables:Array,component:String,componentProps:Object},data(){return{creatable:null}},computed:{isCreating(){return this.creatable!==null}},methods:{itemCreated(t){this.stopCreating(),this.$emit("created",t)},stopCreating(){this.creatable=null},create(){this.creatables.length===1&&this.select(this.creatables[0])},select(t){this.creatable=t}}};var _sfc_render$f=function(){var e=this,r=e._self._c;return r("div",[r("dropdown-list",{attrs:{disabled:e.creatables.length===1},scopedSlots:e._u([{key:"trigger",fn:function(){return[r("button",{staticClass:"text-button text-blue hover:text-gray-800 mr-6 flex items-center outline-none",on:{click:e.create}},[r("svg-icon",{staticClass:"mr-1 h-4 w-4 flex items-center",attrs:{name:"light/content-writing"}}),r("span",{staticClass:"hidden @sm:block",domProps:{textContent:e._s(e.__("Create & Link Item"))}}),r("span",{staticClass:"@sm:hidden",domProps:{textContent:e._s(e.__("Create"))}})],1)]},proxy:!0}])},e._l(e.creatables,function(n){return r("dropdown-item",{key:n.url,attrs:{text:n.title},on:{click:function(s){return e.select(n)}}})}),1),e.isCreating?r("inline-create-form",{attrs:{site:e.site,"item-url":e.creatable.url,component:e.component,"component-props":e.componentProps},on:{created:e.itemCreated,closed:e.stopCreating}}):e._e()],1)},_sfc_staticRenderFns$f=[],__component__$f=normalizeComponent(_sfc_main$f,_sfc_render$f,_sfc_staticRenderFns$f,!1,null,null,null,null);const CreateButton=__component__$f.exports;class AbstractEvent{constructor(e){this._canceled=!1,this.data=e}get type(){return this.constructor.type}get cancelable(){return this.constructor.cancelable}cancel(){this._canceled=!0}canceled(){return this._canceled}clone(e){return new this.constructor({...this.data,...e})}}AbstractEvent.type="event";AbstractEvent.cancelable=!1;class AbstractPlugin{constructor(e){this.draggable=e}attach(){throw new Error("Not Implemented")}detach(){throw new Error("Not Implemented")}}const defaultDelay={mouse:0,drag:0,touch:100};class Sensor{constructor(e=[],r={}){this.containers=[...e],this.options={...r},this.dragging=!1,this.currentContainer=null,this.originalSource=null,this.startEvent=null,this.delay=calcDelay(r.delay)}attach(){return this}detach(){return this}addContainer(...e){this.containers=[...this.containers,...e]}removeContainer(...e){this.containers=this.containers.filter(r=>!e.includes(r))}trigger(e,r){const n=document.createEvent("Event");return n.detail=r,n.initEvent(r.type,!0,!0),e.dispatchEvent(n),this.lastEvent=r,r}}function calcDelay(t){const e={};if(t===void 0)return{...defaultDelay};if(typeof t=="number"){for(const r in defaultDelay)Object.prototype.hasOwnProperty.call(defaultDelay,r)&&(e[r]=t);return e}for(const r in defaultDelay)Object.prototype.hasOwnProperty.call(defaultDelay,r)&&(t[r]===void 0?e[r]=defaultDelay[r]:e[r]=t[r]);return e}function closest(t,e){if(t==null)return null;function r(s){return s==null||e==null?!1:isSelector(e)?Element.prototype.matches.call(s,e):isNodeList(e)?[...e].includes(s):isElement$1(e)?e===s:isFunction$2(e)?e(s):!1}let n=t;do{if(n=n.correspondingUseElement||n.correspondingElement||n,r(n))return n;n=(n==null?void 0:n.parentNode)||null}while(n!=null&&n!==document.body&&n!==document);return null}function isSelector(t){return typeof t=="string"}function isNodeList(t){return t instanceof NodeList||t instanceof Array}function isElement$1(t){return t instanceof Node}function isFunction$2(t){return typeof t=="function"}function distance(t,e,r,n){return Math.sqrt((r-t)**2+(n-e)**2)}class SensorEvent extends AbstractEvent{get originalEvent(){return this.data.originalEvent}get clientX(){return this.data.clientX}get clientY(){return this.data.clientY}get target(){return this.data.target}get container(){return this.data.container}get originalSource(){return this.data.originalSource}get pressure(){return this.data.pressure}}class DragStartSensorEvent extends SensorEvent{}DragStartSensorEvent.type="drag:start";class DragMoveSensorEvent extends SensorEvent{}DragMoveSensorEvent.type="drag:move";class DragStopSensorEvent extends SensorEvent{}DragStopSensorEvent.type="drag:stop";class DragPressureSensorEvent extends SensorEvent{}DragPressureSensorEvent.type="drag:pressure";const onContextMenuWhileDragging=Symbol("onContextMenuWhileDragging"),onMouseDown=Symbol("onMouseDown"),onMouseMove=Symbol("onMouseMove"),onMouseUp=Symbol("onMouseUp"),startDrag$1=Symbol("startDrag"),onDistanceChange$1=Symbol("onDistanceChange");class MouseSensor extends Sensor{constructor(e=[],r={}){super(e,r),this.mouseDownTimeout=null,this.pageX=null,this.pageY=null,this[onContextMenuWhileDragging]=this[onContextMenuWhileDragging].bind(this),this[onMouseDown]=this[onMouseDown].bind(this),this[onMouseMove]=this[onMouseMove].bind(this),this[onMouseUp]=this[onMouseUp].bind(this),this[startDrag$1]=this[startDrag$1].bind(this),this[onDistanceChange$1]=this[onDistanceChange$1].bind(this)}attach(){document.addEventListener("mousedown",this[onMouseDown],!0)}detach(){document.removeEventListener("mousedown",this[onMouseDown],!0)}[onMouseDown](e){if(e.button!==0||e.ctrlKey||e.metaKey)return;const r=closest(e.target,this.containers);if(!r||this.options.handle&&e.target&&!closest(e.target,this.options.handle))return;const n=closest(e.target,this.options.draggable);if(!n)return;const{delay:s}=this,{pageX:a,pageY:l}=e;Object.assign(this,{pageX:a,pageY:l}),this.onMouseDownAt=Date.now(),this.startEvent=e,this.currentContainer=r,this.originalSource=n,document.addEventListener("mouseup",this[onMouseUp]),document.addEventListener("dragstart",preventNativeDragStart),document.addEventListener("mousemove",this[onDistanceChange$1]),this.mouseDownTimeout=window.setTimeout(()=>{this[onDistanceChange$1]({pageX:this.pageX,pageY:this.pageY})},s.mouse)}[startDrag$1](){const e=this.startEvent,r=this.currentContainer,n=this.originalSource,s=new DragStartSensorEvent({clientX:e.clientX,clientY:e.clientY,target:e.target,container:r,originalSource:n,originalEvent:e});this.trigger(this.currentContainer,s),this.dragging=!s.canceled(),this.dragging&&(document.addEventListener("contextmenu",this[onContextMenuWhileDragging],!0),document.addEventListener("mousemove",this[onMouseMove]))}[onDistanceChange$1](e){const{pageX:r,pageY:n}=e,{distance:s}=this.options,{startEvent:a,delay:l}=this;if(Object.assign(this,{pageX:r,pageY:n}),!this.currentContainer)return;const c=Date.now()-this.onMouseDownAt,u=distance(a.pageX,a.pageY,r,n)||0;clearTimeout(this.mouseDownTimeout),c<l.mouse?document.removeEventListener("mousemove",this[onDistanceChange$1]):u>=s&&(document.removeEventListener("mousemove",this[onDistanceChange$1]),this[startDrag$1]())}[onMouseMove](e){if(!this.dragging)return;const r=document.elementFromPoint(e.clientX,e.clientY),n=new DragMoveSensorEvent({clientX:e.clientX,clientY:e.clientY,target:r,container:this.currentContainer,originalEvent:e});this.trigger(this.currentContainer,n)}[onMouseUp](e){if(clearTimeout(this.mouseDownTimeout),e.button!==0||(document.removeEventListener("mouseup",this[onMouseUp]),document.removeEventListener("dragstart",preventNativeDragStart),document.removeEventListener("mousemove",this[onDistanceChange$1]),!this.dragging))return;const r=document.elementFromPoint(e.clientX,e.clientY),n=new DragStopSensorEvent({clientX:e.clientX,clientY:e.clientY,target:r,container:this.currentContainer,originalEvent:e});this.trigger(this.currentContainer,n),document.removeEventListener("contextmenu",this[onContextMenuWhileDragging],!0),document.removeEventListener("mousemove",this[onMouseMove]),this.currentContainer=null,this.dragging=!1,this.startEvent=null}[onContextMenuWhileDragging](e){e.preventDefault()}}function preventNativeDragStart(t){t.preventDefault()}function touchCoords(t){const{touches:e,changedTouches:r}=t;return e&&e[0]||r&&r[0]}const onTouchStart=Symbol("onTouchStart"),onTouchEnd=Symbol("onTouchEnd"),onTouchMove=Symbol("onTouchMove"),startDrag=Symbol("startDrag"),onDistanceChange=Symbol("onDistanceChange");let preventScrolling=!1;window.addEventListener("touchmove",t=>{preventScrolling&&t.preventDefault()},{passive:!1});class TouchSensor extends Sensor{constructor(e=[],r={}){super(e,r),this.currentScrollableParent=null,this.tapTimeout=null,this.touchMoved=!1,this.pageX=null,this.pageY=null,this[onTouchStart]=this[onTouchStart].bind(this),this[onTouchEnd]=this[onTouchEnd].bind(this),this[onTouchMove]=this[onTouchMove].bind(this),this[startDrag]=this[startDrag].bind(this),this[onDistanceChange]=this[onDistanceChange].bind(this)}attach(){document.addEventListener("touchstart",this[onTouchStart])}detach(){document.removeEventListener("touchstart",this[onTouchStart])}[onTouchStart](e){const r=closest(e.target,this.containers);if(!r||this.options.handle&&e.target&&!closest(e.target,this.options.handle))return;const n=closest(e.target,this.options.draggable);if(!n)return;const{distance:s=0}=this.options,{delay:a}=this,{pageX:l,pageY:c}=touchCoords(e);Object.assign(this,{pageX:l,pageY:c}),this.onTouchStartAt=Date.now(),this.startEvent=e,this.currentContainer=r,this.originalSource=n,document.addEventListener("touchend",this[onTouchEnd]),document.addEventListener("touchcancel",this[onTouchEnd]),document.addEventListener("touchmove",this[onDistanceChange]),r.addEventListener("contextmenu",onContextMenu),s&&(preventScrolling=!0),this.tapTimeout=window.setTimeout(()=>{this[onDistanceChange]({touches:[{pageX:this.pageX,pageY:this.pageY}]})},a.touch)}[startDrag](){const e=this.startEvent,r=this.currentContainer,n=touchCoords(e),s=this.originalSource,a=new DragStartSensorEvent({clientX:n.pageX,clientY:n.pageY,target:e.target,container:r,originalSource:s,originalEvent:e});this.trigger(this.currentContainer,a),this.dragging=!a.canceled(),this.dragging&&document.addEventListener("touchmove",this[onTouchMove]),preventScrolling=this.dragging}[onDistanceChange](e){const{distance:r}=this.options,{startEvent:n,delay:s}=this,a=touchCoords(n),l=touchCoords(e),c=Date.now()-this.onTouchStartAt,u=distance(a.pageX,a.pageY,l.pageX,l.pageY);Object.assign(this,l),clearTimeout(this.tapTimeout),c<s.touch?document.removeEventListener("touchmove",this[onDistanceChange]):u>=r&&(document.removeEventListener("touchmove",this[onDistanceChange]),this[startDrag]())}[onTouchMove](e){if(!this.dragging)return;const{pageX:r,pageY:n}=touchCoords(e),s=document.elementFromPoint(r-window.scrollX,n-window.scrollY),a=new DragMoveSensorEvent({clientX:r,clientY:n,target:s,container:this.currentContainer,originalEvent:e});this.trigger(this.currentContainer,a)}[onTouchEnd](e){if(clearTimeout(this.tapTimeout),preventScrolling=!1,document.removeEventListener("touchend",this[onTouchEnd]),document.removeEventListener("touchcancel",this[onTouchEnd]),document.removeEventListener("touchmove",this[onDistanceChange]),this.currentContainer&&this.currentContainer.removeEventListener("contextmenu",onContextMenu),!this.dragging)return;document.removeEventListener("touchmove",this[onTouchMove]);const{pageX:r,pageY:n}=touchCoords(e),s=document.elementFromPoint(r-window.scrollX,n-window.scrollY);e.preventDefault();const a=new DragStopSensorEvent({clientX:r,clientY:n,target:s,container:this.currentContainer,originalEvent:e});this.trigger(this.currentContainer,a),this.currentContainer=null,this.dragging=!1,this.startEvent=null}}function onContextMenu(t){t.preventDefault(),t.stopPropagation()}class CollidableEvent extends AbstractEvent{constructor(e){super(e),this.data=e}get dragEvent(){return this.data.dragEvent}}CollidableEvent.type="collidable";class CollidableInEvent extends CollidableEvent{get collidingElement(){return this.data.collidingElement}}CollidableInEvent.type="collidable:in";class CollidableOutEvent extends CollidableEvent{get collidingElement(){return this.data.collidingElement}}CollidableOutEvent.type="collidable:out";function createAddInitializerMethod(t,e){return function(r){assertNotFinished(e,"addInitializer"),assertCallable(r,"An initializer"),t.push(r)}}function assertInstanceIfPrivate(t,e){if(!t(e))throw new TypeError("Attempted to access private element on non-instance")}function memberDec(t,e,r,n,s,a,l,c,u,f,y){var b;switch(a){case 1:b="accessor";break;case 2:b="method";break;case 3:b="getter";break;case 4:b="setter";break;default:b="field"}var g,v,S={kind:b,name:c?"#"+r:r,static:l,private:c,metadata:y},T={v:!1};if(a!==0&&(S.addInitializer=createAddInitializerMethod(s,T)),c||a!==0&&a!==2)if(a===2)g=function(A){return assertInstanceIfPrivate(f,A),n.value};else{var N=a===0||a===1;(N||a===3)&&(g=c?function(A){return assertInstanceIfPrivate(f,A),n.get.call(A)}:function(A){return n.get.call(A)}),(N||a===4)&&(v=c?function(A,I){assertInstanceIfPrivate(f,A),n.set.call(A,I)}:function(A,I){n.set.call(A,I)})}else g=function(A){return A[r]},a===0&&(v=function(A,I){A[r]=I});var w=c?f.bind():function(A){return r in A};S.access=g&&v?{get:g,set:v,has:w}:g?{get:g,has:w}:{set:v,has:w};try{return t.call(e,u,S)}finally{T.v=!0}}function assertNotFinished(t,e){if(t.v)throw new Error("attempted to call "+e+" after decoration was finished")}function assertCallable(t,e){if(typeof t!="function")throw new TypeError(e+" must be a function")}function assertValidReturnValue(t,e){var r=typeof e;if(t===1){if(r!=="object"||e===null)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0");e.get!==void 0&&assertCallable(e.get,"accessor.get"),e.set!==void 0&&assertCallable(e.set,"accessor.set"),e.init!==void 0&&assertCallable(e.init,"accessor.init")}else if(r!=="function"){var n;throw n=t===0?"field":t===5?"class":"method",new TypeError(n+" decorators must return a function or void 0")}}function curryThis1(t){return function(){return t(this)}}function curryThis2(t){return function(e){t(this,e)}}function applyMemberDec(t,e,r,n,s,a,l,c,u,f,y){var b,g,v,S,T,N,w=r[0];n||Array.isArray(w)||(w=[w]),c?b=a===0||a===1?{get:curryThis1(r[3]),set:curryThis2(r[4])}:a===3?{get:r[3]}:a===4?{set:r[3]}:{value:r[3]}:a!==0&&(b=Object.getOwnPropertyDescriptor(e,s)),a===1?v={get:b.get,set:b.set}:a===2?v=b.value:a===3?v=b.get:a===4&&(v=b.set);for(var A=n?2:1,I=w.length-1;I>=0;I-=A){var q;(S=memberDec(w[I],n?w[I-1]:void 0,s,b,u,a,l,c,v,f,y))!==void 0&&(assertValidReturnValue(a,S),a===0?q=S:a===1?(q=S.init,T=S.get||v.get,N=S.set||v.set,v={get:T,set:N}):v=S,q!==void 0&&(g===void 0?g=q:typeof g=="function"?g=[g,q]:g.push(q)))}if(a===0||a===1){if(g===void 0)g=function(J,Q){return Q};else if(typeof g!="function"){var V=g;g=function(J,Q){for(var se=Q,ie=V.length-1;ie>=0;ie--)se=V[ie].call(J,se);return se}}else{var K=g;g=function(J,Q){return K.call(J,Q)}}t.push(g)}a!==0&&(a===1?(b.get=v.get,b.set=v.set):a===2?b.value=v:a===3?b.get=v:a===4&&(b.set=v),c?a===1?(t.push(function(J,Q){return v.get.call(J,Q)}),t.push(function(J,Q){return v.set.call(J,Q)})):a===2?t.push(v):t.push(function(J,Q){return v.call(J,Q)}):Object.defineProperty(e,s,b))}function applyMemberDecs(t,e,r,n){for(var s,a,l,c=[],u=new Map,f=new Map,y=0;y<e.length;y++){var b=e[y];if(Array.isArray(b)){var g,v,S=b[1],T=b[2],N=b.length>3,w=16&S,A=!!(8&S),I=r;if(S&=7,A?(g=t,S!==0&&(v=a=a||[]),N&&!l&&(l=function(K){return _checkInRHS(K)===t}),I=l):(g=t.prototype,S!==0&&(v=s=s||[])),S!==0&&!N){var q=A?f:u,V=q.get(T)||0;if(V===!0||V===3&&S!==4||V===4&&S!==3)throw new Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+T);q.set(T,!(!V&&S>2)||S)}applyMemberDec(c,g,b,w,T,S,A,N,v,I,n)}}return pushInitializers(c,s),pushInitializers(c,a),c}function pushInitializers(t,e){e&&t.push(function(r){for(var n=0;n<e.length;n++)e[n].call(r);return r})}function applyClassDecs(t,e,r,n){if(e.length){for(var s=[],a=t,l=t.name,c=r?2:1,u=e.length-1;u>=0;u-=c){var f={v:!1};try{var y=e[u].call(r?e[u-1]:void 0,a,{kind:"class",name:l,addInitializer:createAddInitializerMethod(s,f),metadata:n})}finally{f.v=!0}y!==void 0&&(assertValidReturnValue(5,y),a=y)}return[defineMetadata(a,n),function(){for(var b=0;b<s.length;b++)s[b].call(a)}]}}function defineMetadata(t,e){return Object.defineProperty(t,Symbol.metadata||Symbol.for("Symbol.metadata"),{configurable:!0,enumerable:!0,value:e})}function _applyDecs2305(t,e,r,n,s,a){if(arguments.length>=6)var l=a[Symbol.metadata||Symbol.for("Symbol.metadata")];var c=Object.create(l===void 0?null:l),u=applyMemberDecs(t,e,s,c);return r.length||defineMetadata(t,c),{e:u,get c(){return applyClassDecs(t,r,n,c)}}}function _checkInRHS(t){if(Object(t)!==t)throw TypeError("right-hand side of 'in' should be an object, got "+(t!==null?typeof t:"null"));return t}function AutoBind(t,{name:e,addInitializer:r}){r(function(){this[e]=t.bind(this)})}function requestNextAnimationFrame(t){return requestAnimationFrame(()=>{requestAnimationFrame(t)})}class DragEvent extends AbstractEvent{constructor(e){super(e),this.data=e}get source(){return this.data.source}get originalSource(){return this.data.originalSource}get mirror(){return this.data.mirror}get sourceContainer(){return this.data.sourceContainer}get sensorEvent(){return this.data.sensorEvent}get originalEvent(){return this.sensorEvent?this.sensorEvent.originalEvent:null}}DragEvent.type="drag";class DragStartEvent extends DragEvent{}DragStartEvent.type="drag:start";DragStartEvent.cancelable=!0;class DragMoveEvent extends DragEvent{}DragMoveEvent.type="drag:move";class DragOverEvent extends DragEvent{get overContainer(){return this.data.overContainer}get over(){return this.data.over}}DragOverEvent.type="drag:over";DragOverEvent.cancelable=!0;function isDragOverEvent(t){return t.type===DragOverEvent.type}class DragOutEvent extends DragEvent{get overContainer(){return this.data.overContainer}get over(){return this.data.over}}DragOutEvent.type="drag:out";class DragOverContainerEvent extends DragEvent{get overContainer(){return this.data.overContainer}}DragOverContainerEvent.type="drag:over:container";class DragOutContainerEvent extends DragEvent{get overContainer(){return this.data.overContainer}}DragOutContainerEvent.type="drag:out:container";class DragPressureEvent extends DragEvent{get pressure(){return this.data.pressure}}DragPressureEvent.type="drag:pressure";class DragStopEvent extends DragEvent{}DragStopEvent.type="drag:stop";DragStopEvent.cancelable=!0;class DragStoppedEvent extends DragEvent{}DragStoppedEvent.type="drag:stopped";var _initProto$1,_class$1;class ResizeMirror extends AbstractPlugin{constructor(e){_initProto$1(super(e)),this.lastWidth=0,this.lastHeight=0,this.mirror=null}attach(){this.draggable.on("mirror:created",this.onMirrorCreated).on("drag:over",this.onDragOver).on("drag:over:container",this.onDragOver)}detach(){this.draggable.off("mirror:created",this.onMirrorCreated).off("mirror:destroy",this.onMirrorDestroy).off("drag:over",this.onDragOver).off("drag:over:container",this.onDragOver)}getOptions(){return this.draggable.options.resizeMirror||{}}onMirrorCreated({mirror:e}){this.mirror=e}onMirrorDestroy(){this.mirror=null}onDragOver(e){this.resize(e)}resize(e){requestAnimationFrame(()=>{let r=null;const{overContainer:n}=e;if(this.mirror==null||this.mirror.parentNode==null)return;this.mirror.parentNode!==n&&n.appendChild(this.mirror),isDragOverEvent(e)&&(r=e.over);const s=r||this.draggable.getDraggableElementsForContainer(n)[0];s&&requestNextAnimationFrame(()=>{const a=s.getBoundingClientRect();this.mirror==null||this.lastHeight===a.height&&this.lastWidth===a.width||(this.mirror.style.width=`${a.width}px`,this.mirror.style.height=`${a.height}px`,this.lastWidth=a.width,this.lastHeight=a.height)})})}}_class$1=ResizeMirror;[_initProto$1]=_applyDecs2305(_class$1,[[AutoBind,2,"onMirrorCreated"],[AutoBind,2,"onMirrorDestroy"],[AutoBind,2,"onDragOver"]],[],0,void 0,AbstractPlugin).e;class SnapEvent extends AbstractEvent{get dragEvent(){return this.data.dragEvent}get snappable(){return this.data.snappable}}SnapEvent.type="snap";class SnapInEvent extends SnapEvent{}SnapInEvent.type="snap:in";SnapInEvent.cancelable=!0;class SnapOutEvent extends SnapEvent{}SnapOutEvent.type="snap:out";SnapOutEvent.cancelable=!0;var _initProto,_class;const defaultOptions$5={duration:150,easingFunction:"ease-in-out",horizontal:!1};class SwapAnimation extends AbstractPlugin{constructor(e){_initProto(super(e)),this.options={...defaultOptions$5,...this.getOptions()},this.lastAnimationFrame=null}attach(){this.draggable.on("sortable:sorted",this.onSortableSorted)}detach(){this.draggable.off("sortable:sorted",this.onSortableSorted)}getOptions(){return this.draggable.options.swapAnimation||{}}onSortableSorted({oldIndex:e,newIndex:r,dragEvent:n}){const{source:s,over:a}=n;this.lastAnimationFrame&&cancelAnimationFrame(this.lastAnimationFrame),this.lastAnimationFrame=requestAnimationFrame(()=>{e>=r?animate(s,a,this.options):animate(a,s,this.options)})}}_class=SwapAnimation;[_initProto]=_applyDecs2305(_class,[[AutoBind,2,"onSortableSorted"]],[],0,void 0,AbstractPlugin).e;function animate(t,e,{duration:r,easingFunction:n,horizontal:s}){for(const a of[t,e])a.style.pointerEvents="none";if(s){const a=t.offsetWidth;t.style.transform=`translate3d(${a}px, 0, 0)`,e.style.transform=`translate3d(-${a}px, 0, 0)`}else{const a=t.offsetHeight;t.style.transform=`translate3d(0, ${a}px, 0)`,e.style.transform=`translate3d(0, -${a}px, 0)`}requestAnimationFrame(()=>{for(const a of[t,e])a.addEventListener("transitionend",resetElementOnTransitionEnd),a.style.transition=`transform ${r}ms ${n}`,a.style.transform=""})}function resetElementOnTransitionEnd(t){t.target==null||!isHTMLElement$1(t.target)||(t.target.style.transition="",t.target.style.pointerEvents="",t.target.removeEventListener("transitionend",resetElementOnTransitionEnd))}function isHTMLElement$1(t){return"style"in t}const onInitialize$1=Symbol("onInitialize"),onDestroy$1=Symbol("onDestroy"),announceEvent=Symbol("announceEvent"),announceMessage=Symbol("announceMessage"),ARIA_RELEVANT="aria-relevant",ARIA_ATOMIC="aria-atomic",ARIA_LIVE="aria-live",ROLE="role",defaultOptions$4={expire:7e3};class Announcement extends AbstractPlugin{constructor(e){super(e),this.options={...defaultOptions$4,...this.getOptions()},this.originalTriggerMethod=this.draggable.trigger,this[onInitialize$1]=this[onInitialize$1].bind(this),this[onDestroy$1]=this[onDestroy$1].bind(this)}attach(){this.draggable.on("draggable:initialize",this[onInitialize$1])}detach(){this.draggable.off("draggable:destroy",this[onDestroy$1])}getOptions(){return this.draggable.options.announcements||{}}[announceEvent](e){const r=this.options[e.type];r&&typeof r=="string"&&this[announceMessage](r),r&&typeof r=="function"&&this[announceMessage](r(e))}[announceMessage](e){announce(e,{expire:this.options.expire})}[onInitialize$1](){this.draggable.trigger=e=>{try{this[announceEvent](e)}finally{this.originalTriggerMethod.call(this.draggable,e)}}}[onDestroy$1](){this.draggable.trigger=this.originalTriggerMethod}}const liveRegion=createRegion();function announce(t,{expire:e}){const r=document.createElement("div");return r.textContent=t,liveRegion.appendChild(r),setTimeout(()=>{liveRegion.removeChild(r)},e)}function createRegion(){const t=document.createElement("div");return t.setAttribute("id","draggable-live-region"),t.setAttribute(ARIA_RELEVANT,"additions"),t.setAttribute(ARIA_ATOMIC,"true"),t.setAttribute(ARIA_LIVE,"assertive"),t.setAttribute(ROLE,"log"),t.style.position="fixed",t.style.width="1px",t.style.height="1px",t.style.top="-1px",t.style.overflow="hidden",t}document.addEventListener("DOMContentLoaded",()=>{document.body.appendChild(liveRegion)});const onInitialize=Symbol("onInitialize"),onDestroy=Symbol("onDestroy"),defaultOptions$3={};class Focusable extends AbstractPlugin{constructor(e){super(e),this.options={...defaultOptions$3,...this.getOptions()},this[onInitialize]=this[onInitialize].bind(this),this[onDestroy]=this[onDestroy].bind(this)}attach(){this.draggable.on("draggable:initialize",this[onInitialize]).on("draggable:destroy",this[onDestroy])}detach(){this.draggable.off("draggable:initialize",this[onInitialize]).off("draggable:destroy",this[onDestroy]),this[onDestroy]()}getOptions(){return this.draggable.options.focusable||{}}getElements(){return[...this.draggable.containers,...this.draggable.getDraggableElements()]}[onInitialize](){requestAnimationFrame(()=>{this.getElements().forEach(e=>decorateElement(e))})}[onDestroy](){requestAnimationFrame(()=>{this.getElements().forEach(e=>stripElement(e))})}}const elementsWithMissingTabIndex=[];function decorateElement(t){!t.getAttribute("tabindex")&&t.tabIndex===-1&&(elementsWithMissingTabIndex.push(t),t.tabIndex=0)}function stripElement(t){const e=elementsWithMissingTabIndex.indexOf(t);e!==-1&&(t.tabIndex=-1,elementsWithMissingTabIndex.splice(e,1))}class MirrorEvent extends AbstractEvent{constructor(e){super(e),this.data=e}get source(){return this.data.source}get originalSource(){return this.data.originalSource}get sourceContainer(){return this.data.sourceContainer}get sensorEvent(){return this.data.sensorEvent}get dragEvent(){return this.data.dragEvent}get originalEvent(){return this.sensorEvent?this.sensorEvent.originalEvent:null}}class MirrorCreateEvent extends MirrorEvent{}MirrorCreateEvent.type="mirror:create";class MirrorCreatedEvent extends MirrorEvent{get mirror(){return this.data.mirror}}MirrorCreatedEvent.type="mirror:created";class MirrorAttachedEvent extends MirrorEvent{get mirror(){return this.data.mirror}}MirrorAttachedEvent.type="mirror:attached";class MirrorMoveEvent extends MirrorEvent{get mirror(){return this.data.mirror}get passedThreshX(){return this.data.passedThreshX}get passedThreshY(){return this.data.passedThreshY}}MirrorMoveEvent.type="mirror:move";MirrorMoveEvent.cancelable=!0;class MirrorMovedEvent extends MirrorEvent{get mirror(){return this.data.mirror}get passedThreshX(){return this.data.passedThreshX}get passedThreshY(){return this.data.passedThreshY}}MirrorMovedEvent.type="mirror:moved";class MirrorDestroyEvent extends MirrorEvent{get mirror(){return this.data.mirror}}MirrorDestroyEvent.type="mirror:destroy";MirrorDestroyEvent.cancelable=!0;const onDragStart$3=Symbol("onDragStart"),onDragMove$2=Symbol("onDragMove"),onDragStop$3=Symbol("onDragStop"),onMirrorCreated=Symbol("onMirrorCreated"),onMirrorMove=Symbol("onMirrorMove"),onScroll=Symbol("onScroll"),getAppendableContainer=Symbol("getAppendableContainer"),defaultOptions$2={constrainDimensions:!1,xAxis:!0,yAxis:!0,cursorOffsetX:null,cursorOffsetY:null,thresholdX:null,thresholdY:null};class Mirror extends AbstractPlugin{constructor(e){super(e),this.options={...defaultOptions$2,...this.getOptions()},this.scrollOffset={x:0,y:0},this.initialScrollOffset={x:window.scrollX,y:window.scrollY},this[onDragStart$3]=this[onDragStart$3].bind(this),this[onDragMove$2]=this[onDragMove$2].bind(this),this[onDragStop$3]=this[onDragStop$3].bind(this),this[onMirrorCreated]=this[onMirrorCreated].bind(this),this[onMirrorMove]=this[onMirrorMove].bind(this),this[onScroll]=this[onScroll].bind(this)}attach(){this.draggable.on("drag:start",this[onDragStart$3]).on("drag:move",this[onDragMove$2]).on("drag:stop",this[onDragStop$3]).on("mirror:created",this[onMirrorCreated]).on("mirror:move",this[onMirrorMove])}detach(){this.draggable.off("drag:start",this[onDragStart$3]).off("drag:move",this[onDragMove$2]).off("drag:stop",this[onDragStop$3]).off("mirror:created",this[onMirrorCreated]).off("mirror:move",this[onMirrorMove])}getOptions(){return this.draggable.options.mirror||{}}[onDragStart$3](e){if(e.canceled())return;"ontouchstart"in window&&document.addEventListener("scroll",this[onScroll],!0),this.initialScrollOffset={x:window.scrollX,y:window.scrollY};const{source:r,originalSource:n,sourceContainer:s,sensorEvent:a}=e;this.lastMirrorMovedClient={x:a.clientX,y:a.clientY};const l=new MirrorCreateEvent({source:r,originalSource:n,sourceContainer:s,sensorEvent:a,dragEvent:e});if(this.draggable.trigger(l),isNativeDragEvent(a)||l.canceled())return;const c=this[getAppendableContainer](r)||s;this.mirror=r.cloneNode(!0);const u=new MirrorCreatedEvent({source:r,originalSource:n,sourceContainer:s,sensorEvent:a,dragEvent:e,mirror:this.mirror}),f=new MirrorAttachedEvent({source:r,originalSource:n,sourceContainer:s,sensorEvent:a,dragEvent:e,mirror:this.mirror});this.draggable.trigger(u),c.appendChild(this.mirror),this.draggable.trigger(f)}[onDragMove$2](e){if(!this.mirror||e.canceled())return;const{source:r,originalSource:n,sourceContainer:s,sensorEvent:a}=e;let l=!0,c=!0;if(this.options.thresholdX||this.options.thresholdY){const{x:f,y}=this.lastMirrorMovedClient;if(Math.abs(f-a.clientX)<this.options.thresholdX?l=!1:this.lastMirrorMovedClient.x=a.clientX,Math.abs(y-a.clientY)<this.options.thresholdY?c=!1:this.lastMirrorMovedClient.y=a.clientY,!l&&!c)return}const u=new MirrorMoveEvent({source:r,originalSource:n,sourceContainer:s,sensorEvent:a,dragEvent:e,mirror:this.mirror,passedThreshX:l,passedThreshY:c});this.draggable.trigger(u)}[onDragStop$3](e){if("ontouchstart"in window&&document.removeEventListener("scroll",this[onScroll],!0),this.initialScrollOffset={x:0,y:0},this.scrollOffset={x:0,y:0},!this.mirror)return;const{source:r,sourceContainer:n,sensorEvent:s}=e,a=new MirrorDestroyEvent({source:r,mirror:this.mirror,sourceContainer:n,sensorEvent:s,dragEvent:e});this.draggable.trigger(a),a.canceled()||this.mirror.remove()}[onScroll](){this.scrollOffset={x:window.scrollX-this.initialScrollOffset.x,y:window.scrollY-this.initialScrollOffset.y}}[onMirrorCreated]({mirror:e,source:r,sensorEvent:n}){const s=this.draggable.getClassNamesFor("mirror"),a=({mirrorOffset:c,initialX:u,initialY:f,...y})=>(this.mirrorOffset=c,this.initialX=u,this.initialY=f,this.lastMovedX=u,this.lastMovedY=f,{mirrorOffset:c,initialX:u,initialY:f,...y});e.style.display="none";const l={mirror:e,source:r,sensorEvent:n,mirrorClasses:s,scrollOffset:this.scrollOffset,options:this.options,passedThreshX:!0,passedThreshY:!0};return Promise.resolve(l).then(computeMirrorDimensions).then(calculateMirrorOffset).then(resetMirror).then(addMirrorClasses).then(positionMirror({initial:!0})).then(removeMirrorID).then(a)}[onMirrorMove](e){if(e.canceled())return null;const r=({lastMovedX:a,lastMovedY:l,...c})=>(this.lastMovedX=a,this.lastMovedY=l,{lastMovedX:a,lastMovedY:l,...c}),n=a=>{const l=new MirrorMovedEvent({source:e.source,originalSource:e.originalSource,sourceContainer:e.sourceContainer,sensorEvent:e.sensorEvent,dragEvent:e.dragEvent,mirror:this.mirror,passedThreshX:e.passedThreshX,passedThreshY:e.passedThreshY});return this.draggable.trigger(l),a},s={mirror:e.mirror,sensorEvent:e.sensorEvent,mirrorOffset:this.mirrorOffset,options:this.options,initialX:this.initialX,initialY:this.initialY,scrollOffset:this.scrollOffset,passedThreshX:e.passedThreshX,passedThreshY:e.passedThreshY,lastMovedX:this.lastMovedX,lastMovedY:this.lastMovedY};return Promise.resolve(s).then(positionMirror({raf:!0})).then(r).then(n)}[getAppendableContainer](e){const r=this.options.appendTo;return typeof r=="string"?document.querySelector(r):r instanceof HTMLElement?r:typeof r=="function"?r(e):e.parentNode}}function computeMirrorDimensions({source:t,...e}){return withPromise(r=>{const n=t.getBoundingClientRect();r({source:t,sourceRect:n,...e})})}function calculateMirrorOffset({sensorEvent:t,sourceRect:e,options:r,...n}){return withPromise(s=>{const a=r.cursorOffsetY===null?t.clientY-e.top:r.cursorOffsetY,l=r.cursorOffsetX===null?t.clientX-e.left:r.cursorOffsetX;s({sensorEvent:t,sourceRect:e,mirrorOffset:{top:a,left:l},options:r,...n})})}function resetMirror({mirror:t,source:e,options:r,...n}){return withPromise(s=>{let a,l;if(r.constrainDimensions){const c=getComputedStyle(e);a=c.getPropertyValue("height"),l=c.getPropertyValue("width")}t.style.display=null,t.style.position="fixed",t.style.pointerEvents="none",t.style.top=0,t.style.left=0,t.style.margin=0,r.constrainDimensions&&(t.style.height=a,t.style.width=l),s({mirror:t,source:e,options:r,...n})})}function addMirrorClasses({mirror:t,mirrorClasses:e,...r}){return withPromise(n=>{t.classList.add(...e),n({mirror:t,mirrorClasses:e,...r})})}function removeMirrorID({mirror:t,...e}){return withPromise(r=>{t.removeAttribute("id"),delete t.id,r({mirror:t,...e})})}function positionMirror({withFrame:t=!1,initial:e=!1}={}){return({mirror:r,sensorEvent:n,mirrorOffset:s,initialY:a,initialX:l,scrollOffset:c,options:u,passedThreshX:f,passedThreshY:y,lastMovedX:b,lastMovedY:g,...v})=>withPromise(S=>{const T={mirror:r,sensorEvent:n,mirrorOffset:s,options:u,...v};if(s){const N=f?Math.round((n.clientX-s.left-c.x)/(u.thresholdX||1))*(u.thresholdX||1):Math.round(b),w=y?Math.round((n.clientY-s.top-c.y)/(u.thresholdY||1))*(u.thresholdY||1):Math.round(g);u.xAxis&&u.yAxis||e?r.style.transform=`translate3d(${N}px, ${w}px, 0)`:u.xAxis&&!u.yAxis?r.style.transform=`translate3d(${N}px, ${a}px, 0)`:u.yAxis&&!u.xAxis&&(r.style.transform=`translate3d(${l}px, ${w}px, 0)`),e&&(T.initialX=N,T.initialY=w),T.lastMovedX=N,T.lastMovedY=w}S(T)},{frame:t})}function withPromise(t,{raf:e=!1}={}){return new Promise((r,n)=>{e?requestAnimationFrame(()=>{t(r,n)}):t(r,n)})}function isNativeDragEvent(t){return/^drag/.test(t.originalEvent.type)}const onDragStart$2=Symbol("onDragStart"),onDragMove$1=Symbol("onDragMove"),onDragStop$2=Symbol("onDragStop"),scroll=Symbol("scroll"),defaultOptions$1={speed:6,sensitivity:50,scrollableElements:[]};class Scrollable extends AbstractPlugin{constructor(e){super(e),this.options={...defaultOptions$1,...this.getOptions()},this.currentMousePosition=null,this.scrollAnimationFrame=null,this.scrollableElement=null,this.findScrollableElementFrame=null,this[onDragStart$2]=this[onDragStart$2].bind(this),this[onDragMove$1]=this[onDragMove$1].bind(this),this[onDragStop$2]=this[onDragStop$2].bind(this),this[scroll]=this[scroll].bind(this)}attach(){this.draggable.on("drag:start",this[onDragStart$2]).on("drag:move",this[onDragMove$1]).on("drag:stop",this[onDragStop$2])}detach(){this.draggable.off("drag:start",this[onDragStart$2]).off("drag:move",this[onDragMove$1]).off("drag:stop",this[onDragStop$2])}getOptions(){return this.draggable.options.scrollable||{}}getScrollableElement(e){return this.hasDefinedScrollableElements()?closest(e,this.options.scrollableElements)||document.documentElement:closestScrollableElement(e)}hasDefinedScrollableElements(){return this.options.scrollableElements.length!==0}[onDragStart$2](e){this.findScrollableElementFrame=requestAnimationFrame(()=>{this.scrollableElement=this.getScrollableElement(e.source)})}[onDragMove$1](e){if(this.findScrollableElementFrame=requestAnimationFrame(()=>{this.scrollableElement=this.getScrollableElement(e.sensorEvent.target)}),!this.scrollableElement)return;const r=e.sensorEvent,n={x:0,y:0};"ontouchstart"in window&&(n.y=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,n.x=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),this.currentMousePosition={clientX:r.clientX-n.x,clientY:r.clientY-n.y},this.scrollAnimationFrame=requestAnimationFrame(this[scroll])}[onDragStop$2](){cancelAnimationFrame(this.scrollAnimationFrame),cancelAnimationFrame(this.findScrollableElementFrame),this.scrollableElement=null,this.scrollAnimationFrame=null,this.findScrollableElementFrame=null,this.currentMousePosition=null}[scroll](){if(!this.scrollableElement||!this.currentMousePosition)return;cancelAnimationFrame(this.scrollAnimationFrame);const{speed:e,sensitivity:r}=this.options,n=this.scrollableElement.getBoundingClientRect(),s=n.bottom>window.innerHeight,l=n.top<0||s,c=getDocumentScrollingElement(),u=this.scrollableElement,f=this.currentMousePosition.clientX,y=this.currentMousePosition.clientY;if(u!==document.body&&u!==document.documentElement&&!l){const{offsetHeight:b,offsetWidth:g}=u;n.top+b-y<r?u.scrollTop+=e:y-n.top<r&&(u.scrollTop-=e),n.left+g-f<r?u.scrollLeft+=e:f-n.left<r&&(u.scrollLeft-=e)}else{const{innerHeight:b,innerWidth:g}=window;y<r?c.scrollTop-=e:b-y<r&&(c.scrollTop+=e),f<r?c.scrollLeft-=e:g-f<r&&(c.scrollLeft+=e)}this.scrollAnimationFrame=requestAnimationFrame(this[scroll])}}function hasOverflow(t){const e=/(auto|scroll)/,r=getComputedStyle(t,null),n=r.getPropertyValue("overflow")+r.getPropertyValue("overflow-y")+r.getPropertyValue("overflow-x");return e.test(n)}function isStaticallyPositioned(t){return getComputedStyle(t).getPropertyValue("position")==="static"}function closestScrollableElement(t){if(!t)return getDocumentScrollingElement();const e=getComputedStyle(t).getPropertyValue("position"),r=e==="absolute",n=closest(t,s=>r&&isStaticallyPositioned(s)?!1:hasOverflow(s));return e==="fixed"||!n?getDocumentScrollingElement():n}function getDocumentScrollingElement(){return document.scrollingElement||document.documentElement}class Emitter{constructor(){this.callbacks={}}on(e,...r){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(...r),this}off(e,r){if(!this.callbacks[e])return null;const n=this.callbacks[e].slice(0);for(let s=0;s<n.length;s++)r===n[s]&&this.callbacks[e].splice(s,1);return this}trigger(e){if(!this.callbacks[e.type])return null;const r=[...this.callbacks[e.type]],n=[];for(let s=r.length-1;s>=0;s--){const a=r[s];try{a(e)}catch(l){n.push(l)}}return n.length&&console.error(`Draggable caught errors while triggering '${e.type}'`,n),this}}class DraggableEvent extends AbstractEvent{get draggable(){return this.data.draggable}}DraggableEvent.type="draggable";class DraggableInitializedEvent extends DraggableEvent{}DraggableInitializedEvent.type="draggable:initialize";class DraggableDestroyEvent extends DraggableEvent{}DraggableDestroyEvent.type="draggable:destroy";const onDragStart$1=Symbol("onDragStart"),onDragMove=Symbol("onDragMove"),onDragStop$1=Symbol("onDragStop"),onDragPressure=Symbol("onDragPressure"),dragStop=Symbol("dragStop"),defaultAnnouncements$1={"drag:start":t=>`Picked up ${t.source.textContent.trim()||t.source.id||"draggable element"}`,"drag:stop":t=>`Released ${t.source.textContent.trim()||t.source.id||"draggable element"}`},defaultClasses={"container:dragging":"draggable-container--is-dragging","source:dragging":"draggable-source--is-dragging","source:placed":"draggable-source--placed","container:placed":"draggable-container--placed","body:dragging":"draggable--is-dragging","draggable:over":"draggable--over","container:over":"draggable-container--over","source:original":"draggable--original",mirror:"draggable-mirror"},defaultOptions={draggable:".draggable-source",handle:null,delay:{},distance:0,placedTimeout:800,plugins:[],sensors:[],exclude:{plugins:[],sensors:[]}};class Draggable{constructor(e=[document.body],r={}){if(e instanceof NodeList||e instanceof Array)this.containers=[...e];else if(e instanceof HTMLElement)this.containers=[e];else throw new Error("Draggable containers are expected to be of type `NodeList`, `HTMLElement[]` or `HTMLElement`");this.options={...defaultOptions,...r,classes:{...defaultClasses,...r.classes||{}},announcements:{...defaultAnnouncements$1,...r.announcements||{}},exclude:{plugins:r.exclude&&r.exclude.plugins||[],sensors:r.exclude&&r.exclude.sensors||[]}},this.emitter=new Emitter,this.dragging=!1,this.plugins=[],this.sensors=[],this[onDragStart$1]=this[onDragStart$1].bind(this),this[onDragMove]=this[onDragMove].bind(this),this[onDragStop$1]=this[onDragStop$1].bind(this),this[onDragPressure]=this[onDragPressure].bind(this),this[dragStop]=this[dragStop].bind(this),document.addEventListener("drag:start",this[onDragStart$1],!0),document.addEventListener("drag:move",this[onDragMove],!0),document.addEventListener("drag:stop",this[onDragStop$1],!0),document.addEventListener("drag:pressure",this[onDragPressure],!0);const n=Object.values(Draggable.Plugins).filter(l=>!this.options.exclude.plugins.includes(l)),s=Object.values(Draggable.Sensors).filter(l=>!this.options.exclude.sensors.includes(l));this.addPlugin(...n,...this.options.plugins),this.addSensor(...s,...this.options.sensors);const a=new DraggableInitializedEvent({draggable:this});this.on("mirror:created",({mirror:l})=>this.mirror=l),this.on("mirror:destroy",()=>this.mirror=null),this.trigger(a)}destroy(){document.removeEventListener("drag:start",this[onDragStart$1],!0),document.removeEventListener("drag:move",this[onDragMove],!0),document.removeEventListener("drag:stop",this[onDragStop$1],!0),document.removeEventListener("drag:pressure",this[onDragPressure],!0);const e=new DraggableDestroyEvent({draggable:this});this.trigger(e),this.removePlugin(...this.plugins.map(r=>r.constructor)),this.removeSensor(...this.sensors.map(r=>r.constructor))}addPlugin(...e){const r=e.map(n=>new n(this));return r.forEach(n=>n.attach()),this.plugins=[...this.plugins,...r],this}removePlugin(...e){return this.plugins.filter(n=>e.includes(n.constructor)).forEach(n=>n.detach()),this.plugins=this.plugins.filter(n=>!e.includes(n.constructor)),this}addSensor(...e){const r=e.map(n=>new n(this.containers,this.options));return r.forEach(n=>n.attach()),this.sensors=[...this.sensors,...r],this}removeSensor(...e){return this.sensors.filter(n=>e.includes(n.constructor)).forEach(n=>n.detach()),this.sensors=this.sensors.filter(n=>!e.includes(n.constructor)),this}addContainer(...e){return this.containers=[...this.containers,...e],this.sensors.forEach(r=>r.addContainer(...e)),this}removeContainer(...e){return this.containers=this.containers.filter(r=>!e.includes(r)),this.sensors.forEach(r=>r.removeContainer(...e)),this}on(e,...r){return this.emitter.on(e,...r),this}off(e,r){return this.emitter.off(e,r),this}trigger(e){return this.emitter.trigger(e),this}getClassNameFor(e){return this.getClassNamesFor(e)[0]}getClassNamesFor(e){const r=this.options.classes[e];return r instanceof Array?r:typeof r=="string"||r instanceof String?[r]:[]}isDragging(){return!!this.dragging}getDraggableElements(){return this.containers.reduce((e,r)=>[...e,...this.getDraggableElementsForContainer(r)],[])}getDraggableElementsForContainer(e){return[...e.querySelectorAll(this.options.draggable)].filter(n=>n!==this.originalSource&&n!==this.mirror)}cancel(){this[dragStop]()}[onDragStart$1](e){const r=getSensorEvent(e),{target:n,container:s,originalSource:a}=r;if(!this.containers.includes(s))return;if(this.options.handle&&n&&!closest(n,this.options.handle)){r.cancel();return}this.originalSource=a,this.sourceContainer=s,this.lastPlacedSource&&this.lastPlacedContainer&&(clearTimeout(this.placedTimeoutID),this.lastPlacedSource.classList.remove(...this.getClassNamesFor("source:placed")),this.lastPlacedContainer.classList.remove(...this.getClassNamesFor("container:placed"))),this.source=this.originalSource.cloneNode(!0),this.originalSource.parentNode.insertBefore(this.source,this.originalSource),this.originalSource.style.display="none";const l=new DragStartEvent({source:this.source,originalSource:this.originalSource,sourceContainer:s,sensorEvent:r});if(this.trigger(l),this.dragging=!l.canceled(),l.canceled()){this.source.remove(),this.originalSource.style.display=null;return}this.originalSource.classList.add(...this.getClassNamesFor("source:original")),this.source.classList.add(...this.getClassNamesFor("source:dragging")),this.sourceContainer.classList.add(...this.getClassNamesFor("container:dragging")),document.body.classList.add(...this.getClassNamesFor("body:dragging")),applyUserSelect(document.body,"none"),requestAnimationFrame(()=>{const u=getSensorEvent(e).clone({target:this.source});this[onDragMove]({...e,detail:u})})}[onDragMove](e){if(!this.dragging)return;const r=getSensorEvent(e),{container:n}=r;let s=r.target;const a=new DragMoveEvent({source:this.source,originalSource:this.originalSource,sourceContainer:n,sensorEvent:r});this.trigger(a),a.canceled()&&r.cancel(),s=closest(s,this.options.draggable);const l=closest(r.target,this.containers),c=r.overContainer||l,u=this.currentOverContainer&&c!==this.currentOverContainer,f=this.currentOver&&s!==this.currentOver,y=c&&this.currentOverContainer!==c,b=l&&s&&this.currentOver!==s;if(f){const g=new DragOutEvent({source:this.source,originalSource:this.originalSource,sourceContainer:n,sensorEvent:r,over:this.currentOver,overContainer:this.currentOverContainer});this.currentOver.classList.remove(...this.getClassNamesFor("draggable:over")),this.currentOver=null,this.trigger(g)}if(u){const g=new DragOutContainerEvent({source:this.source,originalSource:this.originalSource,sourceContainer:n,sensorEvent:r,overContainer:this.currentOverContainer});this.currentOverContainer.classList.remove(...this.getClassNamesFor("container:over")),this.currentOverContainer=null,this.trigger(g)}if(y){c.classList.add(...this.getClassNamesFor("container:over"));const g=new DragOverContainerEvent({source:this.source,originalSource:this.originalSource,sourceContainer:n,sensorEvent:r,overContainer:c});this.currentOverContainer=c,this.trigger(g)}if(b){s.classList.add(...this.getClassNamesFor("draggable:over"));const g=new DragOverEvent({source:this.source,originalSource:this.originalSource,sourceContainer:n,sensorEvent:r,overContainer:c,over:s});this.currentOver=s,this.trigger(g)}}[dragStop](e){if(!this.dragging)return;this.dragging=!1;const r=new DragStopEvent({source:this.source,originalSource:this.originalSource,sensorEvent:e?e.sensorEvent:null,sourceContainer:this.sourceContainer});this.trigger(r),r.canceled()||this.source.parentNode.insertBefore(this.originalSource,this.source),this.source.remove(),this.originalSource.style.display="",this.source.classList.remove(...this.getClassNamesFor("source:dragging")),this.originalSource.classList.remove(...this.getClassNamesFor("source:original")),this.originalSource.classList.add(...this.getClassNamesFor("source:placed")),this.sourceContainer.classList.add(...this.getClassNamesFor("container:placed")),this.sourceContainer.classList.remove(...this.getClassNamesFor("container:dragging")),document.body.classList.remove(...this.getClassNamesFor("body:dragging")),applyUserSelect(document.body,""),this.currentOver&&this.currentOver.classList.remove(...this.getClassNamesFor("draggable:over")),this.currentOverContainer&&this.currentOverContainer.classList.remove(...this.getClassNamesFor("container:over")),this.lastPlacedSource=this.originalSource,this.lastPlacedContainer=this.sourceContainer,this.placedTimeoutID=setTimeout(()=>{this.lastPlacedSource&&this.lastPlacedSource.classList.remove(...this.getClassNamesFor("source:placed")),this.lastPlacedContainer&&this.lastPlacedContainer.classList.remove(...this.getClassNamesFor("container:placed")),this.lastPlacedSource=null,this.lastPlacedContainer=null},this.options.placedTimeout);const n=new DragStoppedEvent({source:this.source,originalSource:this.originalSource,sensorEvent:e?e.sensorEvent:null,sourceContainer:this.sourceContainer});this.trigger(n),this.source=null,this.originalSource=null,this.currentOverContainer=null,this.currentOver=null,this.sourceContainer=null}[onDragStop$1](e){this[dragStop](e)}[onDragPressure](e){if(!this.dragging)return;const r=getSensorEvent(e),n=this.source||closest(r.originalEvent.target,this.options.draggable),s=new DragPressureEvent({sensorEvent:r,source:n,pressure:r.pressure});this.trigger(s)}}Draggable.Plugins={Announcement,Focusable,Mirror,Scrollable};Draggable.Sensors={MouseSensor,TouchSensor};function getSensorEvent(t){return t.detail}function applyUserSelect(t,e){t.style.webkitUserSelect=e,t.style.mozUserSelect=e,t.style.msUserSelect=e,t.style.oUserSelect=e,t.style.userSelect=e}class DroppableEvent extends AbstractEvent{constructor(e){super(e),this.data=e}get dragEvent(){return this.data.dragEvent}}DroppableEvent.type="droppable";class DroppableStartEvent extends DroppableEvent{get dropzone(){return this.data.dropzone}}DroppableStartEvent.type="droppable:start";DroppableStartEvent.cancelable=!0;class DroppableDroppedEvent extends DroppableEvent{get dropzone(){return this.data.dropzone}}DroppableDroppedEvent.type="droppable:dropped";DroppableDroppedEvent.cancelable=!0;class DroppableReturnedEvent extends DroppableEvent{get dropzone(){return this.data.dropzone}}DroppableReturnedEvent.type="droppable:returned";DroppableReturnedEvent.cancelable=!0;class DroppableStopEvent extends DroppableEvent{get dropzone(){return this.data.dropzone}}DroppableStopEvent.type="droppable:stop";DroppableStopEvent.cancelable=!0;class SwappableEvent extends AbstractEvent{constructor(e){super(e),this.data=e}get dragEvent(){return this.data.dragEvent}}SwappableEvent.type="swappable";class SwappableStartEvent extends SwappableEvent{}SwappableStartEvent.type="swappable:start";SwappableStartEvent.cancelable=!0;class SwappableSwapEvent extends SwappableEvent{get over(){return this.data.over}get overContainer(){return this.data.overContainer}}SwappableSwapEvent.type="swappable:swap";SwappableSwapEvent.cancelable=!0;class SwappableSwappedEvent extends SwappableEvent{get swappedElement(){return this.data.swappedElement}}SwappableSwappedEvent.type="swappable:swapped";class SwappableStopEvent extends SwappableEvent{}SwappableStopEvent.type="swappable:stop";class SortableEvent extends AbstractEvent{constructor(e){super(e),this.data=e}get dragEvent(){return this.data.dragEvent}}SortableEvent.type="sortable";class SortableStartEvent extends SortableEvent{get startIndex(){return this.data.startIndex}get startContainer(){return this.data.startContainer}}SortableStartEvent.type="sortable:start";SortableStartEvent.cancelable=!0;class SortableSortEvent extends SortableEvent{get currentIndex(){return this.data.currentIndex}get over(){return this.data.over}get overContainer(){return this.data.dragEvent.overContainer}}SortableSortEvent.type="sortable:sort";SortableSortEvent.cancelable=!0;class SortableSortedEvent extends SortableEvent{get oldIndex(){return this.data.oldIndex}get newIndex(){return this.data.newIndex}get oldContainer(){return this.data.oldContainer}get newContainer(){return this.data.newContainer}}SortableSortedEvent.type="sortable:sorted";class SortableStopEvent extends SortableEvent{get oldIndex(){return this.data.oldIndex}get newIndex(){return this.data.newIndex}get oldContainer(){return this.data.oldContainer}get newContainer(){return this.data.newContainer}}SortableStopEvent.type="sortable:stop";const onDragStart=Symbol("onDragStart"),onDragOverContainer=Symbol("onDragOverContainer"),onDragOver=Symbol("onDragOver"),onDragStop=Symbol("onDragStop");function onSortableSortedDefaultAnnouncement({dragEvent:t}){const e=t.source.textContent.trim()||t.source.id||"sortable element";if(t.over){const r=t.over.textContent.trim()||t.over.id||"sortable element";return t.source.compareDocumentPosition(t.over)&Node.DOCUMENT_POSITION_FOLLOWING?`Placed ${e} after ${r}`:`Placed ${e} before ${r}`}else return`Placed ${e} into a different container`}const defaultAnnouncements={"sortable:sorted":onSortableSortedDefaultAnnouncement};class Sortable extends Draggable{constructor(e=[],r={}){super(e,{...r,announcements:{...defaultAnnouncements,...r.announcements||{}}}),this.startIndex=null,this.startContainer=null,this[onDragStart]=this[onDragStart].bind(this),this[onDragOverContainer]=this[onDragOverContainer].bind(this),this[onDragOver]=this[onDragOver].bind(this),this[onDragStop]=this[onDragStop].bind(this),this.on("drag:start",this[onDragStart]).on("drag:over:container",this[onDragOverContainer]).on("drag:over",this[onDragOver]).on("drag:stop",this[onDragStop])}destroy(){super.destroy(),this.off("drag:start",this[onDragStart]).off("drag:over:container",this[onDragOverContainer]).off("drag:over",this[onDragOver]).off("drag:stop",this[onDragStop])}index(e){return this.getSortableElementsForContainer(e.parentNode).indexOf(e)}getSortableElementsForContainer(e){return[...e.querySelectorAll(this.options.draggable)].filter(n=>n!==this.originalSource&&n!==this.mirror&&n.parentNode===e)}[onDragStart](e){this.startContainer=e.source.parentNode,this.startIndex=this.index(e.source);const r=new SortableStartEvent({dragEvent:e,startIndex:this.startIndex,startContainer:this.startContainer});this.trigger(r),r.canceled()&&e.cancel()}[onDragOverContainer](e){if(e.canceled())return;const{source:r,over:n,overContainer:s}=e,a=this.index(r),l=new SortableSortEvent({dragEvent:e,currentIndex:a,source:r,over:n});if(this.trigger(l),l.canceled())return;const c=this.getSortableElementsForContainer(s),u=move$1({source:r,over:n,overContainer:s,children:c});if(!u)return;const{oldContainer:f,newContainer:y}=u,b=this.index(e.source),g=new SortableSortedEvent({dragEvent:e,oldIndex:a,newIndex:b,oldContainer:f,newContainer:y});this.trigger(g)}[onDragOver](e){if(e.over===e.originalSource||e.over===e.source)return;const{source:r,over:n,overContainer:s}=e,a=this.index(r),l=new SortableSortEvent({dragEvent:e,currentIndex:a,source:r,over:n});if(this.trigger(l),l.canceled())return;const c=this.getDraggableElementsForContainer(s),u=move$1({source:r,over:n,overContainer:s,children:c});if(!u)return;const{oldContainer:f,newContainer:y}=u,b=this.index(r),g=new SortableSortedEvent({dragEvent:e,oldIndex:a,newIndex:b,oldContainer:f,newContainer:y});this.trigger(g)}[onDragStop](e){const r=new SortableStopEvent({dragEvent:e,oldIndex:this.startIndex,newIndex:this.index(e.source),oldContainer:this.startContainer,newContainer:e.source.parentNode});this.trigger(r),this.startIndex=null,this.startContainer=null}}function index(t){return Array.prototype.indexOf.call(t.parentNode.children,t)}function move$1({source:t,over:e,overContainer:r,children:n}){const s=!n.length,a=t.parentNode!==r,l=e&&t.parentNode===e.parentNode;return s?moveInsideEmptyContainer(t,r):l?moveWithinContainer(t,e):a?moveOutsideContainer(t,e,r):null}function moveInsideEmptyContainer(t,e){const r=t.parentNode;return e.appendChild(t),{oldContainer:r,newContainer:e}}function moveWithinContainer(t,e){const r=index(t),n=index(e);return r<n?t.parentNode.insertBefore(t,e.nextElementSibling):t.parentNode.insertBefore(t,e),{oldContainer:t.parentNode,newContainer:t.parentNode}}function moveOutsideContainer(t,e,r){const n=t.parentNode;return e?e.parentNode.insertBefore(t,e):r.appendChild(t),{oldContainer:n,newContainer:t.parentNode}}const min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=t=>({x:t,y:t}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function evaluate(t,e){return typeof t=="function"?t(e):t}function getSide(t){return t.split("-")[0]}function getAlignment(t){return t.split("-")[1]}function getOppositeAxis(t){return t==="x"?"y":"x"}function getAxisLength(t){return t==="y"?"height":"width"}function getSideAxis(t){return["top","bottom"].includes(getSide(t))?"y":"x"}function getAlignmentAxis(t){return getOppositeAxis(getSideAxis(t))}function getAlignmentSides(t,e,r){r===void 0&&(r=!1);const n=getAlignment(t),s=getAlignmentAxis(t),a=getAxisLength(s);let l=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(l=getOppositePlacement(l)),[l,getOppositePlacement(l)]}function getExpandedPlacements(t){const e=getOppositePlacement(t);return[getOppositeAlignmentPlacement(t),e,getOppositeAlignmentPlacement(e)]}function getOppositeAlignmentPlacement(t){return t.replace(/start|end/g,e=>oppositeAlignmentMap[e])}function getSideList(t,e,r){const n=["left","right"],s=["right","left"],a=["top","bottom"],l=["bottom","top"];switch(t){case"top":case"bottom":return r?e?s:n:e?n:s;case"left":case"right":return e?a:l;default:return[]}}function getOppositeAxisPlacements(t,e,r,n){const s=getAlignment(t);let a=getSideList(getSide(t),r==="start",n);return s&&(a=a.map(l=>l+"-"+s),e&&(a=a.concat(a.map(getOppositeAlignmentPlacement)))),a}function getOppositePlacement(t){return t.replace(/left|right|bottom|top/g,e=>oppositeSideMap[e])}function expandPaddingObject(t){return{top:0,right:0,bottom:0,left:0,...t}}function getPaddingObject(t){return typeof t!="number"?expandPaddingObject(t):{top:t,right:t,bottom:t,left:t}}function rectToClientRect(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function computeCoordsFromPlacement(t,e,r){let{reference:n,floating:s}=t;const a=getSideAxis(e),l=getAlignmentAxis(e),c=getAxisLength(l),u=getSide(e),f=a==="y",y=n.x+n.width/2-s.width/2,b=n.y+n.height/2-s.height/2,g=n[c]/2-s[c]/2;let v;switch(u){case"top":v={x:y,y:n.y-s.height};break;case"bottom":v={x:y,y:n.y+n.height};break;case"right":v={x:n.x+n.width,y:b};break;case"left":v={x:n.x-s.width,y:b};break;default:v={x:n.x,y:n.y}}switch(getAlignment(e)){case"start":v[l]-=g*(r&&f?-1:1);break;case"end":v[l]+=g*(r&&f?-1:1);break}return v}const computePosition$1=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:l}=r,c=a.filter(Boolean),u=await(l.isRTL==null?void 0:l.isRTL(e));let f=await l.getElementRects({reference:t,floating:e,strategy:s}),{x:y,y:b}=computeCoordsFromPlacement(f,n,u),g=n,v={},S=0;for(let T=0;T<c.length;T++){const{name:N,fn:w}=c[T],{x:A,y:I,data:q,reset:V}=await w({x:y,y:b,initialPlacement:n,placement:g,strategy:s,middlewareData:v,rects:f,platform:l,elements:{reference:t,floating:e}});if(y=A??y,b=I??b,v={...v,[N]:{...v[N],...q}},V&&S<=50){S++,typeof V=="object"&&(V.placement&&(g=V.placement),V.rects&&(f=V.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:s}):V.rects),{x:y,y:b}=computeCoordsFromPlacement(f,g,u)),T=-1;continue}}return{x:y,y:b,placement:g,strategy:s,middlewareData:v}};async function detectOverflow(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:a,rects:l,elements:c,strategy:u}=t,{boundary:f="clippingAncestors",rootBoundary:y="viewport",elementContext:b="floating",altBoundary:g=!1,padding:v=0}=evaluate(e,t),S=getPaddingObject(v),N=c[g?b==="floating"?"reference":"floating":b],w=rectToClientRect(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(N)))==null||r?N:N.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:f,rootBoundary:y,strategy:u})),A=b==="floating"?{...l.floating,x:n,y:s}:l.reference,I=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),q=await(a.isElement==null?void 0:a.isElement(I))?await(a.getScale==null?void 0:a.getScale(I))||{x:1,y:1}:{x:1,y:1},V=rectToClientRect(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({rect:A,offsetParent:I,strategy:u}):A);return{top:(w.top-V.top+S.top)/q.y,bottom:(V.bottom-w.bottom+S.bottom)/q.y,left:(w.left-V.left+S.left)/q.x,right:(V.right-w.right+S.right)/q.x}}const flip$1=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:a,rects:l,initialPlacement:c,platform:u,elements:f}=e,{mainAxis:y=!0,crossAxis:b=!0,fallbackPlacements:g,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:T=!0,...N}=evaluate(t,e);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const w=getSide(s),A=getSide(c)===c,I=await(u.isRTL==null?void 0:u.isRTL(f.floating)),q=g||(A||!T?[getOppositePlacement(c)]:getExpandedPlacements(c));!g&&S!=="none"&&q.push(...getOppositeAxisPlacements(c,T,S,I));const V=[c,...q],K=await detectOverflow(e,N),J=[];let Q=((n=a.flip)==null?void 0:n.overflows)||[];if(y&&J.push(K[w]),b){const re=getAlignmentSides(s,l,I);J.push(K[re[0]],K[re[1]])}if(Q=[...Q,{placement:s,overflows:J}],!J.every(re=>re<=0)){var se,ie;const re=(((se=a.flip)==null?void 0:se.index)||0)+1,ue=V[re];if(ue)return{data:{index:re,overflows:Q},reset:{placement:ue}};let oe=(ie=Q.filter(pe=>pe.overflows[0]<=0).sort((pe,le)=>pe.overflows[1]-le.overflows[1])[0])==null?void 0:ie.placement;if(!oe)switch(v){case"bestFit":{var me;const pe=(me=Q.map(le=>[le.placement,le.overflows.filter(_e=>_e>0).reduce((_e,we)=>_e+we,0)]).sort((le,_e)=>le[1]-_e[1])[0])==null?void 0:me[0];pe&&(oe=pe);break}case"initialPlacement":oe=c;break}if(s!==oe)return{reset:{placement:oe}}}return{}}}};async function convertValueToCoords(t,e){const{placement:r,platform:n,elements:s}=t,a=await(n.isRTL==null?void 0:n.isRTL(s.floating)),l=getSide(r),c=getAlignment(r),u=getSideAxis(r)==="y",f=["left","top"].includes(l)?-1:1,y=a&&u?-1:1,b=evaluate(e,t);let{mainAxis:g,crossAxis:v,alignmentAxis:S}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...b};return c&&typeof S=="number"&&(v=c==="end"?S*-1:S),u?{x:v*y,y:g*f}:{x:g*f,y:v*y}}const offset=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:a,placement:l,middlewareData:c}=e,u=await convertValueToCoords(e,t);return l===((r=c.offset)==null?void 0:r.placement)&&(n=c.arrow)!=null&&n.alignmentOffset?{}:{x:s+u.x,y:a+u.y,data:{...u,placement:l}}}}};function getNodeName(t){return isNode(t)?(t.nodeName||"").toLowerCase():"#document"}function getWindow(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function getDocumentElement(t){var e;return(e=(isNode(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function isNode(t){return t instanceof Node||t instanceof getWindow(t).Node}function isElement(t){return t instanceof Element||t instanceof getWindow(t).Element}function isHTMLElement(t){return t instanceof HTMLElement||t instanceof getWindow(t).HTMLElement}function isShadowRoot(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof getWindow(t).ShadowRoot}function isOverflowElement(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=getComputedStyle$1(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(s)}function isTableElement(t){return["table","td","th"].includes(getNodeName(t))}function isContainingBlock(t){const e=isWebKit(),r=getComputedStyle$1(t);return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function getContainingBlock(t){let e=getParentNode(t);for(;isHTMLElement(e)&&!isLastTraversableNode(e);){if(isContainingBlock(e))return e;e=getParentNode(e)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(t){return["html","body","#document"].includes(getNodeName(t))}function getComputedStyle$1(t){return getWindow(t).getComputedStyle(t)}function getNodeScroll(t){return isElement(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function getParentNode(t){if(getNodeName(t)==="html")return t;const e=t.assignedSlot||t.parentNode||isShadowRoot(t)&&t.host||getDocumentElement(t);return isShadowRoot(e)?e.host:e}function getNearestOverflowAncestor(t){const e=getParentNode(t);return isLastTraversableNode(e)?t.ownerDocument?t.ownerDocument.body:t.body:isHTMLElement(e)&&isOverflowElement(e)?e:getNearestOverflowAncestor(e)}function getOverflowAncestors(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=getNearestOverflowAncestor(t),a=s===((n=t.ownerDocument)==null?void 0:n.body),l=getWindow(s);return a?e.concat(l,l.visualViewport||[],isOverflowElement(s)?s:[],l.frameElement&&r?getOverflowAncestors(l.frameElement):[]):e.concat(s,getOverflowAncestors(s,[],r))}function getCssDimensions(t){const e=getComputedStyle$1(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=isHTMLElement(t),a=s?t.offsetWidth:r,l=s?t.offsetHeight:n,c=round(r)!==a||round(n)!==l;return c&&(r=a,n=l),{width:r,height:n,$:c}}function unwrapElement(t){return isElement(t)?t:t.contextElement}function getScale(t){const e=unwrapElement(t);if(!isHTMLElement(e))return createCoords(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:a}=getCssDimensions(e);let l=(a?round(r.width):r.width)/n,c=(a?round(r.height):r.height)/s;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const noOffsets=createCoords(0);function getVisualOffsets(t){const e=getWindow(t);return!isWebKit()||!e.visualViewport?noOffsets:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function shouldAddVisualOffsets(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==getWindow(t)?!1:e}function getBoundingClientRect(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),a=unwrapElement(t);let l=createCoords(1);e&&(n?isElement(n)&&(l=getScale(n)):l=getScale(t));const c=shouldAddVisualOffsets(a,r,n)?getVisualOffsets(a):createCoords(0);let u=(s.left+c.x)/l.x,f=(s.top+c.y)/l.y,y=s.width/l.x,b=s.height/l.y;if(a){const g=getWindow(a),v=n&&isElement(n)?getWindow(n):n;let S=g.frameElement;for(;S&&n&&v!==g;){const T=getScale(S),N=S.getBoundingClientRect(),w=getComputedStyle$1(S),A=N.left+(S.clientLeft+parseFloat(w.paddingLeft))*T.x,I=N.top+(S.clientTop+parseFloat(w.paddingTop))*T.y;u*=T.x,f*=T.y,y*=T.x,b*=T.y,u+=A,f+=I,S=getWindow(S).frameElement}}return rectToClientRect({width:y,height:b,x:u,y:f})}function convertOffsetParentRelativeRectToViewportRelativeRect(t){let{rect:e,offsetParent:r,strategy:n}=t;const s=isHTMLElement(r),a=getDocumentElement(r);if(r===a)return e;let l={scrollLeft:0,scrollTop:0},c=createCoords(1);const u=createCoords(0);if((s||!s&&n!=="fixed")&&((getNodeName(r)!=="body"||isOverflowElement(a))&&(l=getNodeScroll(r)),isHTMLElement(r))){const f=getBoundingClientRect(r);c=getScale(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}return{width:e.width*c.x,height:e.height*c.y,x:e.x*c.x-l.scrollLeft*c.x+u.x,y:e.y*c.y-l.scrollTop*c.y+u.y}}function getClientRects(t){return Array.from(t.getClientRects())}function getWindowScrollBarX(t){return getBoundingClientRect(getDocumentElement(t)).left+getNodeScroll(t).scrollLeft}function getDocumentRect(t){const e=getDocumentElement(t),r=getNodeScroll(t),n=t.ownerDocument.body,s=max(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=max(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let l=-r.scrollLeft+getWindowScrollBarX(t);const c=-r.scrollTop;return getComputedStyle$1(n).direction==="rtl"&&(l+=max(e.clientWidth,n.clientWidth)-s),{width:s,height:a,x:l,y:c}}function getViewportRect(t,e){const r=getWindow(t),n=getDocumentElement(t),s=r.visualViewport;let a=n.clientWidth,l=n.clientHeight,c=0,u=0;if(s){a=s.width,l=s.height;const f=isWebKit();(!f||f&&e==="fixed")&&(c=s.offsetLeft,u=s.offsetTop)}return{width:a,height:l,x:c,y:u}}function getInnerBoundingClientRect(t,e){const r=getBoundingClientRect(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,a=isHTMLElement(t)?getScale(t):createCoords(1),l=t.clientWidth*a.x,c=t.clientHeight*a.y,u=s*a.x,f=n*a.y;return{width:l,height:c,x:u,y:f}}function getClientRectFromClippingAncestor(t,e,r){let n;if(e==="viewport")n=getViewportRect(t,r);else if(e==="document")n=getDocumentRect(getDocumentElement(t));else if(isElement(e))n=getInnerBoundingClientRect(e,r);else{const s=getVisualOffsets(t);n={...e,x:e.x-s.x,y:e.y-s.y}}return rectToClientRect(n)}function hasFixedPositionAncestor(t,e){const r=getParentNode(t);return r===e||!isElement(r)||isLastTraversableNode(r)?!1:getComputedStyle$1(r).position==="fixed"||hasFixedPositionAncestor(r,e)}function getClippingElementAncestors(t,e){const r=e.get(t);if(r)return r;let n=getOverflowAncestors(t,[],!1).filter(c=>isElement(c)&&getNodeName(c)!=="body"),s=null;const a=getComputedStyle$1(t).position==="fixed";let l=a?getParentNode(t):t;for(;isElement(l)&&!isLastTraversableNode(l);){const c=getComputedStyle$1(l),u=isContainingBlock(l);!u&&c.position==="fixed"&&(s=null),(a?!u&&!s:!u&&c.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||isOverflowElement(l)&&!u&&hasFixedPositionAncestor(t,l))?n=n.filter(y=>y!==l):s=c,l=getParentNode(l)}return e.set(t,n),n}function getClippingRect(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const l=[...r==="clippingAncestors"?getClippingElementAncestors(e,this._c):[].concat(r),n],c=l[0],u=l.reduce((f,y)=>{const b=getClientRectFromClippingAncestor(e,y,s);return f.top=max(b.top,f.top),f.right=min(b.right,f.right),f.bottom=min(b.bottom,f.bottom),f.left=max(b.left,f.left),f},getClientRectFromClippingAncestor(e,c,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function getDimensions(t){const{width:e,height:r}=getCssDimensions(t);return{width:e,height:r}}function getRectRelativeToOffsetParent(t,e,r){const n=isHTMLElement(e),s=getDocumentElement(e),a=r==="fixed",l=getBoundingClientRect(t,!0,a,e);let c={scrollLeft:0,scrollTop:0};const u=createCoords(0);if(n||!n&&!a)if((getNodeName(e)!=="body"||isOverflowElement(s))&&(c=getNodeScroll(e)),n){const f=getBoundingClientRect(e,!0,a,e);u.x=f.x+e.clientLeft,u.y=f.y+e.clientTop}else s&&(u.x=getWindowScrollBarX(s));return{x:l.left+c.scrollLeft-u.x,y:l.top+c.scrollTop-u.y,width:l.width,height:l.height}}function getTrueOffsetParent(t,e){return!isHTMLElement(t)||getComputedStyle$1(t).position==="fixed"?null:e?e(t):t.offsetParent}function getOffsetParent(t,e){const r=getWindow(t);if(!isHTMLElement(t))return r;let n=getTrueOffsetParent(t,e);for(;n&&isTableElement(n)&&getComputedStyle$1(n).position==="static";)n=getTrueOffsetParent(n,e);return n&&(getNodeName(n)==="html"||getNodeName(n)==="body"&&getComputedStyle$1(n).position==="static"&&!isContainingBlock(n))?r:n||getContainingBlock(t)||r}const getElementRects=async function(t){let{reference:e,floating:r,strategy:n}=t;const s=this.getOffsetParent||getOffsetParent,a=this.getDimensions;return{reference:getRectRelativeToOffsetParent(e,await s(r),n),floating:{x:0,y:0,...await a(r)}}};function isRTL(t){return getComputedStyle$1(t).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(t,e){let r=null,n;const s=getDocumentElement(t);function a(){clearTimeout(n),r&&r.disconnect(),r=null}function l(c,u){c===void 0&&(c=!1),u===void 0&&(u=1),a();const{left:f,top:y,width:b,height:g}=t.getBoundingClientRect();if(c||e(),!b||!g)return;const v=floor(y),S=floor(s.clientWidth-(f+b)),T=floor(s.clientHeight-(y+g)),N=floor(f),A={rootMargin:-v+"px "+-S+"px "+-T+"px "+-N+"px",threshold:max(0,min(1,u))||1};let I=!0;function q(V){const K=V[0].intersectionRatio;if(K!==u){if(!I)return l();K?l(!1,K):n=setTimeout(()=>{l(!1,1e-7)},100)}I=!1}try{r=new IntersectionObserver(q,{...A,root:s.ownerDocument})}catch{r=new IntersectionObserver(q,A)}r.observe(t)}return l(!0),a}function autoUpdate(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:u=!1}=n,f=unwrapElement(t),y=s||a?[...f?getOverflowAncestors(f):[],...getOverflowAncestors(e)]:[];y.forEach(w=>{s&&w.addEventListener("scroll",r,{passive:!0}),a&&w.addEventListener("resize",r)});const b=f&&c?observeMove(f,r):null;let g=-1,v=null;l&&(v=new ResizeObserver(w=>{let[A]=w;A&&A.target===f&&v&&(v.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{v&&v.observe(e)})),r()}),f&&!u&&v.observe(f),v.observe(e));let S,T=u?getBoundingClientRect(t):null;u&&N();function N(){const w=getBoundingClientRect(t);T&&(w.x!==T.x||w.y!==T.y||w.width!==T.width||w.height!==T.height)&&r(),T=w,S=requestAnimationFrame(N)}return r(),()=>{y.forEach(w=>{s&&w.removeEventListener("scroll",r),a&&w.removeEventListener("resize",r)}),b&&b(),v&&v.disconnect(),v=null,u&&cancelAnimationFrame(S)}}const flip=flip$1,computePosition=(t,e,r)=>{const n=new Map,s={platform,...r},a={...s.platform,_c:n};return computePosition$1(t,e,{...s,platform:a})},PositionsSelectOptions={methods:{positionOptions(t,e,{width:r}){t.style.width=r;function n(){computePosition(e.$refs.toggle,t,{placement:"bottom",middleware:[offset({mainAxis:0,crossAxis:-1}),flip()]}).then(({x:a,y:l})=>{Object.assign(t.style,{left:`${Math.round(a)}px`,top:`${Math.round(l)}px`})})}const s=autoUpdate(e.$refs.toggle,t,n);this.$once("hook:destroyed",s)}}};function move(t,e,r){const n=[...t.slice(0,e),...t.slice(e+1,t.length)];return[...n.slice(0,r),t[e],...n.slice(r,n.length)]}const _sfc_main$e={props:{value:{required:!0},itemClass:{default:"sortable-item"},handleClass:{default:"sortable-handle"},mirror:{type:Boolean,default:!0},appendTo:{default:null},options:{default:()=>{}},vertical:{type:Boolean},constrainDimensions:{type:Boolean},delay:{type:Number,default:0},distance:{type:Number,default:0},disabled:{type:Boolean,default:!1},animate:{type:Boolean,default:!0}},data(){return{sortable:null}},computed:{computedOptions(){let t=[];this.animate&&t.push(SwapAnimation);let e=Object.assign({},{draggable:`.${CSS.escape(this.itemClass)}`,handle:`.${CSS.escape(this.handleClass)}`,delay:this.delay,distance:this.distance,swapAnimation:{vertical:this.vertical,horizontal:!this.vertical},plugins:t,mirror:{constrainDimensions:this.constrainDimensions}},this.options);return this.vertical&&(e.mirror.xAxis=!1),this.appendTo&&(e.mirror.appendTo=this.appendTo),e}},provide(){return{itemClass:this.itemClass,handleClass:this.handleClass}},render(){return this.$scopedSlots.default({items:this.value})},mounted(){this.disabled||this.setupSortableList()},methods:{setupSortableList(){this.sortable=new Sortable(this.$el,this.computedOptions),this.sortable.on("drag:start",()=>this.$emit("dragstart")),this.sortable.on("drag:stop",()=>this.$emit("dragend")),this.sortable.on("sortable:stop",({oldIndex:t,newIndex:e})=>{this.$emit("input",move(this.value,t,e))}),this.$on("hook:destroyed",()=>{this.sortable.destroy()}),this.mirror===!1&&this.sortable.on("mirror:create",t=>t.cancel())},destroySortableList(){this.sortable.destroy()}},watch:{disabled(t){t?this.destroySortableList():this.setupSortableList()}}},_sfc_render$e=null,_sfc_staticRenderFns$e=null;var __component__$e=normalizeComponent(_sfc_main$e,_sfc_render$e,_sfc_staticRenderFns$e,!1,null,null,null,null);const SortableList=__component__$e.exports,_sfc_main$d={render(){return this.$slots.default[0]},inject:["itemClass"],mounted(){this.$el.classList.add(this.itemClass)}},_sfc_render$d=null,_sfc_staticRenderFns$d=null;var __component__$d=normalizeComponent(_sfc_main$d,_sfc_render$d,_sfc_staticRenderFns$d,!1,null,null,null,null);const SortableItem=__component__$d.exports;function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var uniqid={exports:{}},pid=typeof process<"u"&&process.pid?process.pid.toString(36):"",address="";if(typeof __webpack_require__!="function"&&typeof commonjsRequire<"u"){var mac="",os=require$$0;if(os.networkInterfaces)var networkInterfaces=os.networkInterfaces();if(networkInterfaces){e:for(let t in networkInterfaces){const e=networkInterfaces[t],r=e.length;for(var i=0;i<r;i++)if(e[i]!==void 0&&e[i].mac&&e[i].mac!="00:00:00:00:00:00"){mac=e[i].mac;break e}}address=mac?parseInt(mac.replace(/\:|\D+/gi,"")).toString(36):""}}uniqid.exports=uniqid.exports.default=function(t,e){return(t||"")+address+pid+now().toString(36)+(e||"")};uniqid.exports.process=function(t,e){return(t||"")+pid+now().toString(36)+(e||"")};uniqid.exports.time=function(t,e){return(t||"")+now().toString(36)+(e||"")};function now(){var t=Date.now(),e=now.last||t;return now.last=t>e?t:e+1}const SelectField_vue_vue_type_style_index_0_scoped_452636eb_lang="",_sfc_main$c={mixins:[PositionsSelectOptions],components:{SortableList,SortableItem},props:{items:Array,url:String,typeahead:Boolean,multiple:Boolean,taggable:Boolean,config:Object,readOnly:Boolean,site:String},data(){return{options:[]}},computed:{isTaggable(){return data_get(this.config,"create")===!1?!1:this.taggable},parameters(){return{site:this.site,paginate:!1,columns:"title,id"}}},created(){this.typeahead||this.request()},watch:{parameters(t){this.typeahead||this.request()}},methods:{request(t={}){return t={...this.parameters,...t},this.$axios.get(this.url,{params:t}).then(e=>(this.options=e.data.data,Promise.resolve(e)))},search(t,e){this.typeahead&&(e(!0),this.request({search:t}).then(r=>e(!1)))},input(t){this.multiple||(t=t===null?[]:[t]),this.$emit("input",t)}}};var _sfc_render$c=function(){var e=this,r=e._self._c;return r("div",[r("v-select",{ref:"input",attrs:{label:"title","append-to-body":"","calculate-position":e.positionOptions,"close-on-select":!0,disabled:e.readOnly,multiple:e.multiple,options:e.options,"get-option-key":n=>n.id,"get-option-label":n=>n.title,"create-option":n=>({title:n,id:n}),placeholder:e.__(e.config.placeholder)||e.__("Choose..."),searchable:!0,taggable:e.isTaggable,value:e.items},on:{input:e.input,search:e.search,"search:focus":function(n){return e.$emit("focus")},"search:blur":function(n){return e.$emit("blur")}},scopedSlots:e._u([e.multiple?{key:"selected-option-container",fn:function(){return[r("i",{staticClass:"hidden"})]},proxy:!0}:null,e.multiple?{key:"search",fn:function({events:n,attributes:s}){return[r("input",e._g(e._b({staticClass:"vs__search",attrs:{placeholder:e.__(e.config.placeholder)||e.__("Choose..."),type:"search"}},"input",s,!1),n))]}}:null,{key:"no-options",fn:function(){return[r("div",{staticClass:"text-sm text-gray-700 text-left py-2 px-4",domProps:{textContent:e._s(e.__("No options to choose from."))}})]},proxy:!0},e.multiple?{key:"footer",fn:function({deselect:n}){return[r("sortable-list",{attrs:{"item-class":"sortable-item","handle-class":"sortable-item",value:e.items,distance:5,mirror:!1},on:{input:e.input}},[r("div",{staticClass:"vs__selected-options-outside flex flex-wrap"},e._l(e.items,function(s){return r("span",{key:s.id,staticClass:"vs__selected mt-2",class:{"sortable-item":!e.readOnly}},[e._v(" "+e._s(s.title)+" "),e.readOnly?r("button",{staticClass:"vs__deselect",attrs:{type:"button"}},[r("span",{staticClass:"opacity-50"},[e._v("Ã")])]):r("button",{staticClass:"vs__deselect",attrs:{type:"button","aria-label":e.__("Deselect option")},on:{click:function(a){return n(s)}}},[r("span",[e._v("Ã")])])])}),0)])]}}:null],null,!0)})],1)},_sfc_staticRenderFns$c=[],__component__$c=normalizeComponent(_sfc_main$c,_sfc_render$c,_sfc_staticRenderFns$c,!1,null,"452636eb",null,null);const RelationshipSelectField=__component__$c.exports,_sfc_main$b={props:{name:String,value:{required:!0},config:Object,data:Array,maxItems:Number,itemComponent:{type:String,default:"RelatedItem"},itemDataUrl:String,filtersUrl:String,selectionsUrl:String,statusIcons:Boolean,site:String,search:Boolean,canEdit:Boolean,canCreate:Boolean,canReorder:Boolean,readOnly:Boolean,exclusions:Array,creatables:Array,formComponent:String,formComponentProps:Object,mode:{type:String,default:"default"},taggable:Boolean,columns:{type:Array,default:()=>[]},actionUrl:{type:String}},components:{ItemSelector,RelatedItem,CreateButton,RelationshipSelectField,InlineEditForm},data(){let t="";return this.columns.length&&(t=this.columns[0].field),{isSelecting:!1,isCreating:!1,isEditing:!1,itemData:[],initializing:!0,loading:!0,inline:!1,primaryColumn:`cell-${t}`,currentItem:null,sortColumn:null,sortDirection:null}},computed:{items(){return this.value.map(t=>{const e=_.find(this.data,r=>r.id==t);return e||{id:t,title:t}})},maxItemsReached(){return this.value.length>=this.maxItems},canSelectOrCreate(){return!this.readOnly&&!this.maxItemsReached}},mounted(){this.initializeData().then(()=>{this.initializing=!1,this.$nextTick(()=>this.makeSortable())})},beforeDestroy(){this.setLoadingProgress(!1)},watch:{loading:{immediate:!0,handler(t){this.$emit("loading",t),this.setLoadingProgress(t)}},isSelecting(t){this.$emit(t?"focus":"blur")},itemData(t,e){this.initializing||this.$emit("item-data-updated",t)}},methods:{canViewRow(t){return t.viewable&&t.permalink},canEditRow(t){return t.editable},edit(t){this.canEditRow(t)&&(this.isEditing=!0,this.currentItem=t)},itemUpdated(t){this.isEditing=!1,this.currentItem=null,this.initializing=!0;let e=this.data.map(r=>r.id==t.id?{...r,...t}:r);this.$emit("item-data-updated",e),this.initializing=!1},sorted(t,e){this.sortColumn=t,this.sortDirection=e},reordered(t){this.$emit("input",t.map(e=>e.id))},update(t){JSON.stringify(t)!=JSON.stringify(this.value)&&this.$emit("input",t)},remove(t){this.update([...this.value.slice(0,t),...this.value.slice(t+1)])},selectionsUpdated(t){this.getDataForSelections(t).then(()=>{this.update(t)})},initializeData(){return this.data?(this.loading=!1,Promise.resolve()):this.getDataForSelections(this.selections)},getDataForSelections(t){return this.loading=!0,this.$axios.post(this.itemDataUrl,{site:this.site,selections:t}).then(e=>{this.$emit("item-data-updated",e.data.data)}).finally(()=>{this.loading=!1})},makeSortable(){new Sortable(this.$refs.items,{draggable:".item",handle:".item-move",mirror:{constrainDimensions:!0,xAxis:!1},swapAnimation:{vertical:!0},plugins:[SwapAnimation],delay:200}).on("drag:start",t=>{this.value.length===1?t.cancel():this.$emit("focus")}).on("drag:stop",t=>{this.$emit("blur")}).on("sortable:stop",t=>{const e=[...this.value];e.splice(t.newIndex,0,e.splice(t.oldIndex,1)[0]),this.update(e)})},itemCreated(t){this.$emit("item-data-updated",[...this.data,t]),this.update([...this.value,t.id])},selectFieldSelected(t){this.$emit("item-data-updated",t.map(e=>({id:e.id,title:e.title}))),this.update(t.map(e=>e.id))},setLoadingProgress(t){this.$progress.loading(`relationship-fieldtype-${this._uid}`,t)},actionStarted(){this.loading=!0},actionCompleted(t=null,e){this.loading=!1,t!==!1&&(this.$events.$emit("clear-selections"),this.$events.$emit("reset-action-modals"),this.$toast.success(e.message||__("Action completed")))}}};var _sfc_render$b=function(){var e=this,r=e._self._c;return r("div",{staticClass:"relationship-input",class:{"relationship-input-empty":e.items.length==0}},[e.initializing?r("loading-graphic",{attrs:{inline:!0}}):e._e(),e.initializing?e._e():[r("data-list",{staticClass:"mb-2",attrs:{rows:e.items,columns:e.columns,sort:!e.canReorder,sortColumm:e.sortColumn,sortDirection:e.sortDirection}},[r("div",[r("data-list-bulk-actions",{attrs:{url:e.actionUrl},on:{started:e.actionStarted,completed:e.actionCompleted}}),r("data-list-table",{staticClass:"card p-1",attrs:{loading:e.loading,reorderable:e.canReorder,sortable:!e.canReorder},on:{sorted:e.sorted,reordered:e.reordered},scopedSlots:e._u([{key:e.primaryColumn,fn:function({row:n,value:s}){return[r("a",{on:{click:function(a){return e.edit(n)}}},[e._v(e._s(s))])]}},{key:"actions",fn:function({row:n,index:s}){return[e.canViewRow(n)||e.canEditRow(n)?r("dropdown-list",[e.canViewRow(n)?r("dropdown-item",{attrs:{text:e.__("View"),redirect:n.permalink}}):e._e(),e.canEditRow(n)?r("dropdown-item",{attrs:{text:e.__("Edit")},on:{click:function(a){return e.edit(n)}}}):e._e(),e.readOnly?e._e():r("dropdown-item",{staticClass:"warning",attrs:{text:e.__("Unlink")},on:{click:function(a){return e.remove(s)}}}),(e.canViewRow(n)||e.canEditRow(n))&&n.actions.length?r("div",{staticClass:"divider"}):e._e(),r("data-list-inline-actions",{attrs:{item:n.id,url:e.actionUrl,actions:n.actions},on:{started:e.actionStarted,completed:e.actionCompleted}})],1):r("div",{staticClass:"w-10 block"})]}}],null,!0)},[e.items.length===0?r("template",{slot:"tbody-start"},[r("div",{staticClass:"p-2 text-grey-70",domProps:{textContent:e._s(e.__("No results"))}})]):e._e()],2)],1)]),e.isEditing?r("inline-edit-form",{attrs:{item:e.currentItem,component:e.formComponent,"component-props":e.formComponentProps},on:{updated:e.itemUpdated,closed:function(n){e.isEditing=!1,e.currentItem=null}}}):e._e(),e.maxItemsReached&&e.maxItems!=1?r("div",{staticClass:"py-1 text-xs text-grey"},[r("span",[e._v(e._s(e.__("Maximum items selected:")))]),r("span",[e._v(e._s(e.maxItems)+"/"+e._s(e.maxItems))])]):e._e(),e.canSelectOrCreate?r("div",{staticClass:"relationship-input-buttons relative",class:{"mt-2":e.items.length>0}},[r("div",{staticClass:"flex flex-wrap items-center text-sm -mb-1"},[r("div",{staticClass:"relative mb-1"},[e.canCreate&&e.creatables.length?r("create-button",{attrs:{creatables:e.creatables,site:e.site,component:e.formComponent,"component-props":e.formComponentProps},on:{created:e.itemCreated}}):e._e()],1),r("button",{ref:"existing",staticClass:"text-blue hover:text-grey-80 flex mb-1 outline-none",on:{click:function(n){n.preventDefault(),e.isSelecting=!0}}},[r("svg-icon",{staticClass:"mr-sm h-4 w-4 flex items-center",attrs:{name:"hyperlink"}}),e._v(" "+e._s(e.__("Link Existing Item"))+" ")],1)])]):e._e(),e.isSelecting?r("stack",{attrs:{name:"item-selector"},on:{closed:function(n){e.isSelecting=!1}},scopedSlots:e._u([{key:"default",fn:function({close:n}){return r("item-selector",{attrs:{"filters-url":e.filtersUrl,"selections-url":e.selectionsUrl,site:e.site,"initial-columns":e.columns,"initial-sort-column":"title","initial-sort-direction":"asc","initial-selections":e.value,"max-selections":e.maxItems,search:e.search,exclusions:e.exclusions},on:{selected:e.selectionsUpdated,closed:n}})}}],null,!1,2548607770)}):e._e(),e.name?r("input",{attrs:{type:"hidden",name:e.name},domProps:{value:JSON.stringify(e.value)}}):e._e()]],2)},_sfc_staticRenderFns$b=[],__component__$b=normalizeComponent(_sfc_main$b,_sfc_render$b,_sfc_staticRenderFns$b,!1,null,null,null,null);const RelationshipTableMode=__component__$b.exports,_sfc_main$a={components:{InlineEditForm},props:{item:Object,config:Object,statusIcon:Boolean,editable:Boolean,sortable:Boolean,readOnly:Boolean,formComponent:String,formComponentProps:Object},data(){return{isEditing:!1}},methods:{edit(){this.editable&&(this.item.invalid||(this.isEditing=!0))},itemUpdated(t){this.item.title=t.title,this.item.published=t.published,this.item.private=t.private,this.item.status=t.status}}};var _sfc_render$a=function(){var e=this,r=e._self._c;return r(e.config.mode=="table"?"tr":"div",{tag:"div",class:{"sortable-row outline-none":e.config.mode==="table"}},[e.config.mode=="table"?[r("td",[r("a",{on:{click:e.edit}},[e._v(e._s(e.item.title))])]),e.readOnly?e._e():r("td",{staticClass:"actions-column"},[r("dropdown-list",[e.editable?r("dropdown-item",{attrs:{text:e.__("Edit")},on:{click:e.edit}}):e._e(),r("dropdown-item",{staticClass:"warning",attrs:{text:e.__("Delete")},on:{click:function(n){return e.$emit("removed")}}})],1)],1),e.isEditing?r("inline-edit-form",{attrs:{item:e.item,component:e.formComponent,"component-props":e.formComponentProps},on:{updated:e.itemUpdated,closed:function(n){e.isEditing=!1}}}):e._e()]:[e.sortable?r("div",{staticClass:"item-move"},[e._v("Â ")]):e._e(),r("div",{staticClass:"item-inner"},[e.statusIcon?r("div",{staticClass:"little-dot mr-1",class:e.item.status}):e._e(),e.item.invalid?r("div",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:e.__("An item with this ID could not be found"),expression:`
                    __('An item with this ID could not be found')
                `,modifiers:{top:!0}}],domProps:{textContent:e._s(e.item.title)}}):e._e(),!e.item.invalid&&e.editable?r("a",{domProps:{textContent:e._s(e.item.title)},on:{click:e.edit}}):e._e(),!e.item.invalid&&!e.editable?r("div",{domProps:{textContent:e._s(e.item.title)}}):e._e(),e.isEditing?r("inline-edit-form",{attrs:{item:e.item,component:e.formComponent,"component-props":e.formComponentProps},on:{updated:e.itemUpdated,closed:function(n){e.isEditing=!1}}}):e._e()],1),e.item.collection?r("div",{staticClass:"text-4xs text-grey-60 uppercase whitespace-no-wrap mr-1",domProps:{textContent:e._s(e.item.collection.title)}}):e._e(),e.readOnly?e._e():r("div",{staticClass:"pr-1 flex items-center"},[r("dropdown-list",[e.editable?r("dropdown-item",{attrs:{text:e.__("Edit")},on:{click:e.edit}}):e._e(),r("dropdown-item",{staticClass:"warning",attrs:{text:e.__("Delete")},on:{click:function(n){return e.$emit("removed")}}})],1)],1)]],2)},_sfc_staticRenderFns$a=[],__component__$a=normalizeComponent(_sfc_main$a,_sfc_render$a,_sfc_staticRenderFns$a,!1,null,null,null,null);const HasManyRelatedItem=__component__$a.exports,SaveButtonOptions_vue_vue_type_style_index_0_lang="",_sfc_main$9={props:{showOptions:{type:Boolean,default:!0},buttonClass:{default:"btn-primary"},preferencesPrefix:{type:String,required:!0}},data(){return{currentOption:null}},computed:{options(){return{options:{listing:__("Go To Listing"),continue_editing:__("Continue Editing"),create_another:__("Create Another")}}},buttonIcon(){switch(!0){case this.currentOption==="listing":return{name:"micro/arrow-go-back",class:"w-3"};case this.currentOption==="continue_editing":return{name:"micro/chevron-down-xs",class:"w-2"};case this.currentOption==="create_another":return{name:"micro/add-circle",class:"w-3"}}},preferencesKey(){return`${this.preferencesPrefix}.after_save`}},mounted(){this.setInitialValue(),this.$watch("currentOption",t=>this.setPreference(t))},methods:{setInitialValue(){this.currentOption=this.$preferences.get(this.preferencesKey)||"listing"},setPreference(t){t!==this.$preferences.get(this.preferencesKey)&&(t==="listing"?this.$preferences.remove(this.preferencesKey):this.$preferences.set(this.preferencesKey,t))}}};var _sfc_render$9=function(){var e=this,r=e._self._c;return r("div",{class:{"btn-group":e.showOptions}},[e._t("default"),e.showOptions?r("dropdown-list",{staticClass:"text-left",scopedSlots:e._u([{key:"trigger",fn:function(){return[r("button",{staticClass:"rounded-l-none",class:e.buttonClass},[e.buttonIcon?r("svg-icon",{class:e.buttonIcon.class,attrs:{name:e.buttonIcon.name}}):e._e()],1)]},proxy:!0}],null,!1,3123076947)},[r("h6",{staticClass:"p-2",domProps:{textContent:e._s(e.__("After Saving"))}}),r("div",{staticClass:"publish-fields px-2"},[r("div",{staticClass:"publish-field save-and-continue-options"},[r("radio-fieldtype",{attrs:{handle:"save_and_continue_options",config:e.options},model:{value:e.currentOption,callback:function(n){e.currentOption=n},expression:"currentOption"}})],1)])]):e._e()],2)},_sfc_staticRenderFns$9=[],__component__$9=normalizeComponent(_sfc_main$9,_sfc_render$9,_sfc_staticRenderFns$9,!1,null,null,null,null);const SaveButtonOptions=__component__$9.exports,HasPreferences$1={data(){return{preferencesPrefix:null}},computed:{hasPreferences(){return this.preferencesPrefix!==null}},methods:{preferencesKey(t){return`${this.preferencesPrefix}.${t}`},getPreference(t){return this.$preferences.get(this.preferencesKey(t))},setPreference(t,e){return this.$preferences.set(this.preferencesKey(t),e)},removePreference(t,e=null){return this.$preferences.remove(this.preferencesKey(t),e)}}},_sfc_main$8={components:{SaveButtonOptions},mixins:[HasPreferences$1],props:{breadcrumbs:Array,initialBlueprint:Object,initialValues:Object,initialMeta:Object,initialTitle:String,action:String,method:String,resourceHasRoutes:Boolean,permalink:String,isCreating:{type:Boolean,default:!1},isInline:{type:Boolean,default:!1},publishContainer:String,readOnly:Boolean,resource:{type:Object,required:!0},createAnotherUrl:String,listingUrl:String},data(){return{blueprint:this.initialBlueprint,values:this.initialValues,meta:this.initialMeta,title:this.initialTitle,preferencesPrefix:`runway.${this.resource.handle}`,errors:{},saving:!1,containerWidth:null,saveKeyBinding:null,quickSave:!1}},computed:{enableSidebar(){return this.blueprint.tabs.map(t=>t.handle).includes("sidebar")},shouldShowSidebar(){return this.enableSidebar},afterSaveOption(){return this.getPreference("after_save")}},mounted(){this.saveKeyBinding=this.$keys.bindGlobal(["mod+s","mod+return"],t=>{t.preventDefault(),this.quickSave=!0,this.save()})},created(){this.publishContainer.includes("relate-fieldtype-inline")&&(this.values.from_inline_publish_form=!0,this.initialBlueprint.tabs.forEach(t=>{t.fields.forEach(e=>{e.type==="belongs_to"&&e.resource===window.Runway.currentResource&&(this.values[e.handle].includes(window.Runway.currentRecord.id)||(this.values[e.handle].push(window.Runway.currentRecord.id),this.meta[e.handle].data=[window.Runway.currentRecord]))})}))},methods:{save(){this.saving=!0,this.clearErrors(),this.$axios({method:this.method,url:this.action,data:this.values}).then(t=>{this.saving=!1,this.$refs.container.saved(),this.$emit("saved",t);let e=this.quickSave?"continue_editing":this.afterSaveOption;if(!this.isInline&&e==="create_another"){this.$nextTick(()=>{window.location=this.createAnotherUrl});return}if(!this.isInline&&e===null){this.$nextTick(()=>{window.location=this.listingUrl});return}this.isCreating&&this.publishContainer==="base"?this.$nextTick(()=>{window.location.href=t.data.redirect}):(this.quickSave=!1,this.$toast.success(__("Saved")))}).catch(t=>this.handleAxiosError(t))},clearErrors(){this.error=null,this.errors={}},handleAxiosError(t){if(this.saving=!1,t.response&&t.response.status===422){const{message:e,errors:r}=t.response.data;this.error=e,this.errors=r,this.$toast.error(e)}else t.response?this.$toast.error(t.response.data.message):this.$toast.error(t||"Something went wrong")},setFieldValue(t,e){this.$refs.container.setFieldValue(t,e)},setFieldMeta(t,e){this.$store.dispatch(`publish/${this.publishContainer}/setFieldMeta`,{handle:t,value:e,user:Statamic.user.id})}},watch:{saving(t){this.$progress.loading("runway-publish-form",t)}},destroyed(){this.saveKeyBinding.destroy()}};var _sfc_render$8=function(){var e=this,r=e._self._c;return r("div",[e.breadcrumbs?r("breadcrumb",{attrs:{url:e.breadcrumbs[0].url,title:e.breadcrumbs[0].text}}):e._e(),r("div",{staticClass:"flex items-center mb-3"},[r("h1",{staticClass:"flex-1"},[r("div",{staticClass:"flex items-center"},[r("span",{domProps:{innerHTML:e._s(e.title)}})])]),e.readOnly?e._e():r("div",{staticClass:"hidden md:flex items-center"},[e.readOnly?e._e():r("save-button-options",{attrs:{"preferences-prefix":e.preferencesPrefix}},[r("button",{staticClass:"btn-primary",attrs:{disabled:e.isSaving},on:{click:function(n){return n.preventDefault(),e.save.apply(null,arguments)}}},[e._v(" "+e._s(e.__("Save"))+" ")])])],1)]),r("publish-container",{ref:"container",attrs:{name:e.publishContainer,blueprint:e.blueprint,values:e.values,meta:e.meta,errors:e.errors},on:{updated:function(n){e.values=n}}},[r("div",[e._l(e.components,function(n){return r(n.name,e._g(e._b({key:n.id,tag:"component",attrs:{container:e.container}},"component",n.props,!1),n.events))}),r("publish-tabs",{attrs:{"read-only":e.readOnly,"enable-sidebar":e.shouldShowSidebar},on:{updated:e.setFieldValue,"meta-updated":e.setFieldMeta,focus:function(n){return e.$refs.container.$emit("focus",n)},blur:function(n){return e.$refs.container.$emit("blur",n)}},scopedSlots:e._u([{key:"actions",fn:function({shouldShowSidebar:n}){return[r("div",{staticClass:"card p-0",class:{"mb-5":e.resourceHasRoutes&&e.permalink}},[e.resourceHasRoutes&&e.permalink?r("div",{class:{hi:!n}},[r("div",{staticClass:"p-2 flex items-center -mx-1"},[e.permalink?r("a",{staticClass:"flex items-center justify-center btn-flat w-full mx-1 px-1",attrs:{href:e.permalink,target:"_blank"}},[r("svg-icon",{staticClass:"w-5 h-5 mr-1",attrs:{name:"external-link"}}),r("span",[e._v(e._s(e.__("Visit URL")))])],1):e._e()])]):e._e()])]}}])})],2)]),r("div",{staticClass:"md:hidden mt-3 flex items-center"},[e.readOnly?e._e():r("button",{staticClass:"btn-lg btn-primary w-full",attrs:{disabled:e.isSaving},on:{click:function(n){return n.preventDefault(),e.save.apply(null,arguments)}}},[e._v(" "+e._s(e.__("Save"))+" ")])])],1)},_sfc_staticRenderFns$8=[],__component__$8=normalizeComponent(_sfc_main$8,_sfc_render$8,_sfc_staticRenderFns$8,!1,null,null,null,null);const PublishForm=__component__$8.exports,HasActions={methods:{actionStarted(){this.loading=!0},actionCompleted(t=null,e={}){this.loading=!1,t!==!1&&(this.$events.$emit("clear-selections"),this.$events.$emit("reset-action-modals"),e.message!==!1&&this.$toast.success(e.message||__("Action completed")),this.afterActionSuccessfullyCompleted())},afterActionSuccessfullyCompleted(){this.request()}}},HasPagination={props:{initialPerPage:{type:Number,default(){return Statamic.$config.get("paginationSize")}}},data(){return{perPage:this.initialPerPage,page:1}},mounted(){this.setInitialPerPage()},methods:{setInitialPerPage(){this.hasPreferences&&(this.perPage=this.getPreference("per_page")||this.initialPerPage)},changePerPage(t){t=parseInt(t),(this.hasPreferences?this.setPreference("per_page",t!=this.initialPerPage?t:null):Promise.resolve()).then(r=>{this.perPage=t,this.resetPage()})},selectPage(t){this.page=t,this.$events.$emit("clear-selections")},resetPage(){this.page=1,this.$events.$emit("clear-selections")}}},HasPreferences={data(){return{preferencesPrefix:null}},computed:{hasPreferences(){return this.preferencesPrefix!==null}},methods:{preferencesKey(t){return`${this.preferencesPrefix}.${t}`},getPreference(t){return this.$preferences.get(this.preferencesKey(t))},setPreference(t,e){return this.$preferences.set(this.preferencesKey(t),e)},removePreference(t,e=null){return this.$preferences.remove(this.preferencesKey(t),e)}}},_sfc_main$7={mixins:[HasActions,HasFilters,HasPagination,HasPreferences],props:{initialSortColumn:String,initialSortDirection:String,initialColumns:{type:Array,default:()=>[]},filters:Array,actionUrl:String},data(){return{source:null,initializing:!0,loading:!0,items:[],columns:this.initialColumns,visibleColumns:this.initialColumns.filter(t=>t.visible),sortColumn:this.initialSortColumn,sortDirection:this.initialSortDirection,meta:null}},computed:{parameters(){return Object.assign({sort:this.sortColumn,order:this.sortDirection,page:this.page,perPage:this.perPage,search:this.searchQuery,filters:this.activeFilterParameters,columns:this.visibleColumns.map(t=>t.field).join(",")},this.additionalParameters)},activeFilterParameters(){return utf8btoa(JSON.stringify(this.activeFilters))},additionalParameters(){return{}},shouldRequestFirstPage(){return this.page>1&&this.items.length===0?(this.page=1,!0):!1}},created(){this.autoApplyFilters(this.filters),this.request()},watch:{parameters:{deep:!0,handler(t,e){e.search===t.search&&JSON.stringify(e)!==JSON.stringify(t)&&this.request()}},loading:{immediate:!0,handler(t){this.$progress.loading(this.listingKey,t)}},searchQuery(t){this.sortColumn=null,this.sortDirection=null,this.resetPage(),this.request()}},methods:{request(){if(!this.requestUrl){this.loading=!1;return}this.loading=!0,this.source&&this.source.cancel(),this.source=this.$axios.CancelToken.source(),this.$axios.get(this.requestUrl,{params:this.parameters,cancelToken:this.source.token}).then(t=>{if(this.columns=t.data.meta.columns,this.activeFilterBadges={...t.data.meta.activeFilterBadges},this.items=Object.values(t.data.data),this.meta=t.data.meta,this.shouldRequestFirstPage)return this.request();this.loading=!1,this.initializing=!1,this.afterRequestCompleted(t)}).catch(t=>{this.$axios.isCancel(t)||(this.loading=!1,this.initializing=!1,!(t.request&&!t.response)&&this.$toast.error(t.response?t.response.data.message:__("Something went wrong"),{duration:null}))})},afterRequestCompleted(t){},sorted(t,e){this.sortColumn=t,this.sortDirection=e},removeRow(t){let e=t.id,r=_.indexOf(this.rows,_.findWhere(this.rows,{id:e}));this.rows.splice(r,1),this.rows.length===0&&location.reload()}}},_sfc_render$7=null,_sfc_staticRenderFns$7=null;var __component__$7=normalizeComponent(_sfc_main$7,_sfc_render$7,_sfc_staticRenderFns$7,!1,null,null,null,null);const Listing=__component__$7.exports;function getDefaults(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let defaults=getDefaults();function changeDefaults(t){defaults=t}const escapeTest=/[&<>"']/,escapeReplace=new RegExp(escapeTest.source,"g"),escapeTestNoEncode=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode=new RegExp(escapeTestNoEncode.source,"g"),escapeReplacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},getEscapeReplacement=t=>escapeReplacements[t];function escape$1(t,e){if(e){if(escapeTest.test(t))return t.replace(escapeReplace,getEscapeReplacement)}else if(escapeTestNoEncode.test(t))return t.replace(escapeReplaceNoEncode,getEscapeReplacement);return t}const unescapeTest=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function unescape$1(t){return t.replace(unescapeTest,(e,r)=>(r=r.toLowerCase(),r==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""))}const caret=/(^|[^\[])\^/g;function edit(t,e){t=typeof t=="string"?t:t.source,e=e||"";const r={replace:(n,s)=>(s=s.source||s,s=s.replace(caret,"$1"),t=t.replace(n,s),r),getRegex:()=>new RegExp(t,e)};return r}const nonWordAndColonTest=/[^\w:]/g,originIndependentUrl=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function cleanUrl(t,e,r){if(t){let n;try{n=decodeURIComponent(unescape$1(r)).replace(nonWordAndColonTest,"").toLowerCase()}catch{return null}if(n.indexOf("javascript:")===0||n.indexOf("vbscript:")===0||n.indexOf("data:")===0)return null}e&&!originIndependentUrl.test(r)&&(r=resolveUrl(e,r));try{r=encodeURI(r).replace(/%25/g,"%")}catch{return null}return r}const baseUrls={},justDomain=/^[^:]+:\/*[^/]*$/,protocol=/^([^:]+:)[\s\S]*$/,domain=/^([^:]+:\/*[^/]*)[\s\S]*$/;function resolveUrl(t,e){baseUrls[" "+t]||(justDomain.test(t)?baseUrls[" "+t]=t+"/":baseUrls[" "+t]=rtrim(t,"/",!0)),t=baseUrls[" "+t];const r=t.indexOf(":")===-1;return e.substring(0,2)==="//"?r?e:t.replace(protocol,"$1")+e:e.charAt(0)==="/"?r?e:t.replace(domain,"$1")+e:t+e}const noopTest={exec:function(){}};function splitCells(t,e){const r=t.replace(/\|/g,(a,l,c)=>{let u=!1,f=l;for(;--f>=0&&c[f]==="\\";)u=!u;return u?"|":" |"}),n=r.split(/ \|/);let s=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;s<n.length;s++)n[s]=n[s].trim().replace(/\\\|/g,"|");return n}function rtrim(t,e,r){const n=t.length;if(n===0)return"";let s=0;for(;s<n;){const a=t.charAt(n-s-1);if(a===e&&!r)s++;else if(a!==e&&r)s++;else break}return t.slice(0,n-s)}function findClosingBracket(t,e){if(t.indexOf(e[1])===-1)return-1;const r=t.length;let n=0,s=0;for(;s<r;s++)if(t[s]==="\\")s++;else if(t[s]===e[0])n++;else if(t[s]===e[1]&&(n--,n<0))return s;return-1}function checkDeprecations(t,e){!t||t.silent||(e&&console.warn("marked(): callback is deprecated since version 5.0.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/using_pro#async"),(t.sanitize||t.sanitizer)&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options"),(t.highlight||t.langPrefix!=="language-")&&console.warn("marked(): highlight and langPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-highlight."),t.mangle&&console.warn("marked(): mangle parameter is enabled by default, but is deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install https://www.npmjs.com/package/marked-mangle, or disable by setting `{mangle: false}`."),t.baseUrl&&console.warn("marked(): baseUrl parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-base-url."),t.smartypants&&console.warn("marked(): smartypants parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-smartypants."),t.xhtml&&console.warn("marked(): xhtml parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-xhtml."),(t.headerIds||t.headerPrefix)&&console.warn("marked(): headerIds and headerPrefix parameters enabled by default, but are deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install  https://www.npmjs.com/package/marked-gfm-heading-id, or disable by setting `{headerIds: false}`."))}function outputLink(t,e,r,n){const s=e.href,a=e.title?escape$1(e.title):null,l=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){n.state.inLink=!0;const c={type:"link",raw:r,href:s,title:a,text:l,tokens:n.inlineTokens(l)};return n.state.inLink=!1,c}return{type:"image",raw:r,href:s,title:a,text:escape$1(l)}}function indentCodeCompensation(t,e){const r=t.match(/^(\s+)(?:```)/);if(r===null)return e;const n=r[1];return e.split(`
`).map(s=>{const a=s.match(/^\s+/);if(a===null)return s;const[l]=a;return l.length>=n.length?s.slice(n.length):s}).join(`
`)}class Tokenizer{constructor(e){this.options=e||defaults}space(e){const r=this.rules.block.newline.exec(e);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(e){const r=this.rules.block.code.exec(e);if(r){const n=r[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?n:rtrim(n,`
`)}}}fences(e){const r=this.rules.block.fences.exec(e);if(r){const n=r[0],s=indentCodeCompensation(n,r[3]||"");return{type:"code",raw:n,lang:r[2]?r[2].trim().replace(this.rules.inline._escapes,"$1"):r[2],text:s}}}heading(e){const r=this.rules.block.heading.exec(e);if(r){let n=r[2].trim();if(/#$/.test(n)){const s=rtrim(n,"#");(this.options.pedantic||!s||/ $/.test(s))&&(n=s.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const r=this.rules.block.hr.exec(e);if(r)return{type:"hr",raw:r[0]}}blockquote(e){const r=this.rules.block.blockquote.exec(e);if(r){const n=r[0].replace(/^ *>[ \t]?/gm,""),s=this.lexer.state.top;this.lexer.state.top=!0;const a=this.lexer.blockTokens(n);return this.lexer.state.top=s,{type:"blockquote",raw:r[0],tokens:a,text:n}}}list(e){let r=this.rules.block.list.exec(e);if(r){let n,s,a,l,c,u,f,y,b,g,v,S,T=r[1].trim();const N=T.length>1,w={type:"list",raw:"",ordered:N,start:N?+T.slice(0,-1):"",loose:!1,items:[]};T=N?`\\d{1,9}\\${T.slice(-1)}`:`\\${T}`,this.options.pedantic&&(T=N?T:"[*+-]");const A=new RegExp(`^( {0,3}${T})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(S=!1,!(!(r=A.exec(e))||this.rules.block.hr.test(e)));){if(n=r[0],e=e.substring(n.length),y=r[2].split(`
`,1)[0].replace(/^\t+/,q=>" ".repeat(3*q.length)),b=e.split(`
`,1)[0],this.options.pedantic?(l=2,v=y.trimLeft()):(l=r[2].search(/[^ ]/),l=l>4?1:l,v=y.slice(l),l+=r[1].length),u=!1,!y&&/^ *$/.test(b)&&(n+=b+`
`,e=e.substring(b.length+1),S=!0),!S){const q=new RegExp(`^ {0,${Math.min(3,l-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),V=new RegExp(`^ {0,${Math.min(3,l-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),K=new RegExp(`^ {0,${Math.min(3,l-1)}}(?:\`\`\`|~~~)`),J=new RegExp(`^ {0,${Math.min(3,l-1)}}#`);for(;e&&(g=e.split(`
`,1)[0],b=g,this.options.pedantic&&(b=b.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(K.test(b)||J.test(b)||q.test(b)||V.test(e)));){if(b.search(/[^ ]/)>=l||!b.trim())v+=`
`+b.slice(l);else{if(u||y.search(/[^ ]/)>=4||K.test(y)||J.test(y)||V.test(y))break;v+=`
`+b}!u&&!b.trim()&&(u=!0),n+=g+`
`,e=e.substring(g.length+1),y=b.slice(l)}}w.loose||(f?w.loose=!0:/\n *\n *$/.test(n)&&(f=!0)),this.options.gfm&&(s=/^\[[ xX]\] /.exec(v),s&&(a=s[0]!=="[ ] ",v=v.replace(/^\[[ xX]\] +/,""))),w.items.push({type:"list_item",raw:n,task:!!s,checked:a,loose:!1,text:v}),w.raw+=n}w.items[w.items.length-1].raw=n.trimRight(),w.items[w.items.length-1].text=v.trimRight(),w.raw=w.raw.trimRight();const I=w.items.length;for(c=0;c<I;c++)if(this.lexer.state.top=!1,w.items[c].tokens=this.lexer.blockTokens(w.items[c].text,[]),!w.loose){const q=w.items[c].tokens.filter(K=>K.type==="space"),V=q.length>0&&q.some(K=>/\n.*\n/.test(K.raw));w.loose=V}if(w.loose)for(c=0;c<I;c++)w.items[c].loose=!0;return w}}html(e){const r=this.rules.block.html.exec(e);if(r){const n={type:"html",block:!0,raw:r[0],pre:!this.options.sanitizer&&(r[1]==="pre"||r[1]==="script"||r[1]==="style"),text:r[0]};if(this.options.sanitize){const s=this.options.sanitizer?this.options.sanitizer(r[0]):escape$1(r[0]);n.type="paragraph",n.text=s,n.tokens=this.lexer.inline(s)}return n}}def(e){const r=this.rules.block.def.exec(e);if(r){const n=r[1].toLowerCase().replace(/\s+/g," "),s=r[2]?r[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",a=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline._escapes,"$1"):r[3];return{type:"def",tag:n,raw:r[0],href:s,title:a}}}table(e){const r=this.rules.block.table.exec(e);if(r){const n={type:"table",header:splitCells(r[1]).map(s=>({text:s})),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:r[3]&&r[3].trim()?r[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(n.header.length===n.align.length){n.raw=r[0];let s=n.align.length,a,l,c,u;for(a=0;a<s;a++)/^ *-+: *$/.test(n.align[a])?n.align[a]="right":/^ *:-+: *$/.test(n.align[a])?n.align[a]="center":/^ *:-+ *$/.test(n.align[a])?n.align[a]="left":n.align[a]=null;for(s=n.rows.length,a=0;a<s;a++)n.rows[a]=splitCells(n.rows[a],n.header.length).map(f=>({text:f}));for(s=n.header.length,l=0;l<s;l++)n.header[l].tokens=this.lexer.inline(n.header[l].text);for(s=n.rows.length,l=0;l<s;l++)for(u=n.rows[l],c=0;c<u.length;c++)u[c].tokens=this.lexer.inline(u[c].text);return n}}}lheading(e){const r=this.rules.block.lheading.exec(e);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(e){const r=this.rules.block.paragraph.exec(e);if(r){const n=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:n,tokens:this.lexer.inline(n)}}}text(e){const r=this.rules.block.text.exec(e);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(e){const r=this.rules.inline.escape.exec(e);if(r)return{type:"escape",raw:r[0],text:escape$1(r[1])}}tag(e){const r=this.rules.inline.tag.exec(e);if(r)return!this.lexer.state.inLink&&/^<a /i.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):escape$1(r[0]):r[0]}}link(e){const r=this.rules.inline.link.exec(e);if(r){const n=r[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const l=rtrim(n.slice(0,-1),"\\");if((n.length-l.length)%2===0)return}else{const l=findClosingBracket(r[2],"()");if(l>-1){const u=(r[0].indexOf("!")===0?5:4)+r[1].length+l;r[2]=r[2].substring(0,l),r[0]=r[0].substring(0,u).trim(),r[3]=""}}let s=r[2],a="";if(this.options.pedantic){const l=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);l&&(s=l[1],a=l[3])}else a=r[3]?r[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(this.options.pedantic&&!/>$/.test(n)?s=s.slice(1):s=s.slice(1,-1)),outputLink(r,{href:s&&s.replace(this.rules.inline._escapes,"$1"),title:a&&a.replace(this.rules.inline._escapes,"$1")},r[0],this.lexer)}}reflink(e,r){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let s=(n[2]||n[1]).replace(/\s+/g," ");if(s=r[s.toLowerCase()],!s){const a=n[0].charAt(0);return{type:"text",raw:a,text:a}}return outputLink(n,s,n[0],this.lexer)}}emStrong(e,r,n=""){let s=this.rules.inline.emStrong.lDelim.exec(e);if(!s||s[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(s[1]||s[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const l=s[0].length-1;let c,u,f=l,y=0;const b=s[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(b.lastIndex=0,r=r.slice(-1*e.length+l);(s=b.exec(r))!=null;){if(c=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!c)continue;if(u=c.length,s[3]||s[4]){f+=u;continue}else if((s[5]||s[6])&&l%3&&!((l+u)%3)){y+=u;continue}if(f-=u,f>0)continue;u=Math.min(u,u+f+y);const g=e.slice(0,l+s.index+u+1);if(Math.min(l,u)%2){const S=g.slice(1,-1);return{type:"em",raw:g,text:S,tokens:this.lexer.inlineTokens(S)}}const v=g.slice(2,-2);return{type:"strong",raw:g,text:v,tokens:this.lexer.inlineTokens(v)}}}}codespan(e){const r=this.rules.inline.code.exec(e);if(r){let n=r[2].replace(/\n/g," ");const s=/[^ ]/.test(n),a=/^ /.test(n)&&/ $/.test(n);return s&&a&&(n=n.substring(1,n.length-1)),n=escape$1(n,!0),{type:"codespan",raw:r[0],text:n}}}br(e){const r=this.rules.inline.br.exec(e);if(r)return{type:"br",raw:r[0]}}del(e){const r=this.rules.inline.del.exec(e);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(e,r){const n=this.rules.inline.autolink.exec(e);if(n){let s,a;return n[2]==="@"?(s=escape$1(this.options.mangle?r(n[1]):n[1]),a="mailto:"+s):(s=escape$1(n[1]),a=s),{type:"link",raw:n[0],text:s,href:a,tokens:[{type:"text",raw:s,text:s}]}}}url(e,r){let n;if(n=this.rules.inline.url.exec(e)){let s,a;if(n[2]==="@")s=escape$1(this.options.mangle?r(n[0]):n[0]),a="mailto:"+s;else{let l;do l=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0];while(l!==n[0]);s=escape$1(n[0]),n[1]==="www."?a="http://"+n[0]:a=n[0]}return{type:"link",raw:n[0],text:s,href:a,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(e,r){const n=this.rules.inline.text.exec(e);if(n){let s;return this.lexer.state.inRawBlock?s=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):escape$1(n[0]):n[0]:s=escape$1(this.options.smartypants?r(n[0]):n[0]),{type:"text",raw:n[0],text:s}}}}const block={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:noopTest,lheading:/^((?:(?!^bull ).|\n(?!\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};block._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;block._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;block.def=edit(block.def).replace("label",block._label).replace("title",block._title).getRegex();block.bullet=/(?:[*+-]|\d{1,9}[.)])/;block.listItemStart=edit(/^( *)(bull) */).replace("bull",block.bullet).getRegex();block.list=edit(block.list).replace(/bull/g,block.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+block.def.source+")").getRegex();block._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";block._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;block.html=edit(block.html,"i").replace("comment",block._comment).replace("tag",block._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();block.lheading=edit(block.lheading).replace(/bull/g,block.bullet).getRegex();block.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.blockquote=edit(block.blockquote).replace("paragraph",block.paragraph).getRegex();block.normal={...block};block.gfm={...block.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};block.gfm.table=edit(block.gfm.table).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.gfm.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",block.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.pedantic={...block.normal,html:edit(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",block._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:noopTest,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:edit(block.normal._paragraph).replace("hr",block.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",block.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const inline={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:noopTest,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:noopTest,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};inline._punctuation="\\p{P}$+<=>`^|~";inline.punctuation=edit(inline.punctuation,"u").replace(/punctuation/g,inline._punctuation).getRegex();inline.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g;inline.anyPunctuation=/\\[punct]/g;inline._escapes=/\\([punct])/g;inline._comment=edit(block._comment).replace("(?:-->|$)","-->").getRegex();inline.emStrong.lDelim=edit(inline.emStrong.lDelim,"u").replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimAst=edit(inline.emStrong.rDelimAst,"gu").replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimUnd=edit(inline.emStrong.rDelimUnd,"gu").replace(/punct/g,inline._punctuation).getRegex();inline.anyPunctuation=edit(inline.anyPunctuation,"gu").replace(/punct/g,inline._punctuation).getRegex();inline._escapes=edit(inline._escapes,"gu").replace(/punct/g,inline._punctuation).getRegex();inline._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;inline._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;inline.autolink=edit(inline.autolink).replace("scheme",inline._scheme).replace("email",inline._email).getRegex();inline._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;inline.tag=edit(inline.tag).replace("comment",inline._comment).replace("attribute",inline._attribute).getRegex();inline._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;inline._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;inline._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;inline.link=edit(inline.link).replace("label",inline._label).replace("href",inline._href).replace("title",inline._title).getRegex();inline.reflink=edit(inline.reflink).replace("label",inline._label).replace("ref",block._label).getRegex();inline.nolink=edit(inline.nolink).replace("ref",block._label).getRegex();inline.reflinkSearch=edit(inline.reflinkSearch,"g").replace("reflink",inline.reflink).replace("nolink",inline.nolink).getRegex();inline.normal={...inline};inline.pedantic={...inline.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:edit(/^!?\[(label)\]\((.*?)\)/).replace("label",inline._label).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",inline._label).getRegex()};inline.gfm={...inline.normal,escape:edit(inline.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};inline.gfm.url=edit(inline.gfm.url,"i").replace("email",inline.gfm._extended_email).getRegex();inline.breaks={...inline.gfm,br:edit(inline.br).replace("{2,}","*").getRegex(),text:edit(inline.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};function smartypants(t){return t.replace(/---/g,"â").replace(/--/g,"â").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1â").replace(/'/g,"â").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1â").replace(/"/g,"â").replace(/\.{3}/g,"â¦")}function mangle(t){let e="",r,n;const s=t.length;for(r=0;r<s;r++)n=t.charCodeAt(r),Math.random()>.5&&(n="x"+n.toString(16)),e+="&#"+n+";";return e}class Lexer{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||defaults,this.options.tokenizer=this.options.tokenizer||new Tokenizer,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const r={block:block.normal,inline:inline.normal};this.options.pedantic?(r.block=block.pedantic,r.inline=inline.pedantic):this.options.gfm&&(r.block=block.gfm,this.options.breaks?r.inline=inline.breaks:r.inline=inline.gfm),this.tokenizer.rules=r}static get rules(){return{block,inline}}static lex(e,r){return new Lexer(r).lex(e)}static lexInline(e,r){return new Lexer(r).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let r;for(;r=this.inlineQueue.shift();)this.inlineTokens(r.src,r.tokens);return this.tokens}blockTokens(e,r=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(c,u,f)=>u+"    ".repeat(f.length));let n,s,a,l;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(c=>(n=c.call({lexer:this},e,r))?(e=e.substring(n.raw.length),r.push(n),!0):!1))){if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length),n.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length),s=r[r.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text):r.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length),s=r[r.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+n.raw,s.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),r.push(n);continue}if(a=e,this.options.extensions&&this.options.extensions.startBlock){let c=1/0;const u=e.slice(1);let f;this.options.extensions.startBlock.forEach(function(y){f=y.call({lexer:this},u),typeof f=="number"&&f>=0&&(c=Math.min(c,f))}),c<1/0&&c>=0&&(a=e.substring(0,c+1))}if(this.state.top&&(n=this.tokenizer.paragraph(a))){s=r[r.length-1],l&&s.type==="paragraph"?(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):r.push(n),l=a.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length),s=r[r.length-1],s&&s.type==="text"?(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):r.push(n);continue}if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,r}inline(e,r=[]){return this.inlineQueue.push({src:e,tokens:r}),r}inlineTokens(e,r=[]){let n,s,a,l=e,c,u,f;if(this.tokens.links){const y=Object.keys(this.tokens.links);if(y.length>0)for(;(c=this.tokenizer.rules.inline.reflinkSearch.exec(l))!=null;)y.includes(c[0].slice(c[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,c.index)+"["+"a".repeat(c[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(c=this.tokenizer.rules.inline.blockSkip.exec(l))!=null;)l=l.slice(0,c.index)+"["+"a".repeat(c[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(c=this.tokenizer.rules.inline.anyPunctuation.exec(l))!=null;)l=l.slice(0,c.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(u||(f=""),u=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(y=>(n=y.call({lexer:this},e,r))?(e=e.substring(n.raw.length),r.push(n),!0):!1))){if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),s=r[r.length-1],s&&n.type==="text"&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):r.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length),s=r[r.length-1],s&&n.type==="text"&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):r.push(n);continue}if(n=this.tokenizer.emStrong(e,l,f)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.autolink(e,mangle)){e=e.substring(n.raw.length),r.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e,mangle))){e=e.substring(n.raw.length),r.push(n);continue}if(a=e,this.options.extensions&&this.options.extensions.startInline){let y=1/0;const b=e.slice(1);let g;this.options.extensions.startInline.forEach(function(v){g=v.call({lexer:this},b),typeof g=="number"&&g>=0&&(y=Math.min(y,g))}),y<1/0&&y>=0&&(a=e.substring(0,y+1))}if(n=this.tokenizer.inlineText(a,smartypants)){e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(f=n.raw.slice(-1)),u=!0,s=r[r.length-1],s&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):r.push(n);continue}if(e){const y="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(y);break}else throw new Error(y)}}return r}}class Renderer{constructor(e){this.options=e||defaults}code(e,r,n){const s=(r||"").match(/\S*/)[0];if(this.options.highlight){const a=this.options.highlight(e,s);a!=null&&a!==e&&(n=!0,e=a)}return e=e.replace(/\n$/,"")+`
`,s?'<pre><code class="'+this.options.langPrefix+escape$1(s)+'">'+(n?e:escape$1(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:escape$1(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,r){return e}heading(e,r,n,s){if(this.options.headerIds){const a=this.options.headerPrefix+s.slug(n);return`<h${r} id="${a}">${e}</h${r}>
`}return`<h${r}>${e}</h${r}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,r,n){const s=r?"ol":"ul",a=r&&n!==1?' start="'+n+'"':"";return"<"+s+a+`>
`+e+"</"+s+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,r){return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,r){const n=r.header?"th":"td";return(r.align?`<${n} align="${r.align}">`:`<${n}>`)+e+`</${n}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,r,n){if(e=cleanUrl(this.options.sanitize,this.options.baseUrl,e),e===null)return n;let s='<a href="'+e+'"';return r&&(s+=' title="'+r+'"'),s+=">"+n+"</a>",s}image(e,r,n){if(e=cleanUrl(this.options.sanitize,this.options.baseUrl,e),e===null)return n;let s=`<img src="${e}" alt="${n}"`;return r&&(s+=` title="${r}"`),s+=this.options.xhtml?"/>":">",s}text(e){return e}}class TextRenderer{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,r,n){return""+n}image(e,r,n){return""+n}br(){return""}}class Slugger{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,r){let n=e,s=0;if(this.seen.hasOwnProperty(n)){s=this.seen[e];do s++,n=e+"-"+s;while(this.seen.hasOwnProperty(n))}return r||(this.seen[e]=s,this.seen[n]=0),n}slug(e,r={}){const n=this.serialize(e);return this.getNextSafeSlug(n,r.dryrun)}}class Parser{constructor(e){this.options=e||defaults,this.options.renderer=this.options.renderer||new Renderer,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new TextRenderer,this.slugger=new Slugger}static parse(e,r){return new Parser(r).parse(e)}static parseInline(e,r){return new Parser(r).parseInline(e)}parse(e,r=!0){let n="",s,a,l,c,u,f,y,b,g,v,S,T,N,w,A,I,q,V,K;const J=e.length;for(s=0;s<J;s++){if(v=e[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[v.type]&&(K=this.options.extensions.renderers[v.type].call({parser:this},v),K!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(v.type))){n+=K||"";continue}switch(v.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{n+=this.renderer.heading(this.parseInline(v.tokens),v.depth,unescape$1(this.parseInline(v.tokens,this.textRenderer)),this.slugger);continue}case"code":{n+=this.renderer.code(v.text,v.lang,v.escaped);continue}case"table":{for(b="",y="",c=v.header.length,a=0;a<c;a++)y+=this.renderer.tablecell(this.parseInline(v.header[a].tokens),{header:!0,align:v.align[a]});for(b+=this.renderer.tablerow(y),g="",c=v.rows.length,a=0;a<c;a++){for(f=v.rows[a],y="",u=f.length,l=0;l<u;l++)y+=this.renderer.tablecell(this.parseInline(f[l].tokens),{header:!1,align:v.align[l]});g+=this.renderer.tablerow(y)}n+=this.renderer.table(b,g);continue}case"blockquote":{g=this.parse(v.tokens),n+=this.renderer.blockquote(g);continue}case"list":{for(S=v.ordered,T=v.start,N=v.loose,c=v.items.length,g="",a=0;a<c;a++)A=v.items[a],I=A.checked,q=A.task,w="",A.task&&(V=this.renderer.checkbox(I),N?A.tokens.length>0&&A.tokens[0].type==="paragraph"?(A.tokens[0].text=V+" "+A.tokens[0].text,A.tokens[0].tokens&&A.tokens[0].tokens.length>0&&A.tokens[0].tokens[0].type==="text"&&(A.tokens[0].tokens[0].text=V+" "+A.tokens[0].tokens[0].text)):A.tokens.unshift({type:"text",text:V}):w+=V),w+=this.parse(A.tokens,N),g+=this.renderer.listitem(w,q,I);n+=this.renderer.list(g,S,T);continue}case"html":{n+=this.renderer.html(v.text,v.block);continue}case"paragraph":{n+=this.renderer.paragraph(this.parseInline(v.tokens));continue}case"text":{for(g=v.tokens?this.parseInline(v.tokens):v.text;s+1<J&&e[s+1].type==="text";)v=e[++s],g+=`
`+(v.tokens?this.parseInline(v.tokens):v.text);n+=r?this.renderer.paragraph(g):g;continue}default:{const Q='Token with "'+v.type+'" type was not found.';if(this.options.silent){console.error(Q);return}else throw new Error(Q)}}}return n}parseInline(e,r){r=r||this.renderer;let n="",s,a,l;const c=e.length;for(s=0;s<c;s++){if(a=e[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]&&(l=this.options.extensions.renderers[a.type].call({parser:this},a),l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type))){n+=l||"";continue}switch(a.type){case"escape":{n+=r.text(a.text);break}case"html":{n+=r.html(a.text);break}case"link":{n+=r.link(a.href,a.title,this.parseInline(a.tokens,r));break}case"image":{n+=r.image(a.href,a.title,a.text);break}case"strong":{n+=r.strong(this.parseInline(a.tokens,r));break}case"em":{n+=r.em(this.parseInline(a.tokens,r));break}case"codespan":{n+=r.codespan(a.text);break}case"br":{n+=r.br();break}case"del":{n+=r.del(this.parseInline(a.tokens,r));break}case"text":{n+=r.text(a.text);break}default:{const u='Token with "'+a.type+'" type was not found.';if(this.options.silent){console.error(u);return}else throw new Error(u)}}}return n}}class Hooks{constructor(e){this.options=e||defaults}preprocess(e){return e}postprocess(e){return e}}ge(Hooks,"passThroughHooks",new Set(["preprocess","postprocess"]));var Me,nt,Ge,ft;class Marked{constructor(...e){rt(this,Me);rt(this,Ge);ge(this,"defaults",getDefaults());ge(this,"options",this.setOptions);ge(this,"parse",We(this,Me,nt).call(this,Lexer.lex,Parser.parse));ge(this,"parseInline",We(this,Me,nt).call(this,Lexer.lexInline,Parser.parseInline));ge(this,"Parser",Parser);ge(this,"parser",Parser.parse);ge(this,"Renderer",Renderer);ge(this,"TextRenderer",TextRenderer);ge(this,"Lexer",Lexer);ge(this,"lexer",Lexer.lex);ge(this,"Tokenizer",Tokenizer);ge(this,"Slugger",Slugger);ge(this,"Hooks",Hooks);this.use(...e)}walkTokens(e,r){let n=[];for(const s of e)switch(n=n.concat(r.call(this,s)),s.type){case"table":{for(const a of s.header)n=n.concat(this.walkTokens(a.tokens,r));for(const a of s.rows)for(const l of a)n=n.concat(this.walkTokens(l.tokens,r));break}case"list":{n=n.concat(this.walkTokens(s.items,r));break}default:this.defaults.extensions&&this.defaults.extensions.childTokens&&this.defaults.extensions.childTokens[s.type]?this.defaults.extensions.childTokens[s.type].forEach(a=>{n=n.concat(this.walkTokens(s[a],r))}):s.tokens&&(n=n.concat(this.walkTokens(s.tokens,r)))}return n}use(...e){const r=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{const s={...n};if(s.async=this.defaults.async||s.async||!1,n.extensions&&(n.extensions.forEach(a=>{if(!a.name)throw new Error("extension name required");if(a.renderer){const l=r.renderers[a.name];l?r.renderers[a.name]=function(...c){let u=a.renderer.apply(this,c);return u===!1&&(u=l.apply(this,c)),u}:r.renderers[a.name]=a.renderer}if(a.tokenizer){if(!a.level||a.level!=="block"&&a.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");r[a.level]?r[a.level].unshift(a.tokenizer):r[a.level]=[a.tokenizer],a.start&&(a.level==="block"?r.startBlock?r.startBlock.push(a.start):r.startBlock=[a.start]:a.level==="inline"&&(r.startInline?r.startInline.push(a.start):r.startInline=[a.start]))}a.childTokens&&(r.childTokens[a.name]=a.childTokens)}),s.extensions=r),n.renderer){const a=this.defaults.renderer||new Renderer(this.defaults);for(const l in n.renderer){const c=a[l];a[l]=(...u)=>{let f=n.renderer[l].apply(a,u);return f===!1&&(f=c.apply(a,u)),f}}s.renderer=a}if(n.tokenizer){const a=this.defaults.tokenizer||new Tokenizer(this.defaults);for(const l in n.tokenizer){const c=a[l];a[l]=(...u)=>{let f=n.tokenizer[l].apply(a,u);return f===!1&&(f=c.apply(a,u)),f}}s.tokenizer=a}if(n.hooks){const a=this.defaults.hooks||new Hooks;for(const l in n.hooks){const c=a[l];Hooks.passThroughHooks.has(l)?a[l]=u=>{if(this.defaults.async)return Promise.resolve(n.hooks[l].call(a,u)).then(y=>c.call(a,y));const f=n.hooks[l].call(a,u);return c.call(a,f)}:a[l]=(...u)=>{let f=n.hooks[l].apply(a,u);return f===!1&&(f=c.apply(a,u)),f}}s.hooks=a}if(n.walkTokens){const a=this.defaults.walkTokens;s.walkTokens=function(l){let c=[];return c.push(n.walkTokens.call(this,l)),a&&(c=c.concat(a.call(this,l))),c}}this.defaults={...this.defaults,...s}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}}Me=new WeakSet,nt=function(e,r){return(n,s,a)=>{typeof s=="function"&&(a=s,s=null);const l={...s};s={...this.defaults,...l};const c=We(this,Ge,ft).call(this,s.silent,s.async,a);if(typeof n>"u"||n===null)return c(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return c(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(checkDeprecations(s,a),s.hooks&&(s.hooks.options=s),a){const u=s.highlight;let f;try{s.hooks&&(n=s.hooks.preprocess(n)),f=e(n,s)}catch(g){return c(g)}const y=g=>{let v;if(!g)try{s.walkTokens&&this.walkTokens(f,s.walkTokens),v=r(f,s),s.hooks&&(v=s.hooks.postprocess(v))}catch(S){g=S}return s.highlight=u,g?c(g):a(null,v)};if(!u||u.length<3||(delete s.highlight,!f.length))return y();let b=0;this.walkTokens(f,g=>{g.type==="code"&&(b++,setTimeout(()=>{u(g.text,g.lang,(v,S)=>{if(v)return y(v);S!=null&&S!==g.text&&(g.text=S,g.escaped=!0),b--,b===0&&y()})},0))}),b===0&&y();return}if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(n):n).then(u=>e(u,s)).then(u=>s.walkTokens?Promise.all(this.walkTokens(u,s.walkTokens)).then(()=>u):u).then(u=>r(u,s)).then(u=>s.hooks?s.hooks.postprocess(u):u).catch(c);try{s.hooks&&(n=s.hooks.preprocess(n));const u=e(n,s);s.walkTokens&&this.walkTokens(u,s.walkTokens);let f=r(u,s);return s.hooks&&(f=s.hooks.postprocess(f)),f}catch(u){return c(u)}}},Ge=new WeakSet,ft=function(e,r,n){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const a="<p>An error occurred:</p><pre>"+escape$1(s.message+"",!0)+"</pre>";if(r)return Promise.resolve(a);if(n){n(null,a);return}return a}if(r)return Promise.reject(s);if(n){n(s);return}throw s}};const markedInstance=new Marked(defaults);function marked(t,e,r){return markedInstance.parse(t,e,r)}marked.options=marked.setOptions=function(t){return markedInstance.setOptions(t),marked.defaults=markedInstance.defaults,changeDefaults(marked.defaults),marked};marked.getDefaults=getDefaults;marked.defaults=defaults;marked.use=function(...t){return markedInstance.use(...t),marked.defaults=markedInstance.defaults,changeDefaults(marked.defaults),marked};marked.walkTokens=function(t,e){return markedInstance.walkTokens(t,e)};marked.parseInline=markedInstance.parseInline;marked.Parser=Parser;marked.parser=Parser.parse;marked.Renderer=Renderer;marked.TextRenderer=TextRenderer;marked.Lexer=Lexer;marked.lexer=Lexer.lex;marked.Tokenizer=Tokenizer;marked.Slugger=Slugger;marked.Hooks=Hooks;marked.parse=marked;marked.options;marked.setOptions;marked.use;marked.walkTokens;marked.parseInline;Parser.parse;Lexer.lex;const _sfc_main$6={props:{config:{type:Object,required:!0},value:{required:!0},meta:{},errors:{type:Array},readOnly:Boolean,syncable:Boolean,namePrefix:String,fieldPathPrefix:String},inject:{storeName:{default:null},isInsideConfigFields:{default:!1}},computed:{fieldtypeComponent(){return`${this.config.component||this.config.type}-fieldtype`},fieldtypeComponentExists(){return Vue.options.components[this.fieldtypeComponent]!==void 0},instructions(){return this.config.instructions?this.renderMarkdownAndLinks(__(this.config.instructions)):null},hasError(){return this.errors&&this.errors.length>0},isReadOnly(){return this.storeState.isRoot===!1&&!this.config.localizable?!0:this.isLocked||this.readOnly||this.config.visibility==="read_only"||!1},isLocalizable(){return this.$config.get("sites").length>1&&this.config.localizable},isTab(){return this.config.type==="tab"},classes(){return["form-group publish-field","publish-field__"+this.config.handle,`${this.config.component||this.config.type}-fieldtype`,,this.isReadOnly?"read-only-field":"",this.isInsideConfigFields?"config-field":`${tailwind_width_class(this.config.width)}`,this.config.classes||"",this.config.full_width_setting?"full-width-setting":"",{"has-error":this.hasError||this.hasNestedError}]},fieldId(){return"field_"+this.config.handle},locks(){return this.storeState.fieldLocks||{}},isLocked(){return Object.keys(this.locks).includes(this.config.handle)},lockingUser(){if(this.isLocked){let t=this.locks[this.config.handle];if(typeof t=="object")return t}},isSynced(){if(this.syncable)return!this.storeState.localizedFields.includes(this.config.handle)},storeState(){return this.$store.state.publish[this.storeName]||{}},hasNestedError(){const t=`${this.fieldPathPrefix||this.config.handle}.`;return Object.keys(this.storeState.errors??[]).some(e=>e.startsWith(t))},labelText(){return this.config.display||Vue.$options.filters.titleize(Vue.$options.filters.deslugify(this.config.handle))},showLabelText(){return!this.config.hide_display},showLabel(){return this.showLabelText||this.isReadOnly||this.config.required||this.isLocked||this.isLocalizable||this.syncable}},methods:{focused(){this.isLocked||this.$emit("focus")},blurred(){this.isLocked||this.$emit("blur")},renderMarkdownAndLinks(t){var e=new marked.Renderer;return e.link=function(r,n,s){var a=marked.Renderer.prototype.link.call(this,r,n,s);return a.replace("<a","<a target='_blank' ")},marked.setOptions({renderer:e}),marked(t)}}};var _sfc_render$6=function(){var e=this,r=e._self._c;return r("publish-field-meta",{attrs:{config:e.config,"initial-value":e.value,"initial-meta":e.meta},scopedSlots:e._u([{key:"default",fn:function({meta:n,value:s,loading:a}){return r("div",{class:e.classes},[r("div",{staticClass:"field-inner"},[e.showLabel?r("label",{staticClass:"publish-field-label",class:{"font-bold":e.config.bold},attrs:{for:e.fieldId}},[e.showLabelText?r("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.config.handle,delay:500,autoHide:!1},expression:"{content: config.handle, delay: 500, autoHide: false}"}],staticClass:"mr-1",class:{"text-gray-600":e.syncable&&e.isSynced},domProps:{textContent:e._s(e.__(e.labelText))}}):e._e(),e.config.required?r("i",{staticClass:"required mr-1"},[e._v("*")]):e._e(),e.isLocked?r("avatar",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.lockingUser.name,expression:"lockingUser.name"}],staticClass:"w-4 rounded-full -mt-px ml-2 mr-2",attrs:{user:e.lockingUser}}):e._e(),e.isReadOnly&&!e.isTab?r("span",{staticClass:"text-gray-500 font-normal text-2xs mr-1"},[e._v(" "+e._s(e.isLocked?e.__("Locked"):e.__("Read Only"))+" ")]):e._e(),e.isLocalizable&&!e.isTab?r("svg-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:e.__("Localizable field"),expression:"__('Localizable field')",modifiers:{top:!0}}],staticClass:"h-4 mr-1 w-4 text-gray-600",attrs:{name:"translate"}}):e._e(),!e.isReadOnly&&!e.isTab?r("button",{directives:[{name:"show",rawName:"v-show",value:e.syncable&&e.isSynced,expression:"syncable && isSynced"}],staticClass:"outline-none",class:{flex:e.syncable&&e.isSynced},on:{click:function(l){return e.$emit("desynced")}}},[r("svg-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:e.__("messages.field_synced_with_origin"),expression:"__('messages.field_synced_with_origin')",modifiers:{top:!0}}],staticClass:"h-4 w-4 mr-1.5 mb-1 text-gray-600",attrs:{name:"light/hyperlink"}})],1):e._e(),!e.isReadOnly&&!e.isTab?r("button",{directives:[{name:"show",rawName:"v-show",value:e.syncable&&!e.isSynced,expression:"syncable && !isSynced"}],staticClass:"outline-none",class:{flex:e.syncable&&!e.isSynced},on:{click:function(l){return e.$emit("synced")}}},[r("svg-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:e.__("messages.field_desynced_from_origin"),expression:"__('messages.field_desynced_from_origin')",modifiers:{top:!0}}],staticClass:"h-4 w-4 mr-1.5 mb-1 text-gray-600",attrs:{name:"light/hyperlink-broken"}})],1):e._e()],1):e._e(),e.instructions&&e.config.instructions_position!=="below"?r("div",{staticClass:"help-block",class:{"-mt-2":e.showLabel},domProps:{innerHTML:e._s(e.instructions)}}):e._e()]),a?r("loading-graphic",{attrs:{size:16,inline:!0}}):e._e(),a?e._e():e._t("fieldtype",function(){return[e.fieldtypeComponentExists?r(e.fieldtypeComponent,{tag:"component",attrs:{config:e.config,value:s,meta:n,handle:e.config.handle,"name-prefix":e.namePrefix,"field-path-prefix":e.fieldPathPrefix,"read-only":e.isReadOnly},on:{input:function(l){return e.$emit("input",l)},"meta-updated":function(l){return e.$emit("meta-updated",l)},focus:e.focused,blur:e.blurred}}):r("div",{staticClass:"text-xs text-red-500"},[e._v("Component "),r("code",{domProps:{textContent:e._s(e.fieldtypeComponent)}}),e._v(" does not exist.")])]}),e.instructions&&e.config.instructions_position==="below"?r("div",{staticClass:"help-block mt-2",domProps:{innerHTML:e._s(e.instructions)}}):e._e(),e.hasError?r("div",e._l(e.errors,function(l,c){return r("small",{key:c,staticClass:"help-block text-red-500 mt-2 mb-0",domProps:{textContent:e._s(l)}})}),0):e._e()],2)}}],null,!0)})},_sfc_staticRenderFns$6=[],__component__$6=normalizeComponent(_sfc_main$6,_sfc_render$6,_sfc_staticRenderFns$6,!1,null,null,null,null);const PublishField=__component__$6.exports,KEYS=["if","if_any","show_when","show_when_any","unless","unless_any","hide_when","hide_when_any"],OPERATORS=["equals","not","contains","contains_any","===","!==",">",">=","<","<=","custom"],ALIASES={is:"equals","==":"equals",isnt:"not","!=":"not",includes:"contains",includes_any:"contains_any"};var VERSION="1.13.6",root=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},ArrayProto=Array.prototype,ObjProto=Object.prototype,push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeIsArray=Array.isArray,nativeKeys=Object.keys,_isNaN=isNaN,hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],MAX_ARRAY_INDEX=Math.pow(2,53)-1;function _$1(t){if(t instanceof _$1)return t;if(!(this instanceof _$1))return new _$1(t);this._wrapped=t}_$1.VERSION=VERSION;_$1.prototype.value=function(){return this._wrapped};_$1.prototype.valueOf=_$1.prototype.toJSON=_$1.prototype.value;_$1.prototype.toString=function(){return String(this._wrapped)};function identity(t){return t}function tagTester(t){var e="[object "+t+"]";return function(r){return toString.call(r)===e}}var isFunction=tagTester("Function"),nodelist=root.document&&root.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof nodelist!="function"&&(isFunction=function(t){return typeof t=="function"||!1});const isFunction$1=isFunction;function isObject(t){var e=typeof t;return e==="function"||e==="object"&&!!t}const isArray=nativeIsArray||tagTester("Array");function createAssigner(t,e){return function(r){var n=arguments.length;if(e&&(r=Object(r)),n<2||r==null)return r;for(var s=1;s<n;s++)for(var a=arguments[s],l=t(a),c=l.length,u=0;u<c;u++){var f=l[u];(!e||r[f]===void 0)&&(r[f]=a[f])}return r}}function has(t,e){return t!=null&&hasOwnProperty.call(t,e)}function emulatedSet(t){for(var e={},r=t.length,n=0;n<r;++n)e[t[n]]=!0;return{contains:function(s){return e[s]===!0},push:function(s){return e[s]=!0,t.push(s)}}}function collectNonEnumProps(t,e){e=emulatedSet(e);var r=nonEnumerableProps.length,n=t.constructor,s=isFunction$1(n)&&n.prototype||ObjProto,a="constructor";for(has(t,a)&&!e.contains(a)&&e.push(a);r--;)a=nonEnumerableProps[r],a in t&&t[a]!==s[a]&&!e.contains(a)&&e.push(a)}function keys(t){if(!isObject(t))return[];if(nativeKeys)return nativeKeys(t);var e=[];for(var r in t)has(t,r)&&e.push(r);return hasEnumBug&&collectNonEnumProps(t,e),e}const extendOwn=createAssigner(keys);function isMatch(t,e){var r=keys(e),n=r.length;if(t==null)return!n;for(var s=Object(t),a=0;a<n;a++){var l=r[a];if(e[l]!==s[l]||!(l in s))return!1}return!0}function matcher(t){return t=extendOwn({},t),function(e){return isMatch(e,t)}}function deepGet(t,e){for(var r=e.length,n=0;n<r;n++){if(t==null)return;t=t[e[n]]}return r?t:void 0}function toPath$1(t){return isArray(t)?t:[t]}_$1.toPath=toPath$1;function toPath(t){return _$1.toPath(t)}function property(t){return t=toPath(t),function(e){return deepGet(e,t)}}function optimizeCb(t,e,r){if(e===void 0)return t;switch(r??3){case 1:return function(n){return t.call(e,n)};case 3:return function(n,s,a){return t.call(e,n,s,a)};case 4:return function(n,s,a,l){return t.call(e,n,s,a,l)}}return function(){return t.apply(e,arguments)}}function baseIteratee(t,e,r){return t==null?identity:isFunction$1(t)?optimizeCb(t,e,r):isObject(t)&&!isArray(t)?matcher(t):property(t)}function iteratee(t,e){return baseIteratee(t,e,1/0)}_$1.iteratee=iteratee;function cb(t,e,r){return _$1.iteratee!==iteratee?_$1.iteratee(t,e):baseIteratee(t,e,r)}function createSizePropertyCheck(t){return function(e){var r=t(e);return typeof r=="number"&&r>=0&&r<=MAX_ARRAY_INDEX}}function shallowProperty(t){return function(e){return e==null?void 0:e[t]}}const getLength=shallowProperty("length"),isArrayLike=createSizePropertyCheck(getLength);function map(t,e,r){e=cb(e,r);for(var n=!isArrayLike(t)&&keys(t),s=(n||t).length,a=Array(s),l=0;l<s;l++){var c=n?n[l]:l;a[l]=e(t[c],c,t)}return a}function each(t,e,r){e=optimizeCb(e,r);var n,s;if(isArrayLike(t))for(n=0,s=t.length;n<s;n++)e(t[n],n,t);else{var a=keys(t);for(n=0,s=a.length;n<s;n++)e(t[a[n]],a[n],t)}return t}function filter(t,e,r){var n=[];return e=cb(e,r),each(t,function(s,a,l){e(s,a,l)&&n.push(s)}),n}function chain(t){var e=_$1(t);return e._chain=!0,e}function functions(t){var e=[];for(var r in t)isFunction$1(t[r])&&e.push(r);return e.sort()}function chainResult(t,e){return t._chain?_$1(e).chain():e}function mixin(t){return each(functions(t),function(e){var r=_$1[e]=t[e];_$1.prototype[e]=function(){var n=[this._wrapped];return push.apply(n,arguments),chainResult(this,r.apply(_$1,n))}}),_$1}mixin({chain,filter,each});class Converter{fromBlueprint(e,r=null){return map(e,(n,s)=>this.splitRhs(s,n,r))}toBlueprint(e){let r={};return each(e,n=>{r[n.field]=this.combineRhs(n)}),r}splitRhs(e,r,n=null){return{field:this.getScopedFieldHandle(e,n),operator:this.getOperatorFromRhs(r),value:this.getValueFromRhs(r)}}getScopedFieldHandle(e,r){return e.startsWith("root.")||!r?e:r+e}getOperatorFromRhs(e){let r="==";return chain(this.getOperatorsAndAliases()).filter(n=>new RegExp(`^${n} [^=]`).test(this.normalizeConditionString(e))).each(n=>r=n),this.normalizeOperator(r)}normalizeOperator(e){return ALIASES[e]?ALIASES[e]:e}getValueFromRhs(e){let r=this.normalizeConditionString(e);return chain(this.getOperatorsAndAliases()).filter(n=>new RegExp(`^${n} [^=]`).test(r)).each(n=>r=r.replace(new RegExp(`^${n}[ ]*`),"")),r}combineRhs(e){let r=e.operator?e.operator.trim():"",n=e.value.trim();return`${r} ${n}`.trim()}getOperatorsAndAliases(){return OPERATORS.concat(Object.keys(ALIASES))}normalizeConditionString(e){return e===null?"null":e===""?"empty":e.toString()}}function data_get$1(t,e,r=null){var n=Array.isArray(e)?e:e.split("."),s=n.reduce((a,l)=>a&&a[l],t);return s!==void 0?s:r}const isString=tagTester("String");var isArguments=tagTester("Arguments");(function(){isArguments(arguments)||(isArguments=function(t){return has(t,"callee")})})();const isArguments$1=isArguments;function isEmpty(t){if(t==null)return!0;var e=getLength(t);return typeof e=="number"&&(isArray(t)||isString(t)||isArguments$1(t))?e===0:getLength(keys(t))===0}function values(t){for(var e=keys(t),r=e.length,n=Array(r),s=0;s<r;s++)n[s]=t[e[s]];return n}function sortedIndex(t,e,r,n){r=cb(r,n,1);for(var s=r(e),a=0,l=getLength(t);a<l;){var c=Math.floor((a+l)/2);r(t[c])<s?a=c+1:l=c}return a}function createPredicateIndexFinder(t){return function(e,r,n){r=cb(r,n);for(var s=getLength(e),a=t>0?0:s-1;a>=0&&a<s;a+=t)if(r(e[a],a,e))return a;return-1}}const findIndex=createPredicateIndexFinder(1),isNumber=tagTester("Number");function isNaN$1(t){return isNumber(t)&&_isNaN(t)}function createIndexFinder(t,e,r){return function(n,s,a){var l=0,c=getLength(n);if(typeof a=="number")t>0?l=a>=0?a:Math.max(a+c,l):c=a>=0?Math.min(a+1,c):a+c+1;else if(r&&a&&c)return a=r(n,s),n[a]===s?a:-1;if(s!==s)return a=e(slice.call(n,l,c),isNaN$1),a>=0?a+l:-1;for(a=t>0?l:c-1;a>=0&&a<c;a+=t)if(n[a]===s)return a;return-1}}const indexOf=createIndexFinder(1,findIndex,sortedIndex);function contains(t,e,r,n){return isArrayLike(t)||(t=values(t)),(typeof r!="number"||n)&&(r=0),indexOf(t,e,r)>=0}function intersection(t){for(var e=[],r=arguments.length,n=0,s=getLength(t);n<s;n++){var a=t[n];if(!contains(e,a)){var l;for(l=1;l<r&&contains(arguments[l],a);l++);l===r&&e.push(a)}}return e}function negate(t){return function(){return!t.apply(this,arguments)}}function reject(t,e,r){return filter(t,negate(cb(e)),r)}function initial(t,e,r){return slice.call(t,0,Math.max(0,t.length-(e==null||r?1:e)))}function first(t,e,r){return t==null||t.length<1?e==null||r?void 0:[]:e==null||r?t[0]:initial(t,t.length-e)}mixin({chain,map,each,filter,reject,first,isEmpty});const NUMBER_SPECIFIC_COMPARISONS=[">",">=","<","<="];class Validator{constructor(t,e,r,n){this.field=t,this.values=e,this.rootValues=r?r.state.publish[n].values:!1,this.store=r,this.storeName=n,this.passOnAny=!1,this.showOnPass=!0,this.converter=new Converter}passesConditions(t){let e=t||this.getConditions();if(e===void 0)return!0;if(this.isCustomConditionWithoutTarget(e))return this.passesCustomCondition(this.prepareCondition(e));let r=this.passOnAny?this.passesAnyConditions(e):this.passesAllConditions(e);return this.showOnPass?r:!r}getConditions(){let t=chain(KEYS).filter(r=>this.field[r]).first().value();if(!t)return;t.includes("any")&&(this.passOnAny=!0),(t.includes("unless")||t.includes("hide_when"))&&(this.showOnPass=!1);let e=this.field[t];return this.isCustomConditionWithoutTarget(e)?e:this.converter.fromBlueprint(e,this.field.prefix)}isCustomConditionWithoutTarget(t){return isString(t)}passesAllConditions(t){return chain(t).map(e=>this.prepareCondition(e)).reject(e=>this.passesCondition(e)).isEmpty().value()}passesAnyConditions(t){return!chain(t).map(e=>this.prepareCondition(e)).filter(e=>this.passesCondition(e)).isEmpty().value()}prepareCondition(t){if(isString(t)||t.operator==="custom")return this.prepareCustomCondition(t);let e=this.prepareOperator(t.operator),r=this.prepareLhs(t.field,e),n=this.prepareRhs(t.value,e);return{lhs:r,operator:e,rhs:n}}prepareOperator(t){switch(t){case null:case"":case"is":case"equals":return"==";case"isnt":case"not":case"Â¯\\_(ã)_/Â¯":return"!=";case"includes":case"contains":return"includes";case"includes_any":case"contains_any":return"includes_any"}return t}prepareLhs(t,e){let r=this.getFieldValue(t);return NUMBER_SPECIFIC_COMPARISONS.includes(e)?Number(r):e==="includes"&&!isObject(r)?r?r.toString():"":(isString(r)&&isEmpty(r)&&(r=null),isString(r)?JSON.stringify(r.trim()):r)}prepareRhs(t,e){switch(t){case"null":return null;case"true":return!0;case"false":return!1}return NUMBER_SPECIFIC_COMPARISONS.includes(e)?Number(t):t==="empty"||e==="includes"||e==="includes_any"?t:isString(t)?JSON.stringify(t.trim()):t}prepareCustomCondition(t){let e=this.prepareFunctionName(t.value||t),r=this.prepareParams(t.value||t),n=t.field?this.getFieldValue(t.field):null,s=t.field;return{functionName:e,params:r,target:n,targetHandle:s}}prepareFunctionName(t){return t.replace(new RegExp("^custom "),"").split(":")[0]}prepareParams(t){let e=t.split(":")[1];return e?e.split(",").map(r=>r.trim()):[]}getFieldValue(t){return t.startsWith("root.")?data_get$1(this.rootValues,t.replace(new RegExp("^root."),"")):data_get$1(this.values,t)}passesCondition(condition){return condition.functionName?this.passesCustomCondition(condition):condition.operator==="includes"?this.passesIncludesCondition(condition):condition.operator==="includes_any"?this.passesIncludesAnyCondition(condition):(condition.rhs==="empty"&&(condition.lhs=isEmpty(condition.lhs),condition.rhs=!0),isObject(condition.lhs)?!1:eval(`${condition.lhs} ${condition.operator} ${condition.rhs}`))}passesIncludesCondition(t){return t.lhs.includes(t.rhs)}passesIncludesAnyCondition(t){let e=t.rhs.split(",").map(r=>r.trim());return Array.isArray(t.lhs)?intersection(t.lhs,e).length:new RegExp(e.join("|")).test(t.lhs)}passesCustomCondition(t){let e=data_get$1(this.store.state.statamic.conditions,t.functionName);if(typeof e!="function")return console.error(`Statamic field condition [${t.functionName}] was not properly defined.`),!1;let r=e({params:t.params,target:t.target,targetHandle:t.targetHandle,values:this.values,root:this.rootValues,store:this.store,storeName:this.storeName});return this.showOnPass?r:!r}passesNonRevealerConditions(t){let e=this.getConditions();if(this.isCustomConditionWithoutTarget(e))return this.passesConditions(e);let r=data_get$1(this.store.state.publish[this.storeName],"revealerFields",[]),n=chain(this.getConditions()).reject(s=>r.includes(this.relativeLhsToAbsoluteFieldPath(s.field,t))).value();return this.passesConditions(n)}relativeLhsToAbsoluteFieldPath(t,e){return e?t.startsWith("root.")?t.replace(/^root\./,""):e+"."+t:t}}const ValidatesFieldConditions={inject:{storeName:{default:"base"}},methods:{showField(t,e){let r=e||t.handle,n=e?e.replace(new RegExp("."+t.handle+"$"),""):"";if(t.visibility==="hidden"||this.shouldForceHiddenField(r))return this.$store.commit(`publish/${this.storeName}/setHiddenField`,{dottedKey:r,hidden:"force",omitValue:!1}),!1;let s=new Validator(t,this.values,this.$store,this.storeName),a=s.passesConditions();return t.always_save===!0?(this.$store.commit(`publish/${this.storeName}/setHiddenField`,{dottedKey:r,hidden:!a,omitValue:!1}),a):(this.$nextTick(()=>{this.$store.commit(`publish/${this.storeName}/setHiddenField`,{dottedKey:r,hidden:!a,omitValue:t.type==="revealer"||!s.passesNonRevealerConditions(n)})}),a)},shouldForceHiddenField(t){return data_get$1(this.$store.state.publish[this.storeName].hiddenFields[t],"hidden")==="force"}}},_sfc_main$5={components:{PublishField},mixins:[ValidatesFieldConditions],inject:["storeName"],props:{fields:{type:Array,required:!0},readOnly:Boolean,syncable:Boolean,syncableFields:Array,namePrefix:String},computed:{state(){return this.$store.state.publish[this.storeName]},values(){return this.state.values},meta(){return this.state.meta},errors(){return this.state.errors}},methods:{isSyncableField(t){return this.syncable?this.syncableFields?this.syncableFields.includes(t.handle):!0:!1}}};var _sfc_render$5=function t(){var e=this,r=e._self._c;return r("div",{staticClass:"publish-fields @container"},e._l(e.fields,function(n){return r("publish-field",{directives:[{name:"show",rawName:"v-show",value:e.showField(n),expression:"showField(field)"}],key:n.handle,attrs:{config:n,value:e.values[n.handle],meta:e.meta[n.handle],errors:e.errors[n.handle],"read-only":e.readOnly,syncable:e.isSyncableField(n),"name-prefix":e.namePrefix},on:{input:function(s){return e.$emit("updated",n.handle,s)},"meta-updated":function(s){return e.$emit("meta-updated",n.handle,s)},synced:function(s){return e.$emit("synced",n.handle)},desynced:function(s){return e.$emit("desynced",n.handle)},focus:function(s){return e.$emit("focus",n.handle)},blur:function(s){return e.$emit("blur",n.handle)}}})}),1)},_sfc_staticRenderFns$5=[],__component__$5=normalizeComponent(_sfc_main$5,_sfc_render$5,_sfc_staticRenderFns$5,!1,null,null,null,null);const PublishFields=__component__$5.exports,_sfc_main$4={components:{PublishFields},props:{filter:Object,values:Object},computed:{defaultValues(){return this.filter.values||{}},containerValues(){return clone(this.values||this.defaultValues)}},methods:{updateValues(t){let e=clone(t);Object.keys(t).forEach(r=>{_.isEmpty(t[r])&&delete e[r]}),this.$emit("changed",e)},resetAll(){this.$emit("changed",null),this.$emit("cleared")},close(){this.$emit("closed")}}};var _sfc_render$4=function t(){var e=this,r=e._self._c;return r("div",{staticClass:"w-full no-label"},[e.filter.fields.length?r("publish-container",{staticClass:"p-3",attrs:{name:`filter-${e.filter.handle}`,meta:{},values:e.containerValues,"track-dirty-state":!1},on:{updated:e.updateValues},scopedSlots:e._u([{key:"default",fn:function({setFieldValue:n}){return r("publish-fields",{attrs:{fields:e.filter.fields,"name-prefix":`filter-${e.filter.handle}`},on:{updated:n}})}}],null,!1,1948012401)}):e._e(),r("div",{staticClass:"flex border-t"},[r("button",{staticClass:"p-2 hover:bg-gray-100 rounded-bl text-xs flex-1",domProps:{textContent:e._s(e.__("Clear"))},on:{click:e.resetAll}}),r("button",{staticClass:"p-2 hover:bg-gray-100 flex-1 rounded-br border-l text-xs",domProps:{textContent:e._s(e.__("Close"))},on:{click:function(n){return e.$emit("closed")}}})])],1)},_sfc_staticRenderFns$4=[],__component__$4=normalizeComponent(_sfc_main$4,_sfc_render$4,_sfc_staticRenderFns$4,!1,null,null,null,null);const DataListFilter=__component__$4.exports,_sfc_main$3={components:{PublishField},props:{config:Object,values:Object,badges:Object},data(){return{initialValues:this.values,containerValues:{},filter:null,field:null,fieldValues:null}},computed:{availableFieldFilters(){return this.config?this.config.extra.filter(t=>!this.initialValues[t.handle]):[]},hasAvailableFieldFilters(){return!!this.availableFieldFilters.length},fieldOptions(){let t=this.availableFieldFilters.map(e=>({value:e.handle,label:e.display}));return _.sortBy(t,e=>e.label)},showFieldFilter(){return this.field},isFilterComplete(){if(!this.filter)return!1;let t=_.chain(this.filter.fields).filter(function(r){return new Validator(r,this.fieldValues).passesConditions()},this).mapObject(r=>r.handle).values().value(),e=_.chain(this.fieldValues).filter((r,n)=>t.includes(n)&&r).values().value().length===t.length;return this.field!==null&&e},newValues(){let t=clone(this.values);return delete t[this.field],t[this.field]=this.isFilterComplete?this.fieldValues:null,t}},watch:{field:"update",fieldValues:{deep:!0,handler(){this.update()}}},mounted(){this.hasAvailableFieldFilters&&(this.reset(),this.$refs.fieldSelect.$refs.search.focus())},methods:{popoverClosed(){this.badges[this.field]||this.resetAll()},reset(){this.field&&this.$emit("changed",this.initialValues),this.containerValues={},this.filter=null,this.field=null,this.fieldValues=null},resetAll(){this.reset(),this.$emit("cleared")},resetInitialValues(){this.initialValues=this.values,this.reset()},createFilter(t){this.field&&this.$emit("changed",this.initialValues),this.reset(),this.setFilter(t),this.setDefaultValues(),this.field=t},setFilter(t){this.filter=_.find(this.availableFieldFilters,e=>e.handle===t)},setDefaultValues(){if(!this.filter)return;let t={};this.filter.fields.filter(e=>e.default).forEach(e=>t[e.handle]=e.default),this.updateValues(t)},updateValues(t){this.updateContainerValues(t),this.updateFieldValues(t)},updateContainerValues(t){this.containerValues=clone(t)},updateFieldValues:_.debounce(function(t){this.fieldValues=clone(t)},300),update(){this.$emit("changed",this.newValues)}}};var _sfc_render$3=function t(){var e=this,r=e._self._c;return r("div",[e.hasAvailableFieldFilters?r("div",[r("div",{staticClass:"flex flex-col p-3"},[r("v-select",{ref:"fieldSelect",attrs:{placeholder:e.__("Field"),options:e.fieldOptions,reduce:n=>n.value,value:e.field},on:{input:e.createFilter}}),e.showFieldFilter?r("publish-container",{staticClass:"filter-fields mt-2",attrs:{name:"filter-field",meta:{},values:e.containerValues,"track-dirty-state":!1},on:{updated:e.updateValues},scopedSlots:e._u([{key:"default",fn:function({setFieldValue:n,setFieldMeta:s}){return r("publish-fields",{staticClass:"w-full no-label",attrs:{fields:e.filter.fields,"name-prefix":"filter-field"},on:{updated:n,"meta-updated":s}})}}],null,!1,2555427817)}):e._e()],1),r("div",{staticClass:"flex border-t text-gray-800"},[r("button",{staticClass:"p-2 hover:bg-gray-100 rounded-bl text-xs flex-1",domProps:{textContent:e._s(e.__("Clear"))},on:{click:e.resetAll}}),r("button",{staticClass:"p-2 hover:bg-gray-100 flex-1 rounded-br border-l text-xs",domProps:{textContent:e._s(e.__("Close"))},on:{click:function(n){return e.$emit("closed")}}})])]):r("v-select",{attrs:{disabled:!0,placeholder:e.__("No available filters")}})],1)},_sfc_staticRenderFns$3=[],__component__$3=normalizeComponent(_sfc_main$3,_sfc_render$3,_sfc_staticRenderFns$3,!1,null,null,null,null);const FieldFilter=__component__$3.exports,_sfc_main$2={components:{DataListFilter,FieldFilter},props:{filters:{type:Array,default:()=>[]},activePreset:String,activePresetPayload:Object,activeFilters:Object,activeFilterBadges:Object,activeCount:Number,searchQuery:String,savesPresets:Boolean,preferencesPrefix:String,isSearching:Boolean},data(){return{filtering:!1,creating:!1,saving:!1,deleting:!1,savingPresetName:null,presets:[]}},inject:["sharedState"],watch:{activePresetPayload:{deep:!0,handler(t){this.savingPresetName=t.display||null}}},computed:{fieldFilter(){return this.filters.find(t=>t.handle==="runway-fields")},standardFilters(){return this.filters.filter(t=>t.handle!=="runway-fields")},pinnedFilters(){return this.standardFilters.filter(t=>t.pinned)},unpinnedFilters(){return this.standardFilters.filter(t=>!t.pinned)},creatingFilter(){return _.find(this.unpinnedFilters,t=>t.handle===this.creating)},creatingFilterHeader(){let t=data_get(this.creatingFilter,"title","Filter where");return __(t)+":"},showUnpinnedFilterSelection(){return!this.creating},fieldFilterBadges(){return data_get(this.activeFilterBadges,"runway-fields",{})},standardBadges(){return _.omit(this.activeFilterBadges,"runway-fields")},isFiltering(){return!_.isEmpty(this.activeFilters)||this.searchQuery||this.activePreset},isDirty(){return this.isFiltering?this.activePreset?this.activePresetPayload.query!=this.searchQuery||!_.isEqual(this.activePresetPayload.filters||{},this.activeFilters):!0:!1},canSave(){return this.savesPresets&&this.isDirty&&this.preferencesPrefix},savingPresetHandle(){return this.$slugify(this.savingPresetName,"_")},isUpdatingPreset(){return this.savingPresetHandle===this.activePreset},preferencesKey(){let t=this.savingPresetHandle||this.activePreset;return!this.preferencesPrefix||!t?null:`${this.preferencesPrefix}.filters.${t}`},preferencesPayload(){if(!this.savingPresetName)return null;let t={display:this.savingPresetName};return this.searchQuery&&(t.query=this.searchQuery),this.activeCount&&(t.filters=clone(this.activeFilters)),t}},methods:{resetFilterPopover(){this.creating=!1,setTimeout(()=>{var t;return(t=this.$refs.fieldFilter)==null?void 0:t.resetInitialValues()},100)},fieldFilterClosed(){this.$refs.fieldFilter.popoverClosed()},removeFieldFilter(t){let e=clone(this.activeFilters.fields);delete e[t],this.$emit("changed",{handle:"runway-fields",values:e})},removeStandardFilter(t){this.$emit("changed",{handle:t,values:null})},save(){!this.canSave||!this.preferencesPayload||(this.saving=!0,this.$preferences.set(this.preferencesKey,this.preferencesPayload).then(t=>{this.$refs.savePopover.close(),this.$emit("saved",this.savingPresetHandle),this.$toast.success(this.isUpdatingPreset?__("Filter preset updated"):__("Filter preset saved")),this.savingPresetName=null,this.saving=!1}).catch(t=>{this.$toast.error(this.isUpdatingPreset?__("Unable to update filter preset"):__("Unable to save filter preset")),this.saving=!1}))},remove(){this.$preferences.remove(this.preferencesKey).then(t=>{this.$emit("deleted",this.activePreset),this.$toast.success(__("Filter preset deleted")),this.deleting=!1}).catch(t=>{this.$toast.error(__("Unable to delete filter preset")),this.deleting=!1})}}};var _sfc_render$2=function t(){var e=this,r=e._self._c;return r("div",{staticClass:"shadow-inner bg-gray-300"},[r("div",{staticClass:"flex items-center flex-wrap px-3 border-b pt-2"},[e.fieldFilter?r("popover",{attrs:{placement:"bottom-start"},on:{closed:e.fieldFilterClosed},scopedSlots:e._u([{key:"default",fn:function({close:n}){return[r("div",{staticClass:"flex flex-col text-left min-w-[18rem]"},[r("div",{staticClass:"filter-fields text-sm"},[r("field-filter",{ref:"fieldFilter",attrs:{config:e.fieldFilter,values:e.activeFilters.fields||{},badges:e.fieldFilterBadges},on:{changed:function(s){return e.$emit("changed",{handle:"runway-fields",values:s})},cleared:function(s){e.creating=!1},closed:n}})],1)])]}}],null,!1,1951453130)},[r("template",{slot:"trigger"},[r("button",{staticClass:"filter-badge filter-badge-control mr-2 mb-2",on:{click:e.resetFilterPopover}},[e._v(" "+e._s(e.fieldFilter.title)+" "),r("svg-icon",{staticClass:"w-2 h-2 mx-2",attrs:{name:"micro/chevron-down-xs"}})],1)])],2):e._e(),e._l(e.pinnedFilters,function(n){return e.pinnedFilters.length?r("popover",{key:n.handle,attrs:{placement:"bottom-start","stop-propagation":!1},scopedSlots:e._u([{key:"default",fn:function({close:s}){return[r("div",{staticClass:"filter-fields w-64"},[r("data-list-filter",{key:n.handle,attrs:{filter:n,values:e.activeFilters[n.handle]},on:{changed:function(a){return e.$emit("changed",{handle:n.handle,values:a})},closed:s}})],1)]}}],null,!0)},[r("template",{slot:"trigger"},[r("button",{staticClass:"filter-badge filter-badge-control mr-2 mb-2"},[e._v(" "+e._s(n.title)+" "),r("svg-icon",{staticClass:"w-2 h-2 mx-2",attrs:{name:"micro/chevron-down-xs"}})],1)])],2):e._e()}),e.unpinnedFilters.length?r("popover",{attrs:{placement:"bottom-start","stop-propagation":!1},scopedSlots:e._u([{key:"default",fn:function({close:n}){return[r("div",{staticClass:"filter-fields w-64"},[r("h6",{staticClass:"p-3 pb-0",domProps:{textContent:e._s(e.creatingFilterHeader)}}),e.showUnpinnedFilterSelection?r("div",{staticClass:"p-3 pt-1"},e._l(e.unpinnedFilters,function(s){return r("button",{key:s.handle,staticClass:"btn w-full mt-1",domProps:{textContent:e._s(s.title)},on:{click:function(a){e.creating=s.handle}}})}),0):r("div",e._l(e.unpinnedFilters,function(s){return e.creating===s.handle?r("data-list-filter",{key:s.handle,attrs:{filter:s,values:e.activeFilters[s.handle]},on:{changed:function(a){return e.$emit("changed",{handle:s.handle,values:a})},cleared:function(a){e.creating=!1},closed:n}}):e._e()}),1)])]}}],null,!1,1858792327)},[r("template",{slot:"trigger"},[r("button",{staticClass:"filter-badge filter-badge-control mr-2 mb-2",on:{click:e.resetFilterPopover}},[e._v(" "+e._s(e.__("Filter"))+" "),r("svg-icon",{staticClass:"w-2 h-2 mx-2",attrs:{name:"micro/chevron-down-xs"}})],1)])],2):e._e(),e._l(e.fieldFilterBadges,function(n,s){return r("div",{staticClass:"filter-badge mr-2 mb-2"},[r("span",[e._v(e._s(n))]),r("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.__("Remove Filter"),expression:"__('Remove Filter')"}],on:{click:function(a){return e.removeFieldFilter(s)}}},[e._v("Ã")])])}),e._l(e.standardBadges,function(n,s){return r("div",{staticClass:"filter-badge mr-2 mb-2"},[r("span",[e._v(e._s(n))]),r("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.__("Remove Filter"),expression:"__('Remove Filter')"}],on:{click:function(a){return e.removeStandardFilter(s)}}},[e._v("Ã")])])})],2)])},_sfc_staticRenderFns$2=[],__component__$2=normalizeComponent(_sfc_main$2,_sfc_render$2,_sfc_staticRenderFns$2,!1,null,null,null,null);const DataListFilters=__component__$2.exports,_sfc_main$1={mixins:[Listing],components:{DataListFilters},props:{listingConfig:Object,initialColumns:Array,actionUrl:String,initialPrimaryColumn:String},data(){return{listingKey:"id",preferencesPrefix:this.listingConfig.preferencesPrefix??"runway",requestUrl:this.listingConfig.requestUrl,columns:this.initialColumns,meta:{},primaryColumn:`cell-${this.initialPrimaryColumn}`,deletingRow:!1}},methods:{canViewRow(t){return t.viewable&&t.permalink},canEditRow(t){return t.editable},confirmDeleteRow(t,e,r){this.visibleColumns=this.columns.filter(n=>n.visible),this.deletingRow={id:t,index:e,deleteUrl:r}},deleteRow(t){const e=this.deletingRow.id;t=t||__("Deleted"),this.$axios.delete(this.deletingRow.deleteUrl).then(()=>{let r=_.indexOf(this.items,_.findWhere(this.rows,{id:e}));this.items.splice(r,1),this.deletingRow=!1,this.$toast.success(t)}).catch(r=>{this.$toast.error(r.response?r.response.data.message:__("Something went wrong"))})},cancelDeleteRow(){this.deletingRow=!1,setTimeout(()=>{this.visibleColumns=this.columns.filter(t=>t.visible)},50)}}};var _sfc_render$1=function t(){var e=this,r=e._self._c;return r("div",[e.initializing?r("div",{staticClass:"card loading"},[r("loading-graphic")],1):e._e(),e.initializing?e._e():r("data-list",{attrs:{rows:e.items,columns:e.columns,sort:!1,"sort-column":e.sortColumn,"sort-direction":e.sortDirection},on:{"visible-columns-updated":function(n){e.visibleColumns=n}},scopedSlots:e._u([{key:"default",fn:function({hasSelections:n}){return r("div",{},[r("div",{staticClass:"card overflow-hidden p-0 relative"},[r("div",{staticClass:"flex flex-wrap items-center justify-between px-2 pb-2 text-sm border-b"},[r("data-list-filter-presets",{directives:[{name:"show",rawName:"v-show",value:e.alwaysShowFilters||!e.showFilters,expression:"alwaysShowFilters || !showFilters"}],ref:"presets",attrs:{"active-preset":e.activePreset,"active-preset-payload":e.activePresetPayload,"active-filters":e.activeFilters,"has-active-filters":e.hasActiveFilters,"preferences-prefix":e.preferencesPrefix,"search-query":e.searchQuery},on:{selected:e.selectPreset,reset:e.filtersReset,"hide-filters":e.filtersHide,"show-filters":e.filtersShow}}),r("data-list-search",{ref:"search",staticClass:"h-8 mt-2 min-w-[240px] w-full",attrs:{placeholder:e.searchPlaceholder},model:{value:e.searchQuery,callback:function(s){e.searchQuery=s},expression:"searchQuery"}}),r("div",{staticClass:"flex space-x-2 mt-2"},[r("button",{directives:[{name:"show",rawName:"v-show",value:e.isDirty,expression:"isDirty"}],staticClass:"btn btn-sm ml-2",domProps:{textContent:e._s(e.__("Reset"))},on:{click:function(s){return e.$refs.presets.refreshPreset()}}}),r("button",{directives:[{name:"show",rawName:"v-show",value:e.isDirty,expression:"isDirty"}],staticClass:"btn btn-sm ml-2",domProps:{textContent:e._s(e.__("Save"))},on:{click:function(s){return e.$refs.presets.savePreset()}}}),r("data-list-column-picker",{attrs:{"preferences-key":e.preferencesKey("columns")}})],1)],1),r("div",[r("data-list-filters",{attrs:{filters:e.filters,"active-preset":e.activePreset,"active-preset-payload":e.activePresetPayload,"active-filters":e.activeFilters,"active-filter-badges":e.activeFilterBadges,"active-count":e.activeFilterCount,"search-query":e.searchQuery,"is-searching":!0,"saves-presets":!0,"preferences-prefix":e.preferencesPrefix},on:{changed:e.filterChanged,saved:function(s){return e.$refs.presets.setPreset(s)},deleted:function(s){return e.$refs.presets.refreshPresets()}}})],1),r("div",{directives:[{name:"show",rawName:"v-show",value:e.items.length===0,expression:"items.length === 0"}],staticClass:"p-6 text-center text-gray-500",domProps:{textContent:e._s(e.__("No results"))}}),r("data-list-bulk-actions",{attrs:{url:e.actionUrl},on:{started:e.actionStarted,completed:e.actionCompleted}}),r("div",{staticClass:"overflow-x-auto overflow-y-hidden"},[r("data-list-table",{directives:[{name:"show",rawName:"v-show",value:e.items.length,expression:"items.length"}],attrs:{"allow-bulk-actions":!0,loading:e.loading,reorderable:!1,sortable:!0,"toggle-selection-on-row-click":!0,"allow-column-picker":!0,"column-preferences-key":e.preferencesKey("columns")},on:{sorted:e.sorted},scopedSlots:e._u([{key:e.primaryColumn,fn:function({row:s,value:a}){return[r("a",{attrs:{href:s.edit_url},on:{click:function(l){l.stopPropagation()}}},[e._v(e._s(a))])]}},{key:"actions",fn:function({row:s,index:a}){return[e.canViewRow(s)||e.canEditRow(s)||s.actions.length?r("dropdown-list",[e.canViewRow(s)?r("dropdown-item",{attrs:{text:e.__("View"),redirect:s.permalink}}):e._e(),e.canEditRow(s)?r("dropdown-item",{attrs:{text:e.__("Edit"),redirect:s.edit_url}}):e._e(),(e.canViewRow(s)||e.canEditRow(s))&&s.actions.length?r("div",{staticClass:"divider"}):e._e(),r("data-list-inline-actions",{attrs:{item:s.id,url:e.actionUrl,actions:s.actions},on:{started:e.actionStarted,completed:e.actionCompleted}})],1):r("div",{staticClass:"w-10 block"})]}}],null,!0)})],1),e.deletingRow!==!1?r("confirmation-modal",{attrs:{title:e.__("Delete"),bodyText:e.__("Are you sure you want to delete this item?"),buttonText:e.__("Delete"),danger:!0},on:{confirm:function(s){return e.deleteRow()},cancel:e.cancelDeleteRow}}):e._e()],1),r("data-list-pagination",{staticClass:"mt-3",attrs:{"resource-meta":e.meta,"per-page":e.perPage},on:{"page-selected":e.selectPage,"per-page-changed":e.changePerPage}})],1)}}],null,!1,3040510442)})],1)},_sfc_staticRenderFns$1=[],__component__$1=normalizeComponent(_sfc_main$1,_sfc_render$1,_sfc_staticRenderFns$1,!1,null,null,null,null);const RunwayListing=__component__$1.exports,_sfc_main={mixins:[IndexFieldtype],data(){return{showingAll:!1}},computed:{items(){return this.showingAll?this.value:this.value.slice(0,2)},hasMore(){return this.value.length>2}},methods:{showAll(){this.showingAll=!0},hideExtra(){this.showingAll=!1}}};var _sfc_render=function t(){var e=this,r=e._self._c;return r("div",[r("div",{staticClass:"flex flex-wrap"},e._l(e.items,function(n,s){return r("div",{key:n.id,staticClass:"relationship-index-field-item h-5",class:{"mb-1.5":s<e.items.length-1}},[r("div",{staticClass:"flex items-center shrink"},[n.hasOwnProperty("published")&&n.published!==null?r("div",{staticClass:"little-dot h-1 w-1 mr-1",class:[n.published?"bg-green-600":"bg-gray-400"]}):e._e(),r("a",{attrs:{href:n.edit_url,title:n.title},domProps:{textContent:e._s(n.title)}})])])}),0),e.hasMore&&!e.showingAll?r("button",{staticClass:"mt-1 text-blue text-2xs",domProps:{textContent:e._s(e.__("messages.view_more_count",{count:e.value.length-2}))},on:{click:function(n){return n.stopPropagation(),e.showAll.apply(null,arguments)}}}):e._e(),e.showingAll?r("button",{staticClass:"mt-1 text-blue text-2xs",domProps:{textContent:e._s(e.__("Hide"))},on:{click:function(n){return n.stopPropagation(),e.hideExtra.apply(null,arguments)}}}):e._e()])},_sfc_staticRenderFns=[],__component__=normalizeComponent(_sfc_main,_sfc_render,_sfc_staticRenderFns,!1,null,null,null,null);const HasManyFieldtypeIndex=__component__.exports;Statamic.$components.register("runway-relationship-fieldtype",RelationshipFieldtype);Statamic.$components.register("relationship-table-mode",RelationshipTableMode);Statamic.$components.register("hasmany-related-item",HasManyRelatedItem);Statamic.$components.register("runway-publish-form",PublishForm);Statamic.$components.register("runway-listing",RunwayListing);Statamic.$components.register("has_many-fieldtype-index",HasManyFieldtypeIndex);
